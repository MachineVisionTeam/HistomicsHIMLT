# IIPImage Server Configuration
# Auto-generated by Ansible on {{ ansible_date_time.iso8601 }}

# FastCGI configuration
FcgidInitialEnv LOGFILE "/var/log/iipsrv.log"
FcgidInitialEnv VERBOSITY "5"
FcgidInitialEnv MAX_IMAGE_CACHE_SIZE "{{ iipimage_max_image_cache_size }}"
FcgidInitialEnv JPEG_QUALITY "90"
FcgidInitialEnv MAX_CVT "5000"

# IIPImage ScriptAlias
ScriptAlias /iipsrv/ "/usr/lib/iipimage-server/iipsrv.fcgi"
ScriptAlias /iipsrv "/usr/lib/iipimage-server/iipsrv.fcgi"

# Directory permissions
<Directory "/usr/lib/iipimage-server/">
    AllowOverride None
    Options None
    Require all granted
</Directory>

# Images directory permissions
<Directory "{{ iipimage_images_dir }}">
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted
</Directory>

# Alias for images directory
Alias /images "{{ iipimage_images_dir }}"
