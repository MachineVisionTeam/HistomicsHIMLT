(function(){const te=document.createElement("link").relList;if(te&&te.supports&&te.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function a(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(o){if(o.ep)return;o.ep=!0;const f=a(o);fetch(o.href,f)}})();function qo(ne){return ne&&ne.__esModule&&Object.prototype.hasOwnProperty.call(ne,"default")?ne.default:ne}var Lo={exports:{}},il={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mf;function nm(){if(Mf)return il;Mf=1;var ne=Symbol.for("react.transitional.element"),te=Symbol.for("react.fragment");function a(l,o,f){var p=null;if(f!==void 0&&(p=""+f),o.key!==void 0&&(p=""+o.key),"key"in o){f={};for(var h in o)h!=="key"&&(f[h]=o[h])}else f=o;return o=f.ref,{$$typeof:ne,type:l,key:p,ref:o!==void 0?o:null,props:f}}return il.Fragment=te,il.jsx=a,il.jsxs=a,il}var Hf;function am(){return Hf||(Hf=1,Lo.exports=nm()),Lo.exports}var P=am(),Po={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nf;function lm(){if(Nf)return Oe;Nf=1;var ne=Symbol.for("react.transitional.element"),te=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),p=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),S=Symbol.iterator;function C(z){return z===null||typeof z!="object"?null:(z=S&&z[S]||z["@@iterator"],typeof z=="function"?z:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,R={};function M(z,I,Q){this.props=z,this.context=I,this.refs=R,this.updater=Q||_}M.prototype.isReactComponent={},M.prototype.setState=function(z,I){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,I,"setState")},M.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function X(){}X.prototype=M.prototype;function K(z,I,Q){this.props=z,this.context=I,this.refs=R,this.updater=Q||_}var ce=K.prototype=new X;ce.constructor=K,O(ce,M.prototype),ce.isPureReactComponent=!0;var Ce=Array.isArray;function Te(){}var V={H:null,A:null,T:null,S:null},we=Object.prototype.hasOwnProperty;function ze(z,I,Q){var ie=Q.ref;return{$$typeof:ne,type:z,key:I,ref:ie!==void 0?ie:null,props:Q}}function ct(z,I){return ze(z.type,I,z.props)}function Pe(z){return typeof z=="object"&&z!==null&&z.$$typeof===ne}function Fe(z){var I={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Q){return I[Q]})}var Je=/\/+/g;function dt(z,I){return typeof z=="object"&&z!==null&&z.key!=null?Fe(""+z.key):I.toString(36)}function _t(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(Te,Te):(z.status="pending",z.then(function(I){z.status==="pending"&&(z.status="fulfilled",z.value=I)},function(I){z.status==="pending"&&(z.status="rejected",z.reason=I)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function G(z,I,Q,ie,xe){var _e=typeof z;(_e==="undefined"||_e==="boolean")&&(z=null);var Be=!1;if(z===null)Be=!0;else switch(_e){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(z.$$typeof){case ne:case te:Be=!0;break;case d:return Be=z._init,G(Be(z._payload),I,Q,ie,xe)}}if(Be)return xe=xe(z),Be=ie===""?"."+dt(z,0):ie,Ce(xe)?(Q="",Be!=null&&(Q=Be.replace(Je,"$&/")+"/"),G(xe,I,Q,"",function(Ft){return Ft})):xe!=null&&(Pe(xe)&&(xe=ct(xe,Q+(xe.key==null||z&&z.key===xe.key?"":(""+xe.key).replace(Je,"$&/")+"/")+Be)),I.push(xe)),1;Be=0;var We=ie===""?".":ie+":";if(Ce(z))for(var ke=0;ke<z.length;ke++)ie=z[ke],_e=We+dt(ie,ke),Be+=G(ie,I,Q,_e,xe);else if(ke=C(z),typeof ke=="function")for(z=ke.call(z),ke=0;!(ie=z.next()).done;)ie=ie.value,_e=We+dt(ie,ke++),Be+=G(ie,I,Q,_e,xe);else if(_e==="object"){if(typeof z.then=="function")return G(_t(z),I,Q,ie,xe);throw I=String(z),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return Be}function ae(z,I,Q){if(z==null)return z;var ie=[],xe=0;return G(z,ie,"","",function(_e){return I.call(Q,_e,xe++)}),ie}function me(z){if(z._status===-1){var I=z._result;I=I(),I.then(function(Q){(z._status===0||z._status===-1)&&(z._status=1,z._result=Q)},function(Q){(z._status===0||z._status===-1)&&(z._status=2,z._result=Q)}),z._status===-1&&(z._status=0,z._result=I)}if(z._status===1)return z._result.default;throw z._result}var Ne=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},be={map:ae,forEach:function(z,I,Q){ae(z,function(){I.apply(this,arguments)},Q)},count:function(z){var I=0;return ae(z,function(){I++}),I},toArray:function(z){return ae(z,function(I){return I})||[]},only:function(z){if(!Pe(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Oe.Activity=v,Oe.Children=be,Oe.Component=M,Oe.Fragment=a,Oe.Profiler=o,Oe.PureComponent=K,Oe.StrictMode=l,Oe.Suspense=u,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(z){return V.H.useMemoCache(z)}},Oe.cache=function(z){return function(){return z.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(z,I,Q){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ie=O({},z.props),xe=z.key;if(I!=null)for(_e in I.key!==void 0&&(xe=""+I.key),I)!we.call(I,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&I.ref===void 0||(ie[_e]=I[_e]);var _e=arguments.length-2;if(_e===1)ie.children=Q;else if(1<_e){for(var Be=Array(_e),We=0;We<_e;We++)Be[We]=arguments[We+2];ie.children=Be}return ze(z.type,xe,ie)},Oe.createContext=function(z){return z={$$typeof:p,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:f,_context:z},z},Oe.createElement=function(z,I,Q){var ie,xe={},_e=null;if(I!=null)for(ie in I.key!==void 0&&(_e=""+I.key),I)we.call(I,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(xe[ie]=I[ie]);var Be=arguments.length-2;if(Be===1)xe.children=Q;else if(1<Be){for(var We=Array(Be),ke=0;ke<Be;ke++)We[ke]=arguments[ke+2];xe.children=We}if(z&&z.defaultProps)for(ie in Be=z.defaultProps,Be)xe[ie]===void 0&&(xe[ie]=Be[ie]);return ze(z,_e,xe)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(z){return{$$typeof:h,render:z}},Oe.isValidElement=Pe,Oe.lazy=function(z){return{$$typeof:d,_payload:{_status:-1,_result:z},_init:me}},Oe.memo=function(z,I){return{$$typeof:c,type:z,compare:I===void 0?null:I}},Oe.startTransition=function(z){var I=V.T,Q={};V.T=Q;try{var ie=z(),xe=V.S;xe!==null&&xe(Q,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(Te,Ne)}catch(_e){Ne(_e)}finally{I!==null&&Q.types!==null&&(I.types=Q.types),V.T=I}},Oe.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Oe.use=function(z){return V.H.use(z)},Oe.useActionState=function(z,I,Q){return V.H.useActionState(z,I,Q)},Oe.useCallback=function(z,I){return V.H.useCallback(z,I)},Oe.useContext=function(z){return V.H.useContext(z)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(z,I){return V.H.useDeferredValue(z,I)},Oe.useEffect=function(z,I){return V.H.useEffect(z,I)},Oe.useEffectEvent=function(z){return V.H.useEffectEvent(z)},Oe.useId=function(){return V.H.useId()},Oe.useImperativeHandle=function(z,I,Q){return V.H.useImperativeHandle(z,I,Q)},Oe.useInsertionEffect=function(z,I){return V.H.useInsertionEffect(z,I)},Oe.useLayoutEffect=function(z,I){return V.H.useLayoutEffect(z,I)},Oe.useMemo=function(z,I){return V.H.useMemo(z,I)},Oe.useOptimistic=function(z,I){return V.H.useOptimistic(z,I)},Oe.useReducer=function(z,I,Q){return V.H.useReducer(z,I,Q)},Oe.useRef=function(z){return V.H.useRef(z)},Oe.useState=function(z){return V.H.useState(z)},Oe.useSyncExternalStore=function(z,I,Q){return V.H.useSyncExternalStore(z,I,Q)},Oe.useTransition=function(){return V.H.useTransition()},Oe.version="19.2.0",Oe}var Bf;function Vo(){return Bf||(Bf=1,Po.exports=lm()),Po.exports}var ve=Vo();const sm=qo(ve);var Uo={exports:{}},nl={},jo={exports:{}},Fo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf;function rm(){return Lf||(Lf=1,(function(ne){function te(G,ae){var me=G.length;G.push(ae);e:for(;0<me;){var Ne=me-1>>>1,be=G[Ne];if(0<o(be,ae))G[Ne]=ae,G[me]=be,me=Ne;else break e}}function a(G){return G.length===0?null:G[0]}function l(G){if(G.length===0)return null;var ae=G[0],me=G.pop();if(me!==ae){G[0]=me;e:for(var Ne=0,be=G.length,z=be>>>1;Ne<z;){var I=2*(Ne+1)-1,Q=G[I],ie=I+1,xe=G[ie];if(0>o(Q,me))ie<be&&0>o(xe,Q)?(G[Ne]=xe,G[ie]=me,Ne=ie):(G[Ne]=Q,G[I]=me,Ne=I);else if(ie<be&&0>o(xe,me))G[Ne]=xe,G[ie]=me,Ne=ie;else break e}}return ae}function o(G,ae){var me=G.sortIndex-ae.sortIndex;return me!==0?me:G.id-ae.id}if(ne.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;ne.unstable_now=function(){return f.now()}}else{var p=Date,h=p.now();ne.unstable_now=function(){return p.now()-h}}var u=[],c=[],d=1,v=null,S=3,C=!1,_=!1,O=!1,R=!1,M=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function ce(G){for(var ae=a(c);ae!==null;){if(ae.callback===null)l(c);else if(ae.startTime<=G)l(c),ae.sortIndex=ae.expirationTime,te(u,ae);else break;ae=a(c)}}function Ce(G){if(O=!1,ce(G),!_)if(a(u)!==null)_=!0,Te||(Te=!0,Fe());else{var ae=a(c);ae!==null&&_t(Ce,ae.startTime-G)}}var Te=!1,V=-1,we=5,ze=-1;function ct(){return R?!0:!(ne.unstable_now()-ze<we)}function Pe(){if(R=!1,Te){var G=ne.unstable_now();ze=G;var ae=!0;try{e:{_=!1,O&&(O=!1,X(V),V=-1),C=!0;var me=S;try{t:{for(ce(G),v=a(u);v!==null&&!(v.expirationTime>G&&ct());){var Ne=v.callback;if(typeof Ne=="function"){v.callback=null,S=v.priorityLevel;var be=Ne(v.expirationTime<=G);if(G=ne.unstable_now(),typeof be=="function"){v.callback=be,ce(G),ae=!0;break t}v===a(u)&&l(u),ce(G)}else l(u);v=a(u)}if(v!==null)ae=!0;else{var z=a(c);z!==null&&_t(Ce,z.startTime-G),ae=!1}}break e}finally{v=null,S=me,C=!1}ae=void 0}}finally{ae?Fe():Te=!1}}}var Fe;if(typeof K=="function")Fe=function(){K(Pe)};else if(typeof MessageChannel<"u"){var Je=new MessageChannel,dt=Je.port2;Je.port1.onmessage=Pe,Fe=function(){dt.postMessage(null)}}else Fe=function(){M(Pe,0)};function _t(G,ae){V=M(function(){G(ne.unstable_now())},ae)}ne.unstable_IdlePriority=5,ne.unstable_ImmediatePriority=1,ne.unstable_LowPriority=4,ne.unstable_NormalPriority=3,ne.unstable_Profiling=null,ne.unstable_UserBlockingPriority=2,ne.unstable_cancelCallback=function(G){G.callback=null},ne.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<G?Math.floor(1e3/G):5},ne.unstable_getCurrentPriorityLevel=function(){return S},ne.unstable_next=function(G){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var me=S;S=ae;try{return G()}finally{S=me}},ne.unstable_requestPaint=function(){R=!0},ne.unstable_runWithPriority=function(G,ae){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var me=S;S=G;try{return ae()}finally{S=me}},ne.unstable_scheduleCallback=function(G,ae,me){var Ne=ne.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Ne+me:Ne):me=Ne,G){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=me+be,G={id:d++,callback:ae,priorityLevel:G,startTime:me,expirationTime:be,sortIndex:-1},me>Ne?(G.sortIndex=me,te(c,G),a(u)===null&&G===a(c)&&(O?(X(V),V=-1):O=!0,_t(Ce,me-Ne))):(G.sortIndex=be,te(u,G),_||C||(_=!0,Te||(Te=!0,Fe()))),G},ne.unstable_shouldYield=ct,ne.unstable_wrapCallback=function(G){var ae=S;return function(){var me=S;S=ae;try{return G.apply(this,arguments)}finally{S=me}}}})(Fo)),Fo}var Pf;function om(){return Pf||(Pf=1,jo.exports=rm()),jo.exports}var Go={exports:{}},Lt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uf;function um(){if(Uf)return Lt;Uf=1;var ne=Vo();function te(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var l={d:{f:a,r:function(){throw Error(te(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function f(u,c,d){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:u,containerInfo:c,implementation:d}}var p=ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Lt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Lt.createPortal=function(u,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(te(299));return f(u,c,null,d)},Lt.flushSync=function(u){var c=p.T,d=l.p;try{if(p.T=null,l.p=2,u)return u()}finally{p.T=c,l.p=d,l.d.f()}},Lt.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,l.d.C(u,c))},Lt.prefetchDNS=function(u){typeof u=="string"&&l.d.D(u)},Lt.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var d=c.as,v=h(d,c.crossOrigin),S=typeof c.integrity=="string"?c.integrity:void 0,C=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?l.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:C}):d==="script"&&l.d.X(u,{crossOrigin:v,integrity:S,fetchPriority:C,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Lt.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=h(c.as,c.crossOrigin);l.d.M(u,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&l.d.M(u)},Lt.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,v=h(d,c.crossOrigin);l.d.L(u,d,{crossOrigin:v,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Lt.preloadModule=function(u,c){if(typeof u=="string")if(c){var d=h(c.as,c.crossOrigin);l.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else l.d.m(u)},Lt.requestFormReset=function(u){l.d.r(u)},Lt.unstable_batchedUpdates=function(u,c){return u(c)},Lt.useFormState=function(u,c,d){return p.H.useFormState(u,c,d)},Lt.useFormStatus=function(){return p.H.useHostTransitionStatus()},Lt.version="19.2.0",Lt}var jf;function cm(){if(jf)return Go.exports;jf=1;function ne(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ne)}catch(te){console.error(te)}}return ne(),Go.exports=um(),Go.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ff;function hm(){if(Ff)return nl;Ff=1;var ne=om(),te=Vo(),a=cm();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function u(e){if(f(e)!==e)throw Error(l(188))}function c(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(l(188));return t!==e?null:e}for(var i=e,n=t;;){var s=i.return;if(s===null)break;var r=s.alternate;if(r===null){if(n=s.return,n!==null){i=n;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===i)return u(s),e;if(r===n)return u(s),t;r=r.sibling}throw Error(l(188))}if(i.return!==n.return)i=s,n=r;else{for(var g=!1,w=s.child;w;){if(w===i){g=!0,i=s,n=r;break}if(w===n){g=!0,n=s,i=r;break}w=w.sibling}if(!g){for(w=r.child;w;){if(w===i){g=!0,i=r,n=s;break}if(w===n){g=!0,n=r,i=s;break}w=w.sibling}if(!g)throw Error(l(189))}}if(i.alternate!==n)throw Error(l(190))}if(i.tag!==3)throw Error(l(188));return i.stateNode.current===i?e:t}function d(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=d(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),K=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),ze=Symbol.for("react.activity"),ct=Symbol.for("react.memo_cache_sentinel"),Pe=Symbol.iterator;function Fe(e){return e===null||typeof e!="object"?null:(e=Pe&&e[Pe]||e["@@iterator"],typeof e=="function"?e:null)}var Je=Symbol.for("react.client.reference");function dt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Je?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case M:return"Profiler";case R:return"StrictMode";case Ce:return"Suspense";case Te:return"SuspenseList";case ze:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case K:return e.displayName||"Context";case X:return(e._context.displayName||"Context")+".Consumer";case ce:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return t=e.displayName||null,t!==null?t:dt(e.type)||"Memo";case we:t=e._payload,e=e._init;try{return dt(e(t))}catch{}}return null}var _t=Array.isArray,G=te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Ne=[],be=-1;function z(e){return{current:e}}function I(e){0>be||(e.current=Ne[be],Ne[be]=null,be--)}function Q(e,t){be++,Ne[be]=e.current,e.current=t}var ie=z(null),xe=z(null),_e=z(null),Be=z(null);function We(e,t){switch(Q(_e,t),Q(xe,e),Q(ie,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ef(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ef(t),e=tf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(ie),Q(ie,e)}function ke(){I(ie),I(xe),I(_e)}function Ft(e){e.memoizedState!==null&&Q(Be,e);var t=ie.current,i=tf(t,e.type);t!==i&&(Q(xe,e),Q(ie,i))}function Pt(e){xe.current===e&&(I(ie),I(xe)),Be.current===e&&(I(Be),Ja._currentValue=me)}var rt,ti;function Tt(e){if(rt===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);rt=t&&t[1]||"",ti=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rt+e+ti}var zt=!1;function St(e,t){if(!e||zt)return"";zt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(F){var j=F}Reflect.construct(e,[],W)}else{try{W.call()}catch(F){j=F}e.call(W.prototype)}}else{try{throw Error()}catch(F){j=F}(W=e())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(F){if(F&&j&&typeof F.stack=="string")return[F.stack,j.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=n.DetermineComponentFrameRoot(),g=r[0],w=r[1];if(g&&w){var D=g.split(`
`),L=w.split(`
`);for(s=n=0;n<D.length&&!D[n].includes("DetermineComponentFrameRoot");)n++;for(;s<L.length&&!L[s].includes("DetermineComponentFrameRoot");)s++;if(n===D.length||s===L.length)for(n=D.length-1,s=L.length-1;1<=n&&0<=s&&D[n]!==L[s];)s--;for(;1<=n&&0<=s;n--,s--)if(D[n]!==L[s]){if(n!==1||s!==1)do if(n--,s--,0>s||D[n]!==L[s]){var Z=`
`+D[n].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=n&&0<=s);break}}}finally{zt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Tt(i):""}function m(e,t){switch(e.tag){case 26:case 27:case 5:return Tt(e.type);case 16:return Tt("Lazy");case 13:return e.child!==t&&t!==null?Tt("Suspense Fallback"):Tt("Suspense");case 19:return Tt("SuspenseList");case 0:case 15:return St(e.type,!1);case 11:return St(e.type.render,!1);case 1:return St(e.type,!0);case 31:return Tt("Activity");default:return""}}function E(e){try{var t="",i=null;do t+=m(e,i),i=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var U=Object.prototype.hasOwnProperty,$=ne.unstable_scheduleCallback,ee=ne.unstable_cancelCallback,ye=ne.unstable_shouldYield,le=ne.unstable_requestPaint,Re=ne.unstable_now,Ge=ne.unstable_getCurrentPriorityLevel,Ie=ne.unstable_ImmediatePriority,pe=ne.unstable_UserBlockingPriority,Ke=ne.unstable_NormalPriority,T=ne.unstable_LowPriority,y=ne.unstable_IdlePriority,x=ne.log,b=ne.unstable_setDisableYieldValue,q=null,J=null;function he(e){if(typeof x=="function"&&b(e),J&&typeof J.setStrictMode=="function")try{J.setStrictMode(q,e)}catch{}}var De=Math.clz32?Math.clz32:gt,de=Math.log,Ot=Math.LN2;function gt(e){return e>>>=0,e===0?32:31-(de(e)/Ot|0)|0}var Yt=256,pi=262144,xi=4194304;function ii(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Hn(e,t,i){var n=e.pendingLanes;if(n===0)return 0;var s=0,r=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var w=n&134217727;return w!==0?(n=w&~r,n!==0?s=ii(n):(g&=w,g!==0?s=ii(g):i||(i=w&~e,i!==0&&(s=ii(i))))):(w=n&~r,w!==0?s=ii(w):g!==0?s=ii(g):i||(i=n&~e,i!==0&&(s=ii(i)))),s===0?0:t!==0&&t!==s&&(t&r)===0&&(r=s&-s,i=t&-t,r>=i||r===32&&(i&4194048)!==0)?t:s}function dn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function _s(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sl(){var e=xi;return xi<<=1,(xi&62914560)===0&&(xi=4194304),e}function gn(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function mn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Cs(e,t,i,n,s,r){var g=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var w=e.entanglements,D=e.expirationTimes,L=e.hiddenUpdates;for(i=g&~i;0<i;){var Z=31-De(i),W=1<<Z;w[Z]=0,D[Z]=-1;var j=L[Z];if(j!==null)for(L[Z]=null,Z=0;Z<j.length;Z++){var F=j[Z];F!==null&&(F.lane&=-536870913)}i&=~W}n!==0&&da(e,n,0),r!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=r&~(g&~t))}function da(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-De(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|i&261930}function rl(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-De(i),s=1<<n;s&t|e[n]&t&&(e[n]|=t),i&=~s}}function ol(e,t){var i=t&-t;return i=(i&42)!==0?1:pn(i),(i&(e.suspendedLanes|t))!==0?0:i}function pn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ga(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Rs(){var e=ae.p;return e!==0?e:(e=window.event,e===void 0?32:_f(e.type))}function ul(e,t){var i=ae.p;try{return ae.p=e,t()}finally{ae.p=i}}var vi=Math.random().toString(36).slice(2),Ct="__reactFiber$"+vi,At="__reactProps$"+vi,H="__reactContainer$"+vi,k="__reactEvents$"+vi,oe="__reactListeners$"+vi,ue="__reactHandles$"+vi,se="__reactResources$"+vi,re="__reactMarker$"+vi;function Le(e){delete e[Ct],delete e[At],delete e[k],delete e[oe],delete e[ue]}function Me(e){var t=e[Ct];if(t)return t;for(var i=e.parentNode;i;){if(t=i[H]||i[Ct]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=uf(e);e!==null;){if(i=e[Ct])return i;e=uf(e)}return t}e=i,i=e.parentNode}return null}function at(e){if(e=e[Ct]||e[H]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function lt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function Ut(e){var t=e[se];return t||(t=e[se]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ft(e){e[re]=!0}var cl=new Set,hl={};function Ei(e,t){qi(e,t),qi(e+"Capture",t)}function qi(e,t){for(hl[e]=t,e=0;e<t.length;e++)cl.add(t[e])}var If=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zo={},ko={};function Qf(e){return U.call(ko,e)?!0:U.call(Zo,e)?!1:If.test(e)?ko[e]=!0:(Zo[e]=!0,!1)}function fl(e,t,i){if(Qf(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function dl(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function bi(e,t,i,n){if(n===null)e.removeAttribute(i);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+n)}}function ni(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wf(e,t,i){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(g){i=""+g,r.call(this,g)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ds(e){if(!e._valueTracker){var t=Xo(e)?"checked":"value";e._valueTracker=Wf(e,t,""+e[t])}}function Yo(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=Xo(e)?e.checked?"true":"false":e.value),e=n,e!==i?(t.setValue(e),!0):!1}function gl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Kf=/[\n"\\]/g;function ai(e){return e.replace(Kf,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function zs(e,t,i,n,s,r,g,w){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ni(t)):e.value!==""+ni(t)&&(e.value=""+ni(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Os(e,g,ni(t)):i!=null?Os(e,g,ni(i)):n!=null&&e.removeAttribute("value"),s==null&&r!=null&&(e.defaultChecked=!!r),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+ni(w):e.removeAttribute("name")}function Io(e,t,i,n,s,r,g,w){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||i!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){Ds(e);return}i=i!=null?""+ni(i):"",t=t!=null?""+ni(t):i,w||t===e.value||(e.value=t),e.defaultValue=t}n=n??s,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=w?e.checked:!!n,e.defaultChecked=!!n,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Ds(e)}function Os(e,t,i){t==="number"&&gl(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Nn(e,t,i,n){if(e=e.options,t){t={};for(var s=0;s<i.length;s++)t["$"+i[s]]=!0;for(i=0;i<e.length;i++)s=t.hasOwnProperty("$"+e[i].value),e[i].selected!==s&&(e[i].selected=s),s&&n&&(e[i].defaultSelected=!0)}else{for(i=""+ni(i),t=null,s=0;s<e.length;s++){if(e[s].value===i){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Qo(e,t,i){if(t!=null&&(t=""+ni(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+ni(i):""}function Wo(e,t,i,n){if(t==null){if(n!=null){if(i!=null)throw Error(l(92));if(_t(n)){if(1<n.length)throw Error(l(93));n=n[0]}i=n}i==null&&(i=""),t=i}i=ni(t),e.defaultValue=i,n=e.textContent,n===i&&n!==""&&n!==null&&(e.value=n),Ds(e)}function Bn(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Jf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ko(e,t,i){var n=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,i):typeof i!="number"||i===0||Jf.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Jo(e,t,i){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,i!=null){for(var n in i)!i.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var s in t)n=t[s],t.hasOwnProperty(s)&&i[s]!==n&&Ko(e,s,n)}else for(var r in t)t.hasOwnProperty(r)&&Ko(e,r,t[r])}function As(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $f=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ed=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ml(e){return ed.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function _i(){}var Ms=null;function Hs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ln=null,Pn=null;function $o(e){var t=at(e);if(t&&(e=t.stateNode)){var i=e[At]||null;e:switch(e=t.stateNode,t.type){case"input":if(zs(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+ai(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var s=n[At]||null;if(!s)throw Error(l(90));zs(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<i.length;t++)n=i[t],n.form===e.form&&Yo(n)}break e;case"textarea":Qo(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&Nn(e,!!i.multiple,t,!1)}}}var Ns=!1;function eu(e,t,i){if(Ns)return e(t,i);Ns=!0;try{var n=e(t);return n}finally{if(Ns=!1,(Ln!==null||Pn!==null)&&(is(),Ln&&(t=Ln,e=Pn,Pn=Ln=null,$o(t),e)))for(t=0;t<e.length;t++)$o(e[t])}}function ma(e,t){var i=e.stateNode;if(i===null)return null;var n=i[At]||null;if(n===null)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(l(231,t,typeof i));return i}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bs=!1;if(Ci)try{var pa={};Object.defineProperty(pa,"passive",{get:function(){Bs=!0}}),window.addEventListener("test",pa,pa),window.removeEventListener("test",pa,pa)}catch{Bs=!1}var Vi=null,Ls=null,pl=null;function tu(){if(pl)return pl;var e,t=Ls,i=t.length,n,s="value"in Vi?Vi.value:Vi.textContent,r=s.length;for(e=0;e<i&&t[e]===s[e];e++);var g=i-e;for(n=1;n<=g&&t[i-n]===s[r-n];n++);return pl=s.slice(e,1<n?1-n:void 0)}function vl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function yl(){return!0}function iu(){return!1}function Gt(e){function t(i,n,s,r,g){this._reactName=i,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=g,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(i=e[w],this[w]=i?i(r):r[w]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?yl:iu,this.isPropagationStopped=iu,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=yl)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=yl)},persist:function(){},isPersistent:yl}),t}var vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tl=Gt(vn),va=v({},vn,{view:0,detail:0}),td=Gt(va),Ps,Us,ya,Sl=v({},va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ya&&(ya&&e.type==="mousemove"?(Ps=e.screenX-ya.screenX,Us=e.screenY-ya.screenY):Us=Ps=0,ya=e),Ps)},movementY:function(e){return"movementY"in e?e.movementY:Us}}),nu=Gt(Sl),id=v({},Sl,{dataTransfer:0}),nd=Gt(id),ad=v({},va,{relatedTarget:0}),js=Gt(ad),ld=v({},vn,{animationName:0,elapsedTime:0,pseudoElement:0}),sd=Gt(ld),rd=v({},vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),od=Gt(rd),ud=v({},vn,{data:0}),au=Gt(ud),cd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dd(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fd[e])?!!t[e]:!1}function Fs(){return dd}var gd=v({},va,{key:function(e){if(e.key){var t=cd[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fs,charCode:function(e){return e.type==="keypress"?vl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),md=Gt(gd),pd=v({},Sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lu=Gt(pd),vd=v({},va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fs}),yd=Gt(vd),Td=v({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sd=Gt(Td),wd=v({},Sl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xd=Gt(wd),Ed=v({},vn,{newState:0,oldState:0}),bd=Gt(Ed),_d=[9,13,27,32],Gs=Ci&&"CompositionEvent"in window,Ta=null;Ci&&"documentMode"in document&&(Ta=document.documentMode);var Cd=Ci&&"TextEvent"in window&&!Ta,su=Ci&&(!Gs||Ta&&8<Ta&&11>=Ta),ru=" ",ou=!1;function uu(e,t){switch(e){case"keyup":return _d.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Un=!1;function Rd(e,t){switch(e){case"compositionend":return cu(t);case"keypress":return t.which!==32?null:(ou=!0,ru);case"textInput":return e=t.data,e===ru&&ou?null:e;default:return null}}function Dd(e,t){if(Un)return e==="compositionend"||!Gs&&uu(e,t)?(e=tu(),pl=Ls=Vi=null,Un=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return su&&t.locale!=="ko"?null:t.data;default:return null}}var zd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zd[e.type]:t==="textarea"}function fu(e,t,i,n){Ln?Pn?Pn.push(n):Pn=[n]:Ln=n,t=us(t,"onChange"),0<t.length&&(i=new Tl("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Sa=null,wa=null;function Od(e){Ih(e,0)}function wl(e){var t=lt(e);if(Yo(t))return e}function du(e,t){if(e==="change")return t}var gu=!1;if(Ci){var qs;if(Ci){var Vs="oninput"in document;if(!Vs){var mu=document.createElement("div");mu.setAttribute("oninput","return;"),Vs=typeof mu.oninput=="function"}qs=Vs}else qs=!1;gu=qs&&(!document.documentMode||9<document.documentMode)}function pu(){Sa&&(Sa.detachEvent("onpropertychange",vu),wa=Sa=null)}function vu(e){if(e.propertyName==="value"&&wl(wa)){var t=[];fu(t,wa,e,Hs(e)),eu(Od,t)}}function Ad(e,t,i){e==="focusin"?(pu(),Sa=t,wa=i,Sa.attachEvent("onpropertychange",vu)):e==="focusout"&&pu()}function Md(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wl(wa)}function Hd(e,t){if(e==="click")return wl(t)}function Nd(e,t){if(e==="input"||e==="change")return wl(t)}function Bd(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var It=typeof Object.is=="function"?Object.is:Bd;function xa(e,t){if(It(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var s=i[n];if(!U.call(t,s)||!It(e[s],t[s]))return!1}return!0}function yu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tu(e,t){var i=yu(e);e=0;for(var n;i;){if(i.nodeType===3){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=yu(i)}}function Su(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Su(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=gl(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=gl(e.document)}return t}function Zs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Ld=Ci&&"documentMode"in document&&11>=document.documentMode,jn=null,ks=null,Ea=null,Xs=!1;function xu(e,t,i){var n=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Xs||jn==null||jn!==gl(n)||(n=jn,"selectionStart"in n&&Zs(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ea&&xa(Ea,n)||(Ea=n,n=us(ks,"onSelect"),0<n.length&&(t=new Tl("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=jn)))}function yn(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Fn={animationend:yn("Animation","AnimationEnd"),animationiteration:yn("Animation","AnimationIteration"),animationstart:yn("Animation","AnimationStart"),transitionrun:yn("Transition","TransitionRun"),transitionstart:yn("Transition","TransitionStart"),transitioncancel:yn("Transition","TransitionCancel"),transitionend:yn("Transition","TransitionEnd")},Ys={},Eu={};Ci&&(Eu=document.createElement("div").style,"AnimationEvent"in window||(delete Fn.animationend.animation,delete Fn.animationiteration.animation,delete Fn.animationstart.animation),"TransitionEvent"in window||delete Fn.transitionend.transition);function Tn(e){if(Ys[e])return Ys[e];if(!Fn[e])return e;var t=Fn[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Eu)return Ys[e]=t[i];return e}var bu=Tn("animationend"),_u=Tn("animationiteration"),Cu=Tn("animationstart"),Pd=Tn("transitionrun"),Ud=Tn("transitionstart"),jd=Tn("transitioncancel"),Ru=Tn("transitionend"),Du=new Map,Is="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Is.push("scrollEnd");function di(e,t){Du.set(e,t),Ei(t,[e])}var xl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},li=[],Gn=0,Qs=0;function El(){for(var e=Gn,t=Qs=Gn=0;t<e;){var i=li[t];li[t++]=null;var n=li[t];li[t++]=null;var s=li[t];li[t++]=null;var r=li[t];if(li[t++]=null,n!==null&&s!==null){var g=n.pending;g===null?s.next=s:(s.next=g.next,g.next=s),n.pending=s}r!==0&&zu(i,s,r)}}function bl(e,t,i,n){li[Gn++]=e,li[Gn++]=t,li[Gn++]=i,li[Gn++]=n,Qs|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Ws(e,t,i,n){return bl(e,t,i,n),_l(e)}function Sn(e,t){return bl(e,null,null,t),_l(e)}function zu(e,t,i){e.lanes|=i;var n=e.alternate;n!==null&&(n.lanes|=i);for(var s=!1,r=e.return;r!==null;)r.childLanes|=i,n=r.alternate,n!==null&&(n.childLanes|=i),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(s=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,s&&t!==null&&(s=31-De(i),e=r.hiddenUpdates,n=e[s],n===null?e[s]=[t]:n.push(t),t.lane=i|536870912),r):null}function _l(e){if(50<ka)throw ka=0,lo=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var qn={};function Fd(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,t,i,n){return new Fd(e,t,i,n)}function Ks(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ri(e,t){var i=e.alternate;return i===null?(i=Qt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Ou(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Cl(e,t,i,n,s,r){var g=0;if(n=e,typeof e=="function")Ks(e)&&(g=1);else if(typeof e=="string")g=kg(e,i,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ze:return e=Qt(31,i,t,s),e.elementType=ze,e.lanes=r,e;case O:return wn(i.children,s,r,t);case R:g=8,s|=24;break;case M:return e=Qt(12,i,t,s|2),e.elementType=M,e.lanes=r,e;case Ce:return e=Qt(13,i,t,s),e.elementType=Ce,e.lanes=r,e;case Te:return e=Qt(19,i,t,s),e.elementType=Te,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case K:g=10;break e;case X:g=9;break e;case ce:g=11;break e;case V:g=14;break e;case we:g=16,n=null;break e}g=29,i=Error(l(130,e===null?"null":typeof e,"")),n=null}return t=Qt(g,i,t,s),t.elementType=e,t.type=n,t.lanes=r,t}function wn(e,t,i,n){return e=Qt(7,e,n,t),e.lanes=i,e}function Js(e,t,i){return e=Qt(6,e,null,t),e.lanes=i,e}function Au(e){var t=Qt(18,null,null,0);return t.stateNode=e,t}function $s(e,t,i){return t=Qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Mu=new WeakMap;function si(e,t){if(typeof e=="object"&&e!==null){var i=Mu.get(e);return i!==void 0?i:(t={value:e,source:t,stack:E(t)},Mu.set(e,t),t)}return{value:e,source:t,stack:E(t)}}var Vn=[],Zn=0,Rl=null,ba=0,ri=[],oi=0,Zi=null,yi=1,Ti="";function Di(e,t){Vn[Zn++]=ba,Vn[Zn++]=Rl,Rl=e,ba=t}function Hu(e,t,i){ri[oi++]=yi,ri[oi++]=Ti,ri[oi++]=Zi,Zi=e;var n=yi;e=Ti;var s=32-De(n)-1;n&=~(1<<s),i+=1;var r=32-De(t)+s;if(30<r){var g=s-s%5;r=(n&(1<<g)-1).toString(32),n>>=g,s-=g,yi=1<<32-De(t)+s|i<<s|n,Ti=r+e}else yi=1<<r|i<<s|n,Ti=e}function er(e){e.return!==null&&(Di(e,1),Hu(e,1,0))}function tr(e){for(;e===Rl;)Rl=Vn[--Zn],Vn[Zn]=null,ba=Vn[--Zn],Vn[Zn]=null;for(;e===Zi;)Zi=ri[--oi],ri[oi]=null,Ti=ri[--oi],ri[oi]=null,yi=ri[--oi],ri[oi]=null}function Nu(e,t){ri[oi++]=yi,ri[oi++]=Ti,ri[oi++]=Zi,yi=t.id,Ti=t.overflow,Zi=e}var Mt=null,ot=null,Ze=!1,ki=null,ui=!1,ir=Error(l(519));function Xi(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _a(si(t,e)),ir}function Bu(e){var t=e.stateNode,i=e.type,n=e.memoizedProps;switch(t[Ct]=e,t[At]=n,i){case"dialog":je("cancel",t),je("close",t);break;case"iframe":case"object":case"embed":je("load",t);break;case"video":case"audio":for(i=0;i<Ya.length;i++)je(Ya[i],t);break;case"source":je("error",t);break;case"img":case"image":case"link":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"input":je("invalid",t),Io(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":je("invalid",t);break;case"textarea":je("invalid",t),Wo(t,n.value,n.defaultValue,n.children)}i=n.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||n.suppressHydrationWarning===!0||Jh(t.textContent,i)?(n.popover!=null&&(je("beforetoggle",t),je("toggle",t)),n.onScroll!=null&&je("scroll",t),n.onScrollEnd!=null&&je("scrollend",t),n.onClick!=null&&(t.onclick=_i),t=!0):t=!1,t||Xi(e,!0)}function Lu(e){for(Mt=e.return;Mt;)switch(Mt.tag){case 5:case 31:case 13:ui=!1;return;case 27:case 3:ui=!0;return;default:Mt=Mt.return}}function kn(e){if(e!==Mt)return!1;if(!Ze)return Lu(e),Ze=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||wo(e.type,e.memoizedProps)),i=!i),i&&ot&&Xi(e),Lu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ot=of(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ot=of(e)}else t===27?(t=ot,rn(e.type)?(e=Co,Co=null,ot=e):ot=t):ot=Mt?hi(e.stateNode.nextSibling):null;return!0}function xn(){ot=Mt=null,Ze=!1}function nr(){var e=ki;return e!==null&&(kt===null?kt=e:kt.push.apply(kt,e),ki=null),e}function _a(e){ki===null?ki=[e]:ki.push(e)}var ar=z(null),En=null,zi=null;function Yi(e,t,i){Q(ar,t._currentValue),t._currentValue=i}function Oi(e){e._currentValue=ar.current,I(ar)}function lr(e,t,i){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function sr(e,t,i,n){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var r=s.dependencies;if(r!==null){var g=s.child;r=r.firstContext;e:for(;r!==null;){var w=r;r=s;for(var D=0;D<t.length;D++)if(w.context===t[D]){r.lanes|=i,w=r.alternate,w!==null&&(w.lanes|=i),lr(r.return,i,e),n||(g=null);break e}r=w.next}}else if(s.tag===18){if(g=s.return,g===null)throw Error(l(341));g.lanes|=i,r=g.alternate,r!==null&&(r.lanes|=i),lr(g,i,e),g=null}else g=s.child;if(g!==null)g.return=s;else for(g=s;g!==null;){if(g===e){g=null;break}if(s=g.sibling,s!==null){s.return=g.return,g=s;break}g=g.return}s=g}}function Xn(e,t,i,n){e=null;for(var s=t,r=!1;s!==null;){if(!r){if((s.flags&524288)!==0)r=!0;else if((s.flags&262144)!==0)break}if(s.tag===10){var g=s.alternate;if(g===null)throw Error(l(387));if(g=g.memoizedProps,g!==null){var w=s.type;It(s.pendingProps.value,g.value)||(e!==null?e.push(w):e=[w])}}else if(s===Be.current){if(g=s.alternate,g===null)throw Error(l(387));g.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(Ja):e=[Ja])}s=s.return}e!==null&&sr(t,e,i,n),t.flags|=262144}function Dl(e){for(e=e.firstContext;e!==null;){if(!It(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function bn(e){En=e,zi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ht(e){return Pu(En,e)}function zl(e,t){return En===null&&bn(e),Pu(e,t)}function Pu(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},zi===null){if(e===null)throw Error(l(308));zi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else zi=zi.next=t;return i}var Gd=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},qd=ne.unstable_scheduleCallback,Vd=ne.unstable_NormalPriority,wt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rr(){return{controller:new Gd,data:new Map,refCount:0}}function Ca(e){e.refCount--,e.refCount===0&&qd(Vd,function(){e.controller.abort()})}var Ra=null,or=0,Yn=0,In=null;function Zd(e,t){if(Ra===null){var i=Ra=[];or=0,Yn=ho(),In={status:"pending",value:void 0,then:function(n){i.push(n)}}}return or++,t.then(Uu,Uu),t}function Uu(){if(--or===0&&Ra!==null){In!==null&&(In.status="fulfilled");var e=Ra;Ra=null,Yn=0,In=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function kd(e,t){var i=[],n={status:"pending",value:null,reason:null,then:function(s){i.push(s)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var s=0;s<i.length;s++)(0,i[s])(t)},function(s){for(n.status="rejected",n.reason=s,s=0;s<i.length;s++)(0,i[s])(void 0)}),n}var ju=G.S;G.S=function(e,t){xh=Re(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Zd(e,t),ju!==null&&ju(e,t)};var _n=z(null);function ur(){var e=_n.current;return e!==null?e:st.pooledCache}function Ol(e,t){t===null?Q(_n,_n.current):Q(_n,t.pool)}function Fu(){var e=ur();return e===null?null:{parent:wt._currentValue,pool:e}}var Qn=Error(l(460)),cr=Error(l(474)),Al=Error(l(542)),Ml={then:function(){}};function Gu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function qu(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(_i,_i),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Zu(e),e;default:if(typeof t.status=="string")t.then(_i,_i);else{if(e=st,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=n}},function(n){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Zu(e),e}throw Rn=t,Qn}}function Cn(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Rn=i,Qn):i}}var Rn=null;function Vu(){if(Rn===null)throw Error(l(459));var e=Rn;return Rn=null,e}function Zu(e){if(e===Qn||e===Al)throw Error(l(483))}var Wn=null,Da=0;function Hl(e){var t=Da;return Da+=1,Wn===null&&(Wn=[]),qu(Wn,e,t)}function za(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Nl(e,t){throw t.$$typeof===S?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ku(e){function t(N,A){if(e){var B=N.deletions;B===null?(N.deletions=[A],N.flags|=16):B.push(A)}}function i(N,A){if(!e)return null;for(;A!==null;)t(N,A),A=A.sibling;return null}function n(N){for(var A=new Map;N!==null;)N.key!==null?A.set(N.key,N):A.set(N.index,N),N=N.sibling;return A}function s(N,A){return N=Ri(N,A),N.index=0,N.sibling=null,N}function r(N,A,B){return N.index=B,e?(B=N.alternate,B!==null?(B=B.index,B<A?(N.flags|=67108866,A):B):(N.flags|=67108866,A)):(N.flags|=1048576,A)}function g(N){return e&&N.alternate===null&&(N.flags|=67108866),N}function w(N,A,B,Y){return A===null||A.tag!==6?(A=Js(B,N.mode,Y),A.return=N,A):(A=s(A,B),A.return=N,A)}function D(N,A,B,Y){var Se=B.type;return Se===O?Z(N,A,B.props.children,Y,B.key):A!==null&&(A.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===we&&Cn(Se)===A.type)?(A=s(A,B.props),za(A,B),A.return=N,A):(A=Cl(B.type,B.key,B.props,null,N.mode,Y),za(A,B),A.return=N,A)}function L(N,A,B,Y){return A===null||A.tag!==4||A.stateNode.containerInfo!==B.containerInfo||A.stateNode.implementation!==B.implementation?(A=$s(B,N.mode,Y),A.return=N,A):(A=s(A,B.children||[]),A.return=N,A)}function Z(N,A,B,Y,Se){return A===null||A.tag!==7?(A=wn(B,N.mode,Y,Se),A.return=N,A):(A=s(A,B),A.return=N,A)}function W(N,A,B){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=Js(""+A,N.mode,B),A.return=N,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case C:return B=Cl(A.type,A.key,A.props,null,N.mode,B),za(B,A),B.return=N,B;case _:return A=$s(A,N.mode,B),A.return=N,A;case we:return A=Cn(A),W(N,A,B)}if(_t(A)||Fe(A))return A=wn(A,N.mode,B,null),A.return=N,A;if(typeof A.then=="function")return W(N,Hl(A),B);if(A.$$typeof===K)return W(N,zl(N,A),B);Nl(N,A)}return null}function j(N,A,B,Y){var Se=A!==null?A.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Se!==null?null:w(N,A,""+B,Y);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case C:return B.key===Se?D(N,A,B,Y):null;case _:return B.key===Se?L(N,A,B,Y):null;case we:return B=Cn(B),j(N,A,B,Y)}if(_t(B)||Fe(B))return Se!==null?null:Z(N,A,B,Y,null);if(typeof B.then=="function")return j(N,A,Hl(B),Y);if(B.$$typeof===K)return j(N,A,zl(N,B),Y);Nl(N,B)}return null}function F(N,A,B,Y,Se){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return N=N.get(B)||null,w(A,N,""+Y,Se);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case C:return N=N.get(Y.key===null?B:Y.key)||null,D(A,N,Y,Se);case _:return N=N.get(Y.key===null?B:Y.key)||null,L(A,N,Y,Se);case we:return Y=Cn(Y),F(N,A,B,Y,Se)}if(_t(Y)||Fe(Y))return N=N.get(B)||null,Z(A,N,Y,Se,null);if(typeof Y.then=="function")return F(N,A,B,Hl(Y),Se);if(Y.$$typeof===K)return F(N,A,B,zl(A,Y),Se);Nl(A,Y)}return null}function fe(N,A,B,Y){for(var Se=null,Xe=null,ge=A,He=A=0,Ve=null;ge!==null&&He<B.length;He++){ge.index>He?(Ve=ge,ge=null):Ve=ge.sibling;var Ye=j(N,ge,B[He],Y);if(Ye===null){ge===null&&(ge=Ve);break}e&&ge&&Ye.alternate===null&&t(N,ge),A=r(Ye,A,He),Xe===null?Se=Ye:Xe.sibling=Ye,Xe=Ye,ge=Ve}if(He===B.length)return i(N,ge),Ze&&Di(N,He),Se;if(ge===null){for(;He<B.length;He++)ge=W(N,B[He],Y),ge!==null&&(A=r(ge,A,He),Xe===null?Se=ge:Xe.sibling=ge,Xe=ge);return Ze&&Di(N,He),Se}for(ge=n(ge);He<B.length;He++)Ve=F(ge,N,He,B[He],Y),Ve!==null&&(e&&Ve.alternate!==null&&ge.delete(Ve.key===null?He:Ve.key),A=r(Ve,A,He),Xe===null?Se=Ve:Xe.sibling=Ve,Xe=Ve);return e&&ge.forEach(function(fn){return t(N,fn)}),Ze&&Di(N,He),Se}function Ee(N,A,B,Y){if(B==null)throw Error(l(151));for(var Se=null,Xe=null,ge=A,He=A=0,Ve=null,Ye=B.next();ge!==null&&!Ye.done;He++,Ye=B.next()){ge.index>He?(Ve=ge,ge=null):Ve=ge.sibling;var fn=j(N,ge,Ye.value,Y);if(fn===null){ge===null&&(ge=Ve);break}e&&ge&&fn.alternate===null&&t(N,ge),A=r(fn,A,He),Xe===null?Se=fn:Xe.sibling=fn,Xe=fn,ge=Ve}if(Ye.done)return i(N,ge),Ze&&Di(N,He),Se;if(ge===null){for(;!Ye.done;He++,Ye=B.next())Ye=W(N,Ye.value,Y),Ye!==null&&(A=r(Ye,A,He),Xe===null?Se=Ye:Xe.sibling=Ye,Xe=Ye);return Ze&&Di(N,He),Se}for(ge=n(ge);!Ye.done;He++,Ye=B.next())Ye=F(ge,N,He,Ye.value,Y),Ye!==null&&(e&&Ye.alternate!==null&&ge.delete(Ye.key===null?He:Ye.key),A=r(Ye,A,He),Xe===null?Se=Ye:Xe.sibling=Ye,Xe=Ye);return e&&ge.forEach(function(im){return t(N,im)}),Ze&&Di(N,He),Se}function nt(N,A,B,Y){if(typeof B=="object"&&B!==null&&B.type===O&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case C:e:{for(var Se=B.key;A!==null;){if(A.key===Se){if(Se=B.type,Se===O){if(A.tag===7){i(N,A.sibling),Y=s(A,B.props.children),Y.return=N,N=Y;break e}}else if(A.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===we&&Cn(Se)===A.type){i(N,A.sibling),Y=s(A,B.props),za(Y,B),Y.return=N,N=Y;break e}i(N,A);break}else t(N,A);A=A.sibling}B.type===O?(Y=wn(B.props.children,N.mode,Y,B.key),Y.return=N,N=Y):(Y=Cl(B.type,B.key,B.props,null,N.mode,Y),za(Y,B),Y.return=N,N=Y)}return g(N);case _:e:{for(Se=B.key;A!==null;){if(A.key===Se)if(A.tag===4&&A.stateNode.containerInfo===B.containerInfo&&A.stateNode.implementation===B.implementation){i(N,A.sibling),Y=s(A,B.children||[]),Y.return=N,N=Y;break e}else{i(N,A);break}else t(N,A);A=A.sibling}Y=$s(B,N.mode,Y),Y.return=N,N=Y}return g(N);case we:return B=Cn(B),nt(N,A,B,Y)}if(_t(B))return fe(N,A,B,Y);if(Fe(B)){if(Se=Fe(B),typeof Se!="function")throw Error(l(150));return B=Se.call(B),Ee(N,A,B,Y)}if(typeof B.then=="function")return nt(N,A,Hl(B),Y);if(B.$$typeof===K)return nt(N,A,zl(N,B),Y);Nl(N,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,A!==null&&A.tag===6?(i(N,A.sibling),Y=s(A,B),Y.return=N,N=Y):(i(N,A),Y=Js(B,N.mode,Y),Y.return=N,N=Y),g(N)):i(N,A)}return function(N,A,B,Y){try{Da=0;var Se=nt(N,A,B,Y);return Wn=null,Se}catch(ge){if(ge===Qn||ge===Al)throw ge;var Xe=Qt(29,ge,null,N.mode);return Xe.lanes=Y,Xe.return=N,Xe}finally{}}}var Dn=ku(!0),Xu=ku(!1),Ii=!1;function hr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Qi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Wi(e,t,i){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Qe&2)!==0){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=_l(e),zu(e,null,i),t}return bl(e,n,t,i),_l(e)}function Oa(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,rl(e,i)}}function dr(e,t){var i=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,i===n)){var s=null,r=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};r===null?s=r=g:r=r.next=g,i=i.next}while(i!==null);r===null?s=r=t:r=r.next=t}else s=r=t;i={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:n.shared,callbacks:n.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var gr=!1;function Aa(){if(gr){var e=In;if(e!==null)throw e}}function Ma(e,t,i,n){gr=!1;var s=e.updateQueue;Ii=!1;var r=s.firstBaseUpdate,g=s.lastBaseUpdate,w=s.shared.pending;if(w!==null){s.shared.pending=null;var D=w,L=D.next;D.next=null,g===null?r=L:g.next=L,g=D;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==g&&(w===null?Z.firstBaseUpdate=L:w.next=L,Z.lastBaseUpdate=D))}if(r!==null){var W=s.baseState;g=0,Z=L=D=null,w=r;do{var j=w.lane&-536870913,F=j!==w.lane;if(F?(qe&j)===j:(n&j)===j){j!==0&&j===Yn&&(gr=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var fe=e,Ee=w;j=t;var nt=i;switch(Ee.tag){case 1:if(fe=Ee.payload,typeof fe=="function"){W=fe.call(nt,W,j);break e}W=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=Ee.payload,j=typeof fe=="function"?fe.call(nt,W,j):fe,j==null)break e;W=v({},W,j);break e;case 2:Ii=!0}}j=w.callback,j!==null&&(e.flags|=64,F&&(e.flags|=8192),F=s.callbacks,F===null?s.callbacks=[j]:F.push(j))}else F={lane:j,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?(L=Z=F,D=W):Z=Z.next=F,g|=j;if(w=w.next,w===null){if(w=s.shared.pending,w===null)break;F=w,w=F.next,F.next=null,s.lastBaseUpdate=F,s.shared.pending=null}}while(!0);Z===null&&(D=W),s.baseState=D,s.firstBaseUpdate=L,s.lastBaseUpdate=Z,r===null&&(s.shared.lanes=0),tn|=g,e.lanes=g,e.memoizedState=W}}function Yu(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function Iu(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Yu(i[e],t)}var Kn=z(null),Bl=z(0);function Qu(e,t){e=ji,Q(Bl,e),Q(Kn,t),ji=e|t.baseLanes}function mr(){Q(Bl,ji),Q(Kn,Kn.current)}function pr(){ji=Bl.current,I(Kn),I(Bl)}var Wt=z(null),ci=null;function Ki(e){var t=e.alternate;Q(vt,vt.current&1),Q(Wt,e),ci===null&&(t===null||Kn.current!==null||t.memoizedState!==null)&&(ci=e)}function vr(e){Q(vt,vt.current),Q(Wt,e),ci===null&&(ci=e)}function Wu(e){e.tag===22?(Q(vt,vt.current),Q(Wt,e),ci===null&&(ci=e)):Ji()}function Ji(){Q(vt,vt.current),Q(Wt,Wt.current)}function Kt(e){I(Wt),ci===e&&(ci=null),I(vt)}var vt=z(0);function Ll(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||bo(i)||_o(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ai=0,Ae=null,tt=null,xt=null,Pl=!1,Jn=!1,zn=!1,Ul=0,Ha=0,$n=null,Xd=0;function mt(){throw Error(l(321))}function yr(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!It(e[i],t[i]))return!1;return!0}function Tr(e,t,i,n,s,r){return Ai=r,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,G.H=e===null||e.memoizedState===null?Hc:Nr,zn=!1,r=i(n,s),zn=!1,Jn&&(r=Ju(t,i,n,s)),Ku(e),r}function Ku(e){G.H=La;var t=tt!==null&&tt.next!==null;if(Ai=0,xt=tt=Ae=null,Pl=!1,Ha=0,$n=null,t)throw Error(l(300));e===null||Et||(e=e.dependencies,e!==null&&Dl(e)&&(Et=!0))}function Ju(e,t,i,n){Ae=e;var s=0;do{if(Jn&&($n=null),Ha=0,Jn=!1,25<=s)throw Error(l(301));if(s+=1,xt=tt=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}G.H=Nc,r=t(i,n)}while(Jn);return r}function Yd(){var e=G.H,t=e.useState()[0];return t=typeof t.then=="function"?Na(t):t,e=e.useState()[0],(tt!==null?tt.memoizedState:null)!==e&&(Ae.flags|=1024),t}function Sr(){var e=Ul!==0;return Ul=0,e}function wr(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function xr(e){if(Pl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Pl=!1}Ai=0,xt=tt=Ae=null,Jn=!1,Ha=Ul=0,$n=null}function jt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ae.memoizedState=xt=e:xt=xt.next=e,xt}function yt(){if(tt===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=tt.next;var t=xt===null?Ae.memoizedState:xt.next;if(t!==null)xt=t,tt=e;else{if(e===null)throw Ae.alternate===null?Error(l(467)):Error(l(310));tt=e,e={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},xt===null?Ae.memoizedState=xt=e:xt=xt.next=e}return xt}function jl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Na(e){var t=Ha;return Ha+=1,$n===null&&($n=[]),e=qu($n,e,t),t=Ae,(xt===null?t.memoizedState:xt.next)===null&&(t=t.alternate,G.H=t===null||t.memoizedState===null?Hc:Nr),e}function Fl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Na(e);if(e.$$typeof===K)return Ht(e)}throw Error(l(438,String(e)))}function Er(e){var t=null,i=Ae.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var n=Ae.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=jl(),Ae.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),n=0;n<e;n++)i[n]=ct;return t.index++,i}function Mi(e,t){return typeof t=="function"?t(e):t}function Gl(e){var t=yt();return br(t,tt,e)}function br(e,t,i){var n=e.queue;if(n===null)throw Error(l(311));n.lastRenderedReducer=i;var s=e.baseQueue,r=n.pending;if(r!==null){if(s!==null){var g=s.next;s.next=r.next,r.next=g}t.baseQueue=s=r,n.pending=null}if(r=e.baseState,s===null)e.memoizedState=r;else{t=s.next;var w=g=null,D=null,L=t,Z=!1;do{var W=L.lane&-536870913;if(W!==L.lane?(qe&W)===W:(Ai&W)===W){var j=L.revertLane;if(j===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),W===Yn&&(Z=!0);else if((Ai&j)===j){L=L.next,j===Yn&&(Z=!0);continue}else W={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},D===null?(w=D=W,g=r):D=D.next=W,Ae.lanes|=j,tn|=j;W=L.action,zn&&i(r,W),r=L.hasEagerState?L.eagerState:i(r,W)}else j={lane:W,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},D===null?(w=D=j,g=r):D=D.next=j,Ae.lanes|=W,tn|=W;L=L.next}while(L!==null&&L!==t);if(D===null?g=r:D.next=w,!It(r,e.memoizedState)&&(Et=!0,Z&&(i=In,i!==null)))throw i;e.memoizedState=r,e.baseState=g,e.baseQueue=D,n.lastRenderedState=r}return s===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function _r(e){var t=yt(),i=t.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=e;var n=i.dispatch,s=i.pending,r=t.memoizedState;if(s!==null){i.pending=null;var g=s=s.next;do r=e(r,g.action),g=g.next;while(g!==s);It(r,t.memoizedState)||(Et=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),i.lastRenderedState=r}return[r,n]}function $u(e,t,i){var n=Ae,s=yt(),r=Ze;if(r){if(i===void 0)throw Error(l(407));i=i()}else i=t();var g=!It((tt||s).memoizedState,i);if(g&&(s.memoizedState=i,Et=!0),s=s.queue,Dr(ic.bind(null,n,s,e),[e]),s.getSnapshot!==t||g||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,ea(9,{destroy:void 0},tc.bind(null,n,s,i,t),null),st===null)throw Error(l(349));r||(Ai&127)!==0||ec(n,t,i)}return i}function ec(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ae.updateQueue,t===null?(t=jl(),Ae.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function tc(e,t,i,n){t.value=i,t.getSnapshot=n,nc(t)&&ac(e)}function ic(e,t,i){return i(function(){nc(t)&&ac(e)})}function nc(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!It(e,i)}catch{return!0}}function ac(e){var t=Sn(e,2);t!==null&&Xt(t,e,2)}function Cr(e){var t=jt();if(typeof e=="function"){var i=e;if(e=i(),zn){he(!0);try{i()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:e},t}function lc(e,t,i,n){return e.baseState=i,br(e,tt,typeof n=="function"?n:Mi)}function Id(e,t,i,n,s){if(Zl(e))throw Error(l(485));if(e=t.action,e!==null){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){r.listeners.push(g)}};G.T!==null?i(!0):r.isTransition=!1,n(r),i=t.pending,i===null?(r.next=t.pending=r,sc(t,r)):(r.next=i.next,t.pending=i.next=r)}}function sc(e,t){var i=t.action,n=t.payload,s=e.state;if(t.isTransition){var r=G.T,g={};G.T=g;try{var w=i(s,n),D=G.S;D!==null&&D(g,w),rc(e,t,w)}catch(L){Rr(e,t,L)}finally{r!==null&&g.types!==null&&(r.types=g.types),G.T=r}}else try{r=i(s,n),rc(e,t,r)}catch(L){Rr(e,t,L)}}function rc(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(n){oc(e,t,n)},function(n){return Rr(e,t,n)}):oc(e,t,i)}function oc(e,t,i){t.status="fulfilled",t.value=i,uc(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,sc(e,i)))}function Rr(e,t,i){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=i,uc(t),t=t.next;while(t!==n)}e.action=null}function uc(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function cc(e,t){return t}function hc(e,t){if(Ze){var i=st.formState;if(i!==null){e:{var n=Ae;if(Ze){if(ot){t:{for(var s=ot,r=ui;s.nodeType!==8;){if(!r){s=null;break t}if(s=hi(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){ot=hi(s.nextSibling),n=s.data==="F!";break e}}Xi(n)}n=!1}n&&(t=i[0])}}return i=jt(),i.memoizedState=i.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cc,lastRenderedState:t},i.queue=n,i=Oc.bind(null,Ae,n),n.dispatch=i,n=Cr(!1),r=Hr.bind(null,Ae,!1,n.queue),n=jt(),s={state:t,dispatch:null,action:e,pending:null},n.queue=s,i=Id.bind(null,Ae,s,r,i),s.dispatch=i,n.memoizedState=e,[t,i,!1]}function fc(e){var t=yt();return dc(t,tt,e)}function dc(e,t,i){if(t=br(e,t,cc)[0],e=Gl(Mi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=Na(t)}catch(g){throw g===Qn?Al:g}else n=t;t=yt();var s=t.queue,r=s.dispatch;return i!==t.memoizedState&&(Ae.flags|=2048,ea(9,{destroy:void 0},Qd.bind(null,s,i),null)),[n,r,e]}function Qd(e,t){e.action=t}function gc(e){var t=yt(),i=tt;if(i!==null)return dc(t,i,e);yt(),t=t.memoizedState,i=yt();var n=i.queue.dispatch;return i.memoizedState=e,[t,n,!1]}function ea(e,t,i,n){return e={tag:e,create:i,deps:n,inst:t,next:null},t=Ae.updateQueue,t===null&&(t=jl(),Ae.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function mc(){return yt().memoizedState}function ql(e,t,i,n){var s=jt();Ae.flags|=e,s.memoizedState=ea(1|t,{destroy:void 0},i,n===void 0?null:n)}function Vl(e,t,i,n){var s=yt();n=n===void 0?null:n;var r=s.memoizedState.inst;tt!==null&&n!==null&&yr(n,tt.memoizedState.deps)?s.memoizedState=ea(t,r,i,n):(Ae.flags|=e,s.memoizedState=ea(1|t,r,i,n))}function pc(e,t){ql(8390656,8,e,t)}function Dr(e,t){Vl(2048,8,e,t)}function Wd(e){Ae.flags|=4;var t=Ae.updateQueue;if(t===null)t=jl(),Ae.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function vc(e){var t=yt().memoizedState;return Wd({ref:t,nextImpl:e}),function(){if((Qe&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function yc(e,t){return Vl(4,2,e,t)}function Tc(e,t){return Vl(4,4,e,t)}function Sc(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wc(e,t,i){i=i!=null?i.concat([e]):null,Vl(4,4,Sc.bind(null,t,e),i)}function zr(){}function xc(e,t){var i=yt();t=t===void 0?null:t;var n=i.memoizedState;return t!==null&&yr(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function Ec(e,t){var i=yt();t=t===void 0?null:t;var n=i.memoizedState;if(t!==null&&yr(t,n[1]))return n[0];if(n=e(),zn){he(!0);try{e()}finally{he(!1)}}return i.memoizedState=[n,t],n}function Or(e,t,i){return i===void 0||(Ai&1073741824)!==0&&(qe&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=bh(),Ae.lanes|=e,tn|=e,i)}function bc(e,t,i,n){return It(i,t)?i:Kn.current!==null?(e=Or(e,i,n),It(e,t)||(Et=!0),e):(Ai&42)===0||(Ai&1073741824)!==0&&(qe&261930)===0?(Et=!0,e.memoizedState=i):(e=bh(),Ae.lanes|=e,tn|=e,t)}function _c(e,t,i,n,s){var r=ae.p;ae.p=r!==0&&8>r?r:8;var g=G.T,w={};G.T=w,Hr(e,!1,t,i);try{var D=s(),L=G.S;if(L!==null&&L(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=kd(D,n);Ba(e,t,Z,ei(e))}else Ba(e,t,n,ei(e))}catch(W){Ba(e,t,{then:function(){},status:"rejected",reason:W},ei())}finally{ae.p=r,g!==null&&w.types!==null&&(g.types=w.types),G.T=g}}function Kd(){}function Ar(e,t,i,n){if(e.tag!==5)throw Error(l(476));var s=Cc(e).queue;_c(e,s,t,me,i===null?Kd:function(){return Rc(e),i(n)})}function Cc(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:me},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Rc(e){var t=Cc(e);t.next===null&&(t=e.alternate.memoizedState),Ba(e,t.next.queue,{},ei())}function Mr(){return Ht(Ja)}function Dc(){return yt().memoizedState}function zc(){return yt().memoizedState}function Jd(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=ei();e=Qi(i);var n=Wi(t,e,i);n!==null&&(Xt(n,t,i),Oa(n,t,i)),t={cache:rr()},e.payload=t;return}t=t.return}}function $d(e,t,i){var n=ei();i={lane:n,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Zl(e)?Ac(t,i):(i=Ws(e,t,i,n),i!==null&&(Xt(i,e,n),Mc(i,t,n)))}function Oc(e,t,i){var n=ei();Ba(e,t,i,n)}function Ba(e,t,i,n){var s={lane:n,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Zl(e))Ac(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var g=t.lastRenderedState,w=r(g,i);if(s.hasEagerState=!0,s.eagerState=w,It(w,g))return bl(e,t,s,0),st===null&&El(),!1}catch{}finally{}if(i=Ws(e,t,s,n),i!==null)return Xt(i,e,n),Mc(i,t,n),!0}return!1}function Hr(e,t,i,n){if(n={lane:2,revertLane:ho(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Zl(e)){if(t)throw Error(l(479))}else t=Ws(e,i,n,2),t!==null&&Xt(t,e,2)}function Zl(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function Ac(e,t){Jn=Pl=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Mc(e,t,i){if((i&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,rl(e,i)}}var La={readContext:Ht,use:Fl,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};La.useEffectEvent=mt;var Hc={readContext:Ht,use:Fl,useCallback:function(e,t){return jt().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:pc,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,ql(4194308,4,Sc.bind(null,t,e),i)},useLayoutEffect:function(e,t){return ql(4194308,4,e,t)},useInsertionEffect:function(e,t){ql(4,2,e,t)},useMemo:function(e,t){var i=jt();t=t===void 0?null:t;var n=e();if(zn){he(!0);try{e()}finally{he(!1)}}return i.memoizedState=[n,t],n},useReducer:function(e,t,i){var n=jt();if(i!==void 0){var s=i(t);if(zn){he(!0);try{i(t)}finally{he(!1)}}}else s=t;return n.memoizedState=n.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=$d.bind(null,Ae,e),[n.memoizedState,e]},useRef:function(e){var t=jt();return e={current:e},t.memoizedState=e},useState:function(e){e=Cr(e);var t=e.queue,i=Oc.bind(null,Ae,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:zr,useDeferredValue:function(e,t){var i=jt();return Or(i,e,t)},useTransition:function(){var e=Cr(!1);return e=_c.bind(null,Ae,e.queue,!0,!1),jt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var n=Ae,s=jt();if(Ze){if(i===void 0)throw Error(l(407));i=i()}else{if(i=t(),st===null)throw Error(l(349));(qe&127)!==0||ec(n,t,i)}s.memoizedState=i;var r={value:i,getSnapshot:t};return s.queue=r,pc(ic.bind(null,n,r,e),[e]),n.flags|=2048,ea(9,{destroy:void 0},tc.bind(null,n,r,i,t),null),i},useId:function(){var e=jt(),t=st.identifierPrefix;if(Ze){var i=Ti,n=yi;i=(n&~(1<<32-De(n)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Ul++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=Xd++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Mr,useFormState:hc,useActionState:hc,useOptimistic:function(e){var t=jt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Hr.bind(null,Ae,!0,i),i.dispatch=t,[e,t]},useMemoCache:Er,useCacheRefresh:function(){return jt().memoizedState=Jd.bind(null,Ae)},useEffectEvent:function(e){var t=jt(),i={impl:e};return t.memoizedState=i,function(){if((Qe&2)!==0)throw Error(l(440));return i.impl.apply(void 0,arguments)}}},Nr={readContext:Ht,use:Fl,useCallback:xc,useContext:Ht,useEffect:Dr,useImperativeHandle:wc,useInsertionEffect:yc,useLayoutEffect:Tc,useMemo:Ec,useReducer:Gl,useRef:mc,useState:function(){return Gl(Mi)},useDebugValue:zr,useDeferredValue:function(e,t){var i=yt();return bc(i,tt.memoizedState,e,t)},useTransition:function(){var e=Gl(Mi)[0],t=yt().memoizedState;return[typeof e=="boolean"?e:Na(e),t]},useSyncExternalStore:$u,useId:Dc,useHostTransitionStatus:Mr,useFormState:fc,useActionState:fc,useOptimistic:function(e,t){var i=yt();return lc(i,tt,e,t)},useMemoCache:Er,useCacheRefresh:zc};Nr.useEffectEvent=vc;var Nc={readContext:Ht,use:Fl,useCallback:xc,useContext:Ht,useEffect:Dr,useImperativeHandle:wc,useInsertionEffect:yc,useLayoutEffect:Tc,useMemo:Ec,useReducer:_r,useRef:mc,useState:function(){return _r(Mi)},useDebugValue:zr,useDeferredValue:function(e,t){var i=yt();return tt===null?Or(i,e,t):bc(i,tt.memoizedState,e,t)},useTransition:function(){var e=_r(Mi)[0],t=yt().memoizedState;return[typeof e=="boolean"?e:Na(e),t]},useSyncExternalStore:$u,useId:Dc,useHostTransitionStatus:Mr,useFormState:gc,useActionState:gc,useOptimistic:function(e,t){var i=yt();return tt!==null?lc(i,tt,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Er,useCacheRefresh:zc};Nc.useEffectEvent=vc;function Br(e,t,i,n){t=e.memoizedState,i=i(n,t),i=i==null?t:v({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Lr={enqueueSetState:function(e,t,i){e=e._reactInternals;var n=ei(),s=Qi(n);s.payload=t,i!=null&&(s.callback=i),t=Wi(e,s,n),t!==null&&(Xt(t,e,n),Oa(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=ei(),s=Qi(n);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=Wi(e,s,n),t!==null&&(Xt(t,e,n),Oa(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ei(),n=Qi(i);n.tag=2,t!=null&&(n.callback=t),t=Wi(e,n,i),t!==null&&(Xt(t,e,i),Oa(t,e,i))}};function Bc(e,t,i,n,s,r,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,r,g):t.prototype&&t.prototype.isPureReactComponent?!xa(i,n)||!xa(s,r):!0}function Lc(e,t,i,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&Lr.enqueueReplaceState(t,t.state,null)}function On(e,t){var i=t;if("ref"in t){i={};for(var n in t)n!=="ref"&&(i[n]=t[n])}if(e=e.defaultProps){i===t&&(i=v({},i));for(var s in e)i[s]===void 0&&(i[s]=e[s])}return i}function Pc(e){xl(e)}function Uc(e){console.error(e)}function jc(e){xl(e)}function kl(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Fc(e,t,i){try{var n=e.onCaughtError;n(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Pr(e,t,i){return i=Qi(i),i.tag=3,i.payload={element:null},i.callback=function(){kl(e,t)},i}function Gc(e){return e=Qi(e),e.tag=3,e}function qc(e,t,i,n){var s=i.type.getDerivedStateFromError;if(typeof s=="function"){var r=n.value;e.payload=function(){return s(r)},e.callback=function(){Fc(t,i,n)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Fc(t,i,n),typeof s!="function"&&(nn===null?nn=new Set([this]):nn.add(this));var w=n.stack;this.componentDidCatch(n.value,{componentStack:w!==null?w:""})})}function eg(e,t,i,n,s){if(i.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=i.alternate,t!==null&&Xn(t,i,s,!0),i=Wt.current,i!==null){switch(i.tag){case 31:case 13:return ci===null?ns():i.alternate===null&&pt===0&&(pt=3),i.flags&=-257,i.flags|=65536,i.lanes=s,n===Ml?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([n]):t.add(n),oo(e,n,s)),!1;case 22:return i.flags|=65536,n===Ml?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([n]):i.add(n)),oo(e,n,s)),!1}throw Error(l(435,i.tag))}return oo(e,n,s),ns(),!1}if(Ze)return t=Wt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=s,n!==ir&&(e=Error(l(422),{cause:n}),_a(si(e,i)))):(n!==ir&&(t=Error(l(423),{cause:n}),_a(si(t,i))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,n=si(n,i),s=Pr(e.stateNode,n,s),dr(e,s),pt!==4&&(pt=2)),!1;var r=Error(l(520),{cause:n});if(r=si(r,i),Za===null?Za=[r]:Za.push(r),pt!==4&&(pt=2),t===null)return!0;n=si(n,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=s&-s,i.lanes|=e,e=Pr(i.stateNode,n,e),dr(i,e),!1;case 1:if(t=i.type,r=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(nn===null||!nn.has(r))))return i.flags|=65536,s&=-s,i.lanes|=s,s=Gc(s),qc(s,e,i,n),dr(i,s),!1}i=i.return}while(i!==null);return!1}var Ur=Error(l(461)),Et=!1;function Nt(e,t,i,n){t.child=e===null?Xu(t,null,i,n):Dn(t,e.child,i,n)}function Vc(e,t,i,n,s){i=i.render;var r=t.ref;if("ref"in n){var g={};for(var w in n)w!=="ref"&&(g[w]=n[w])}else g=n;return bn(t),n=Tr(e,t,i,g,r,s),w=Sr(),e!==null&&!Et?(wr(e,t,s),Hi(e,t,s)):(Ze&&w&&er(t),t.flags|=1,Nt(e,t,n,s),t.child)}function Zc(e,t,i,n,s){if(e===null){var r=i.type;return typeof r=="function"&&!Ks(r)&&r.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=r,kc(e,t,r,n,s)):(e=Cl(i.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Xr(e,s)){var g=r.memoizedProps;if(i=i.compare,i=i!==null?i:xa,i(g,n)&&e.ref===t.ref)return Hi(e,t,s)}return t.flags|=1,e=Ri(r,n),e.ref=t.ref,e.return=t,t.child=e}function kc(e,t,i,n,s){if(e!==null){var r=e.memoizedProps;if(xa(r,n)&&e.ref===t.ref)if(Et=!1,t.pendingProps=n=r,Xr(e,s))(e.flags&131072)!==0&&(Et=!0);else return t.lanes=e.lanes,Hi(e,t,s)}return jr(e,t,i,n,s)}function Xc(e,t,i,n){var s=n.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|i:i,e!==null){for(n=t.child=e.child,s=0;n!==null;)s=s|n.lanes|n.childLanes,n=n.sibling;n=s&~r}else n=0,t.child=null;return Yc(e,t,r,i,n)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ol(t,r!==null?r.cachePool:null),r!==null?Qu(t,r):mr(),Wu(t);else return n=t.lanes=536870912,Yc(e,t,r!==null?r.baseLanes|i:i,i,n)}else r!==null?(Ol(t,r.cachePool),Qu(t,r),Ji(),t.memoizedState=null):(e!==null&&Ol(t,null),mr(),Ji());return Nt(e,t,s,i),t.child}function Pa(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Yc(e,t,i,n,s){var r=ur();return r=r===null?null:{parent:wt._currentValue,pool:r},t.memoizedState={baseLanes:i,cachePool:r},e!==null&&Ol(t,null),mr(),Wu(t),e!==null&&Xn(e,t,n,!0),t.childLanes=s,null}function Xl(e,t){return t=Il({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Ic(e,t,i){return Dn(t,e.child,null,i),e=Xl(t,t.pendingProps),e.flags|=2,Kt(t),t.memoizedState=null,e}function tg(e,t,i){var n=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ze){if(n.mode==="hidden")return e=Xl(t,n),t.lanes=536870912,Pa(null,e);if(vr(t),(e=ot)?(e=rf(e,ui),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zi!==null?{id:yi,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},i=Au(e),i.return=t,t.child=i,Mt=t,ot=null)):e=null,e===null)throw Xi(t);return t.lanes=536870912,null}return Xl(t,n)}var r=e.memoizedState;if(r!==null){var g=r.dehydrated;if(vr(t),s)if(t.flags&256)t.flags&=-257,t=Ic(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(Et||Xn(e,t,i,!1),s=(i&e.childLanes)!==0,Et||s){if(n=st,n!==null&&(g=ol(n,i),g!==0&&g!==r.retryLane))throw r.retryLane=g,Sn(e,g),Xt(n,e,g),Ur;ns(),t=Ic(e,t,i)}else e=r.treeContext,ot=hi(g.nextSibling),Mt=t,Ze=!0,ki=null,ui=!1,e!==null&&Nu(t,e),t=Xl(t,n),t.flags|=4096;return t}return e=Ri(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Yl(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(l(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function jr(e,t,i,n,s){return bn(t),i=Tr(e,t,i,n,void 0,s),n=Sr(),e!==null&&!Et?(wr(e,t,s),Hi(e,t,s)):(Ze&&n&&er(t),t.flags|=1,Nt(e,t,i,s),t.child)}function Qc(e,t,i,n,s,r){return bn(t),t.updateQueue=null,i=Ju(t,n,i,s),Ku(e),n=Sr(),e!==null&&!Et?(wr(e,t,r),Hi(e,t,r)):(Ze&&n&&er(t),t.flags|=1,Nt(e,t,i,r),t.child)}function Wc(e,t,i,n,s){if(bn(t),t.stateNode===null){var r=qn,g=i.contextType;typeof g=="object"&&g!==null&&(r=Ht(g)),r=new i(n,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Lr,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=n,r.state=t.memoizedState,r.refs={},hr(t),g=i.contextType,r.context=typeof g=="object"&&g!==null?Ht(g):qn,r.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(Br(t,i,g,n),r.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(g=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),g!==r.state&&Lr.enqueueReplaceState(r,r.state,null),Ma(t,n,r,s),Aa(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){r=t.stateNode;var w=t.memoizedProps,D=On(i,w);r.props=D;var L=r.context,Z=i.contextType;g=qn,typeof Z=="object"&&Z!==null&&(g=Ht(Z));var W=i.getDerivedStateFromProps;Z=typeof W=="function"||typeof r.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,Z||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(w||L!==g)&&Lc(t,r,n,g),Ii=!1;var j=t.memoizedState;r.state=j,Ma(t,n,r,s),Aa(),L=t.memoizedState,w||j!==L||Ii?(typeof W=="function"&&(Br(t,i,W,n),L=t.memoizedState),(D=Ii||Bc(t,i,D,n,j,L,g))?(Z||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=L),r.props=n,r.state=L,r.context=g,n=D):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{r=t.stateNode,fr(e,t),g=t.memoizedProps,Z=On(i,g),r.props=Z,W=t.pendingProps,j=r.context,L=i.contextType,D=qn,typeof L=="object"&&L!==null&&(D=Ht(L)),w=i.getDerivedStateFromProps,(L=typeof w=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(g!==W||j!==D)&&Lc(t,r,n,D),Ii=!1,j=t.memoizedState,r.state=j,Ma(t,n,r,s),Aa();var F=t.memoizedState;g!==W||j!==F||Ii||e!==null&&e.dependencies!==null&&Dl(e.dependencies)?(typeof w=="function"&&(Br(t,i,w,n),F=t.memoizedState),(Z=Ii||Bc(t,i,Z,n,j,F,D)||e!==null&&e.dependencies!==null&&Dl(e.dependencies))?(L||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(n,F,D),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(n,F,D)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||g===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=F),r.props=n,r.state=F,r.context=D,n=Z):(typeof r.componentDidUpdate!="function"||g===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),n=!1)}return r=n,Yl(e,t),n=(t.flags&128)!==0,r||n?(r=t.stateNode,i=n&&typeof i.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&n?(t.child=Dn(t,e.child,null,s),t.child=Dn(t,null,i,s)):Nt(e,t,i,s),t.memoizedState=r.state,e=t.child):e=Hi(e,t,s),e}function Kc(e,t,i,n){return xn(),t.flags|=256,Nt(e,t,i,n),t.child}var Fr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gr(e){return{baseLanes:e,cachePool:Fu()}}function qr(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=$t),e}function Jc(e,t,i){var n=t.pendingProps,s=!1,r=(t.flags&128)!==0,g;if((g=r)||(g=e!==null&&e.memoizedState===null?!1:(vt.current&2)!==0),g&&(s=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ze){if(s?Ki(t):Ji(),(e=ot)?(e=rf(e,ui),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zi!==null?{id:yi,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},i=Au(e),i.return=t,t.child=i,Mt=t,ot=null)):e=null,e===null)throw Xi(t);return _o(e)?t.lanes=32:t.lanes=536870912,null}var w=n.children;return n=n.fallback,s?(Ji(),s=t.mode,w=Il({mode:"hidden",children:w},s),n=wn(n,s,i,null),w.return=t,n.return=t,w.sibling=n,t.child=w,n=t.child,n.memoizedState=Gr(i),n.childLanes=qr(e,g,i),t.memoizedState=Fr,Pa(null,n)):(Ki(t),Vr(t,w))}var D=e.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(r)t.flags&256?(Ki(t),t.flags&=-257,t=Zr(e,t,i)):t.memoizedState!==null?(Ji(),t.child=e.child,t.flags|=128,t=null):(Ji(),w=n.fallback,s=t.mode,n=Il({mode:"visible",children:n.children},s),w=wn(w,s,i,null),w.flags|=2,n.return=t,w.return=t,n.sibling=w,t.child=n,Dn(t,e.child,null,i),n=t.child,n.memoizedState=Gr(i),n.childLanes=qr(e,g,i),t.memoizedState=Fr,t=Pa(null,n));else if(Ki(t),_o(w)){if(g=w.nextSibling&&w.nextSibling.dataset,g)var L=g.dgst;g=L,n=Error(l(419)),n.stack="",n.digest=g,_a({value:n,source:null,stack:null}),t=Zr(e,t,i)}else if(Et||Xn(e,t,i,!1),g=(i&e.childLanes)!==0,Et||g){if(g=st,g!==null&&(n=ol(g,i),n!==0&&n!==D.retryLane))throw D.retryLane=n,Sn(e,n),Xt(g,e,n),Ur;bo(w)||ns(),t=Zr(e,t,i)}else bo(w)?(t.flags|=192,t.child=e.child,t=null):(e=D.treeContext,ot=hi(w.nextSibling),Mt=t,Ze=!0,ki=null,ui=!1,e!==null&&Nu(t,e),t=Vr(t,n.children),t.flags|=4096);return t}return s?(Ji(),w=n.fallback,s=t.mode,D=e.child,L=D.sibling,n=Ri(D,{mode:"hidden",children:n.children}),n.subtreeFlags=D.subtreeFlags&65011712,L!==null?w=Ri(L,w):(w=wn(w,s,i,null),w.flags|=2),w.return=t,n.return=t,n.sibling=w,t.child=n,Pa(null,n),n=t.child,w=e.child.memoizedState,w===null?w=Gr(i):(s=w.cachePool,s!==null?(D=wt._currentValue,s=s.parent!==D?{parent:D,pool:D}:s):s=Fu(),w={baseLanes:w.baseLanes|i,cachePool:s}),n.memoizedState=w,n.childLanes=qr(e,g,i),t.memoizedState=Fr,Pa(e.child,n)):(Ki(t),i=e.child,e=i.sibling,i=Ri(i,{mode:"visible",children:n.children}),i.return=t,i.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=i,t.memoizedState=null,i)}function Vr(e,t){return t=Il({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Il(e,t){return e=Qt(22,e,null,t),e.lanes=0,e}function Zr(e,t,i){return Dn(t,e.child,null,i),e=Vr(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $c(e,t,i){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),lr(e.return,t,i)}function kr(e,t,i,n,s,r){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:s,treeForkCount:r}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=n,g.tail=i,g.tailMode=s,g.treeForkCount=r)}function eh(e,t,i){var n=t.pendingProps,s=n.revealOrder,r=n.tail;n=n.children;var g=vt.current,w=(g&2)!==0;if(w?(g=g&1|2,t.flags|=128):g&=1,Q(vt,g),Nt(e,t,n,i),n=Ze?ba:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$c(e,i,t);else if(e.tag===19)$c(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(i=t.child,s=null;i!==null;)e=i.alternate,e!==null&&Ll(e)===null&&(s=i),i=i.sibling;i=s,i===null?(s=t.child,t.child=null):(s=i.sibling,i.sibling=null),kr(t,!1,s,i,r,n);break;case"backwards":case"unstable_legacy-backwards":for(i=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ll(e)===null){t.child=s;break}e=s.sibling,s.sibling=i,i=s,s=e}kr(t,!0,i,null,r,n);break;case"together":kr(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function Hi(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),tn|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Xn(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,i=Ri(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ri(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Xr(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Dl(e)))}function ig(e,t,i){switch(t.tag){case 3:We(t,t.stateNode.containerInfo),Yi(t,wt,e.memoizedState.cache),xn();break;case 27:case 5:Ft(t);break;case 4:We(t,t.stateNode.containerInfo);break;case 10:Yi(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,vr(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Ki(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Jc(e,t,i):(Ki(t),e=Hi(e,t,i),e!==null?e.sibling:null);Ki(t);break;case 19:var s=(e.flags&128)!==0;if(n=(i&t.childLanes)!==0,n||(Xn(e,t,i,!1),n=(i&t.childLanes)!==0),s){if(n)return eh(e,t,i);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Q(vt,vt.current),n)break;return null;case 22:return t.lanes=0,Xc(e,t,i,t.pendingProps);case 24:Yi(t,wt,e.memoizedState.cache)}return Hi(e,t,i)}function th(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)Et=!0;else{if(!Xr(e,i)&&(t.flags&128)===0)return Et=!1,ig(e,t,i);Et=(e.flags&131072)!==0}else Et=!1,Ze&&(t.flags&1048576)!==0&&Hu(t,ba,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=Cn(t.elementType),t.type=e,typeof e=="function")Ks(e)?(n=On(e,n),t.tag=1,t=Wc(null,t,e,n,i)):(t.tag=0,t=jr(null,t,e,n,i));else{if(e!=null){var s=e.$$typeof;if(s===ce){t.tag=11,t=Vc(null,t,e,n,i);break e}else if(s===V){t.tag=14,t=Zc(null,t,e,n,i);break e}}throw t=dt(e)||e,Error(l(306,t,""))}}return t;case 0:return jr(e,t,t.type,t.pendingProps,i);case 1:return n=t.type,s=On(n,t.pendingProps),Wc(e,t,n,s,i);case 3:e:{if(We(t,t.stateNode.containerInfo),e===null)throw Error(l(387));n=t.pendingProps;var r=t.memoizedState;s=r.element,fr(e,t),Ma(t,n,null,i);var g=t.memoizedState;if(n=g.cache,Yi(t,wt,n),n!==r.cache&&sr(t,[wt],i,!0),Aa(),n=g.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Kc(e,t,n,i);break e}else if(n!==s){s=si(Error(l(424)),t),_a(s),t=Kc(e,t,n,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ot=hi(e.firstChild),Mt=t,Ze=!0,ki=null,ui=!0,i=Xu(t,null,n,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(xn(),n===s){t=Hi(e,t,i);break e}Nt(e,t,n,i)}t=t.child}return t;case 26:return Yl(e,t),e===null?(i=df(t.type,null,t.pendingProps,null))?t.memoizedState=i:Ze||(i=t.type,e=t.pendingProps,n=cs(_e.current).createElement(i),n[Ct]=t,n[At]=e,Bt(n,i,e),ft(n),t.stateNode=n):t.memoizedState=df(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ft(t),e===null&&Ze&&(n=t.stateNode=cf(t.type,t.pendingProps,_e.current),Mt=t,ui=!0,s=ot,rn(t.type)?(Co=s,ot=hi(n.firstChild)):ot=s),Nt(e,t,t.pendingProps.children,i),Yl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ze&&((s=n=ot)&&(n=Mg(n,t.type,t.pendingProps,ui),n!==null?(t.stateNode=n,Mt=t,ot=hi(n.firstChild),ui=!1,s=!0):s=!1),s||Xi(t)),Ft(t),s=t.type,r=t.pendingProps,g=e!==null?e.memoizedProps:null,n=r.children,wo(s,r)?n=null:g!==null&&wo(s,g)&&(t.flags|=32),t.memoizedState!==null&&(s=Tr(e,t,Yd,null,null,i),Ja._currentValue=s),Yl(e,t),Nt(e,t,n,i),t.child;case 6:return e===null&&Ze&&((e=i=ot)&&(i=Hg(i,t.pendingProps,ui),i!==null?(t.stateNode=i,Mt=t,ot=null,e=!0):e=!1),e||Xi(t)),null;case 13:return Jc(e,t,i);case 4:return We(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Dn(t,null,n,i):Nt(e,t,n,i),t.child;case 11:return Vc(e,t,t.type,t.pendingProps,i);case 7:return Nt(e,t,t.pendingProps,i),t.child;case 8:return Nt(e,t,t.pendingProps.children,i),t.child;case 12:return Nt(e,t,t.pendingProps.children,i),t.child;case 10:return n=t.pendingProps,Yi(t,t.type,n.value),Nt(e,t,n.children,i),t.child;case 9:return s=t.type._context,n=t.pendingProps.children,bn(t),s=Ht(s),n=n(s),t.flags|=1,Nt(e,t,n,i),t.child;case 14:return Zc(e,t,t.type,t.pendingProps,i);case 15:return kc(e,t,t.type,t.pendingProps,i);case 19:return eh(e,t,i);case 31:return tg(e,t,i);case 22:return Xc(e,t,i,t.pendingProps);case 24:return bn(t),n=Ht(wt),e===null?(s=ur(),s===null&&(s=st,r=rr(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=i),s=r),t.memoizedState={parent:n,cache:s},hr(t),Yi(t,wt,s)):((e.lanes&i)!==0&&(fr(e,t),Ma(t,null,null,i),Aa()),s=e.memoizedState,r=t.memoizedState,s.parent!==n?(s={parent:n,cache:n},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Yi(t,wt,n)):(n=r.cache,Yi(t,wt,n),n!==s.cache&&sr(t,[wt],i,!0))),Nt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Ni(e){e.flags|=4}function Yr(e,t,i,n,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(Dh())e.flags|=8192;else throw Rn=Ml,cr}else e.flags&=-16777217}function ih(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!yf(t))if(Dh())e.flags|=8192;else throw Rn=Ml,cr}function Ql(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?sl():536870912,e.lanes|=t,aa|=t)}function Ua(e,t){if(!Ze)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,n=0;if(t)for(var s=e.child;s!==null;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags&65011712,n|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function ng(e,t,i){var n=t.pendingProps;switch(tr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return ut(t),null;case 3:return i=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Oi(wt),ke(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(kn(t)?Ni(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,nr())),ut(t),null;case 26:var s=t.type,r=t.memoizedState;return e===null?(Ni(t),r!==null?(ut(t),ih(t,r)):(ut(t),Yr(t,s,null,n,i))):r?r!==e.memoizedState?(Ni(t),ut(t),ih(t,r)):(ut(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&Ni(t),ut(t),Yr(t,s,e,n,i)),null;case 27:if(Pt(t),i=_e.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Ni(t);else{if(!n){if(t.stateNode===null)throw Error(l(166));return ut(t),null}e=ie.current,kn(t)?Bu(t):(e=cf(s,n,i),t.stateNode=e,Ni(t))}return ut(t),null;case 5:if(Pt(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Ni(t);else{if(!n){if(t.stateNode===null)throw Error(l(166));return ut(t),null}if(r=ie.current,kn(t))Bu(t);else{var g=cs(_e.current);switch(r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof n.is=="string"?g.createElement("select",{is:n.is}):g.createElement("select"),n.multiple?r.multiple=!0:n.size&&(r.size=n.size);break;default:r=typeof n.is=="string"?g.createElement(s,{is:n.is}):g.createElement(s)}}r[Ct]=t,r[At]=n;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=r;e:switch(Bt(r,s,n),s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ni(t)}}return ut(t),Yr(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&Ni(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(l(166));if(e=_e.current,kn(t)){if(e=t.stateNode,i=t.memoizedProps,n=null,s=Mt,s!==null)switch(s.tag){case 27:case 5:n=s.memoizedProps}e[Ct]=t,e=!!(e.nodeValue===i||n!==null&&n.suppressHydrationWarning===!0||Jh(e.nodeValue,i)),e||Xi(t,!0)}else e=cs(e).createTextNode(n),e[Ct]=t,t.stateNode=e}return ut(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(n=kn(t),i!==null){if(e===null){if(!n)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[Ct]=t}else xn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ut(t),e=!1}else i=nr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Kt(t),t):(Kt(t),null);if((t.flags&128)!==0)throw Error(l(558))}return ut(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=kn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(l(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(l(317));s[Ct]=t}else xn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ut(t),s=!1}else s=nr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Kt(t),t):(Kt(t),null)}return Kt(t),(t.flags&128)!==0?(t.lanes=i,t):(i=n!==null,e=e!==null&&e.memoizedState!==null,i&&(n=t.child,s=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(s=n.alternate.memoizedState.cachePool.pool),r=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==s&&(n.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),Ql(t,t.updateQueue),ut(t),null);case 4:return ke(),e===null&&po(t.stateNode.containerInfo),ut(t),null;case 10:return Oi(t.type),ut(t),null;case 19:if(I(vt),n=t.memoizedState,n===null)return ut(t),null;if(s=(t.flags&128)!==0,r=n.rendering,r===null)if(s)Ua(n,!1);else{if(pt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=Ll(e),r!==null){for(t.flags|=128,Ua(n,!1),e=r.updateQueue,t.updateQueue=e,Ql(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)Ou(i,e),i=i.sibling;return Q(vt,vt.current&1|2),Ze&&Di(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&Re()>es&&(t.flags|=128,s=!0,Ua(n,!1),t.lanes=4194304)}else{if(!s)if(e=Ll(r),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,Ql(t,e),Ua(n,!0),n.tail===null&&n.tailMode==="hidden"&&!r.alternate&&!Ze)return ut(t),null}else 2*Re()-n.renderingStartTime>es&&i!==536870912&&(t.flags|=128,s=!0,Ua(n,!1),t.lanes=4194304);n.isBackwards?(r.sibling=t.child,t.child=r):(e=n.last,e!==null?e.sibling=r:t.child=r,n.last=r)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=Re(),e.sibling=null,i=vt.current,Q(vt,s?i&1|2:i&1),Ze&&Di(t,n.treeForkCount),e):(ut(t),null);case 22:case 23:return Kt(t),pr(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(i&536870912)!==0&&(t.flags&128)===0&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),i=t.updateQueue,i!==null&&Ql(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==i&&(t.flags|=2048),e!==null&&I(_n),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Oi(wt),ut(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function ag(e,t){switch(tr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Oi(wt),ke(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Pt(t),null;case 31:if(t.memoizedState!==null){if(Kt(t),t.alternate===null)throw Error(l(340));xn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Kt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));xn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return I(vt),null;case 4:return ke(),null;case 10:return Oi(t.type),null;case 22:case 23:return Kt(t),pr(),e!==null&&I(_n),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Oi(wt),null;case 25:return null;default:return null}}function nh(e,t){switch(tr(t),t.tag){case 3:Oi(wt),ke();break;case 26:case 27:case 5:Pt(t);break;case 4:ke();break;case 31:t.memoizedState!==null&&Kt(t);break;case 13:Kt(t);break;case 19:I(vt);break;case 10:Oi(t.type);break;case 22:case 23:Kt(t),pr(),e!==null&&I(_n);break;case 24:Oi(wt)}}function ja(e,t){try{var i=t.updateQueue,n=i!==null?i.lastEffect:null;if(n!==null){var s=n.next;i=s;do{if((i.tag&e)===e){n=void 0;var r=i.create,g=i.inst;n=r(),g.destroy=n}i=i.next}while(i!==s)}}catch(w){et(t,t.return,w)}}function $i(e,t,i){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var r=s.next;n=r;do{if((n.tag&e)===e){var g=n.inst,w=g.destroy;if(w!==void 0){g.destroy=void 0,s=t;var D=i,L=w;try{L()}catch(Z){et(s,D,Z)}}}n=n.next}while(n!==r)}}catch(Z){et(t,t.return,Z)}}function ah(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{Iu(t,i)}catch(n){et(e,e.return,n)}}}function lh(e,t,i){i.props=On(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(n){et(e,t,n)}}function Fa(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof i=="function"?e.refCleanup=i(n):i.current=n}}catch(s){et(e,t,s)}}function Si(e,t){var i=e.ref,n=e.refCleanup;if(i!==null)if(typeof n=="function")try{n()}catch(s){et(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(s){et(e,t,s)}else i.current=null}function sh(e){var t=e.type,i=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break e;case"img":i.src?n.src=i.src:i.srcSet&&(n.srcset=i.srcSet)}}catch(s){et(e,e.return,s)}}function Ir(e,t,i){try{var n=e.stateNode;Cg(n,e.type,i,t),n[At]=t}catch(s){et(e,e.return,s)}}function rh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&rn(e.type)||e.tag===4}function Qr(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&rn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wr(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=_i));else if(n!==4&&(n===27&&rn(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(Wr(e,t,i),e=e.sibling;e!==null;)Wr(e,t,i),e=e.sibling}function Wl(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(n!==4&&(n===27&&rn(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Wl(e,t,i),e=e.sibling;e!==null;)Wl(e,t,i),e=e.sibling}function oh(e){var t=e.stateNode,i=e.memoizedProps;try{for(var n=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Bt(t,n,i),t[Ct]=e,t[At]=i}catch(r){et(e,e.return,r)}}var Bi=!1,bt=!1,Kr=!1,uh=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function lg(e,t){if(e=e.containerInfo,To=vs,e=wu(e),Zs(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var n=i.getSelection&&i.getSelection();if(n&&n.rangeCount!==0){i=n.anchorNode;var s=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{i.nodeType,r.nodeType}catch{i=null;break e}var g=0,w=-1,D=-1,L=0,Z=0,W=e,j=null;t:for(;;){for(var F;W!==i||s!==0&&W.nodeType!==3||(w=g+s),W!==r||n!==0&&W.nodeType!==3||(D=g+n),W.nodeType===3&&(g+=W.nodeValue.length),(F=W.firstChild)!==null;)j=W,W=F;for(;;){if(W===e)break t;if(j===i&&++L===s&&(w=g),j===r&&++Z===n&&(D=g),(F=W.nextSibling)!==null)break;W=j,j=W.parentNode}W=F}i=w===-1||D===-1?null:{start:w,end:D}}else i=null}i=i||{start:0,end:0}}else i=null;for(So={focusedElem:e,selectionRange:i},vs=!1,Dt=t;Dt!==null;)if(t=Dt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Dt=e;else for(;Dt!==null;){switch(t=Dt,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)s=e[i],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,i=t,s=r.memoizedProps,r=r.memoizedState,n=i.stateNode;try{var fe=On(i.type,s);e=n.getSnapshotBeforeUpdate(fe,r),n.__reactInternalSnapshotBeforeUpdate=e}catch(Ee){et(i,i.return,Ee)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Eo(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Eo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,Dt=e;break}Dt=t.return}}function ch(e,t,i){var n=i.flags;switch(i.tag){case 0:case 11:case 15:Pi(e,i),n&4&&ja(5,i);break;case 1:if(Pi(e,i),n&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(g){et(i,i.return,g)}else{var s=On(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){et(i,i.return,g)}}n&64&&ah(i),n&512&&Fa(i,i.return);break;case 3:if(Pi(e,i),n&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Iu(e,t)}catch(g){et(i,i.return,g)}}break;case 27:t===null&&n&4&&oh(i);case 26:case 5:Pi(e,i),t===null&&n&4&&sh(i),n&512&&Fa(i,i.return);break;case 12:Pi(e,i);break;case 31:Pi(e,i),n&4&&dh(e,i);break;case 13:Pi(e,i),n&4&&gh(e,i),n&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=gg.bind(null,i),Ng(e,i))));break;case 22:if(n=i.memoizedState!==null||Bi,!n){t=t!==null&&t.memoizedState!==null||bt,s=Bi;var r=bt;Bi=n,(bt=t)&&!r?Ui(e,i,(i.subtreeFlags&8772)!==0):Pi(e,i),Bi=s,bt=r}break;case 30:break;default:Pi(e,i)}}function hh(e){var t=e.alternate;t!==null&&(e.alternate=null,hh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Le(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ht=null,qt=!1;function Li(e,t,i){for(i=i.child;i!==null;)fh(e,t,i),i=i.sibling}function fh(e,t,i){if(J&&typeof J.onCommitFiberUnmount=="function")try{J.onCommitFiberUnmount(q,i)}catch{}switch(i.tag){case 26:bt||Si(i,t),Li(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:bt||Si(i,t);var n=ht,s=qt;rn(i.type)&&(ht=i.stateNode,qt=!1),Li(e,t,i),Qa(i.stateNode),ht=n,qt=s;break;case 5:bt||Si(i,t);case 6:if(n=ht,s=qt,ht=null,Li(e,t,i),ht=n,qt=s,ht!==null)if(qt)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(i.stateNode)}catch(r){et(i,t,r)}else try{ht.removeChild(i.stateNode)}catch(r){et(i,t,r)}break;case 18:ht!==null&&(qt?(e=ht,lf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),fa(e)):lf(ht,i.stateNode));break;case 4:n=ht,s=qt,ht=i.stateNode.containerInfo,qt=!0,Li(e,t,i),ht=n,qt=s;break;case 0:case 11:case 14:case 15:$i(2,i,t),bt||$i(4,i,t),Li(e,t,i);break;case 1:bt||(Si(i,t),n=i.stateNode,typeof n.componentWillUnmount=="function"&&lh(i,t,n)),Li(e,t,i);break;case 21:Li(e,t,i);break;case 22:bt=(n=bt)||i.memoizedState!==null,Li(e,t,i),bt=n;break;default:Li(e,t,i)}}function dh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{fa(e)}catch(i){et(t,t.return,i)}}}function gh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{fa(e)}catch(i){et(t,t.return,i)}}function sg(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new uh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new uh),t;default:throw Error(l(435,e.tag))}}function Kl(e,t){var i=sg(e);t.forEach(function(n){if(!i.has(n)){i.add(n);var s=mg.bind(null,e,n);n.then(s,s)}})}function Vt(e,t){var i=t.deletions;if(i!==null)for(var n=0;n<i.length;n++){var s=i[n],r=e,g=t,w=g;e:for(;w!==null;){switch(w.tag){case 27:if(rn(w.type)){ht=w.stateNode,qt=!1;break e}break;case 5:ht=w.stateNode,qt=!1;break e;case 3:case 4:ht=w.stateNode.containerInfo,qt=!0;break e}w=w.return}if(ht===null)throw Error(l(160));fh(r,g,s),ht=null,qt=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)mh(t,e),t=t.sibling}var gi=null;function mh(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vt(t,e),Zt(e),n&4&&($i(3,e,e.return),ja(3,e),$i(5,e,e.return));break;case 1:Vt(t,e),Zt(e),n&512&&(bt||i===null||Si(i,i.return)),n&64&&Bi&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?n:i.concat(n))));break;case 26:var s=gi;if(Vt(t,e),Zt(e),n&512&&(bt||i===null||Si(i,i.return)),n&4){var r=i!==null?i.memoizedState:null;if(n=e.memoizedState,i===null)if(n===null)if(e.stateNode===null){e:{n=e.type,i=e.memoizedProps,s=s.ownerDocument||s;t:switch(n){case"title":r=s.getElementsByTagName("title")[0],(!r||r[re]||r[Ct]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(n),s.head.insertBefore(r,s.querySelector("head > title"))),Bt(r,n,i),r[Ct]=e,ft(r),n=r;break e;case"link":var g=pf("link","href",s).get(n+(i.href||""));if(g){for(var w=0;w<g.length;w++)if(r=g[w],r.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&r.getAttribute("rel")===(i.rel==null?null:i.rel)&&r.getAttribute("title")===(i.title==null?null:i.title)&&r.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(w,1);break t}}r=s.createElement(n),Bt(r,n,i),s.head.appendChild(r);break;case"meta":if(g=pf("meta","content",s).get(n+(i.content||""))){for(w=0;w<g.length;w++)if(r=g[w],r.getAttribute("content")===(i.content==null?null:""+i.content)&&r.getAttribute("name")===(i.name==null?null:i.name)&&r.getAttribute("property")===(i.property==null?null:i.property)&&r.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&r.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(w,1);break t}}r=s.createElement(n),Bt(r,n,i),s.head.appendChild(r);break;default:throw Error(l(468,n))}r[Ct]=e,ft(r),n=r}e.stateNode=n}else vf(s,e.type,e.stateNode);else e.stateNode=mf(s,n,e.memoizedProps);else r!==n?(r===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):r.count--,n===null?vf(s,e.type,e.stateNode):mf(s,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Ir(e,e.memoizedProps,i.memoizedProps)}break;case 27:Vt(t,e),Zt(e),n&512&&(bt||i===null||Si(i,i.return)),i!==null&&n&4&&Ir(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Vt(t,e),Zt(e),n&512&&(bt||i===null||Si(i,i.return)),e.flags&32){s=e.stateNode;try{Bn(s,"")}catch(fe){et(e,e.return,fe)}}n&4&&e.stateNode!=null&&(s=e.memoizedProps,Ir(e,s,i!==null?i.memoizedProps:s)),n&1024&&(Kr=!0);break;case 6:if(Vt(t,e),Zt(e),n&4){if(e.stateNode===null)throw Error(l(162));n=e.memoizedProps,i=e.stateNode;try{i.nodeValue=n}catch(fe){et(e,e.return,fe)}}break;case 3:if(ds=null,s=gi,gi=hs(t.containerInfo),Vt(t,e),gi=s,Zt(e),n&4&&i!==null&&i.memoizedState.isDehydrated)try{fa(t.containerInfo)}catch(fe){et(e,e.return,fe)}Kr&&(Kr=!1,ph(e));break;case 4:n=gi,gi=hs(e.stateNode.containerInfo),Vt(t,e),Zt(e),gi=n;break;case 12:Vt(t,e),Zt(e);break;case 31:Vt(t,e),Zt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Kl(e,n)));break;case 13:Vt(t,e),Zt(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&($l=Re()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Kl(e,n)));break;case 22:s=e.memoizedState!==null;var D=i!==null&&i.memoizedState!==null,L=Bi,Z=bt;if(Bi=L||s,bt=Z||D,Vt(t,e),bt=Z,Bi=L,Zt(e),n&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(i===null||D||Bi||bt||An(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){D=i=t;try{if(r=D.stateNode,s)g=r.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{w=D.stateNode;var W=D.memoizedProps.style,j=W!=null&&W.hasOwnProperty("display")?W.display:null;w.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(fe){et(D,D.return,fe)}}}else if(t.tag===6){if(i===null){D=t;try{D.stateNode.nodeValue=s?"":D.memoizedProps}catch(fe){et(D,D.return,fe)}}}else if(t.tag===18){if(i===null){D=t;try{var F=D.stateNode;s?sf(F,!0):sf(D.stateNode,!1)}catch(fe){et(D,D.return,fe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(i=n.retryQueue,i!==null&&(n.retryQueue=null,Kl(e,i))));break;case 19:Vt(t,e),Zt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Kl(e,n)));break;case 30:break;case 21:break;default:Vt(t,e),Zt(e)}}function Zt(e){var t=e.flags;if(t&2){try{for(var i,n=e.return;n!==null;){if(rh(n)){i=n;break}n=n.return}if(i==null)throw Error(l(160));switch(i.tag){case 27:var s=i.stateNode,r=Qr(e);Wl(e,r,s);break;case 5:var g=i.stateNode;i.flags&32&&(Bn(g,""),i.flags&=-33);var w=Qr(e);Wl(e,w,g);break;case 3:case 4:var D=i.stateNode.containerInfo,L=Qr(e);Wr(e,L,D);break;default:throw Error(l(161))}}catch(Z){et(e,e.return,Z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ph(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ph(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Pi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ch(e,t.alternate,t),t=t.sibling}function An(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:$i(4,t,t.return),An(t);break;case 1:Si(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&lh(t,t.return,i),An(t);break;case 27:Qa(t.stateNode);case 26:case 5:Si(t,t.return),An(t);break;case 22:t.memoizedState===null&&An(t);break;case 30:An(t);break;default:An(t)}e=e.sibling}}function Ui(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,s=e,r=t,g=r.flags;switch(r.tag){case 0:case 11:case 15:Ui(s,r,i),ja(4,r);break;case 1:if(Ui(s,r,i),n=r,s=n.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(L){et(n,n.return,L)}if(n=r,s=n.updateQueue,s!==null){var w=n.stateNode;try{var D=s.shared.hiddenCallbacks;if(D!==null)for(s.shared.hiddenCallbacks=null,s=0;s<D.length;s++)Yu(D[s],w)}catch(L){et(n,n.return,L)}}i&&g&64&&ah(r),Fa(r,r.return);break;case 27:oh(r);case 26:case 5:Ui(s,r,i),i&&n===null&&g&4&&sh(r),Fa(r,r.return);break;case 12:Ui(s,r,i);break;case 31:Ui(s,r,i),i&&g&4&&dh(s,r);break;case 13:Ui(s,r,i),i&&g&4&&gh(s,r);break;case 22:r.memoizedState===null&&Ui(s,r,i),Fa(r,r.return);break;case 30:break;default:Ui(s,r,i)}t=t.sibling}}function Jr(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Ca(i))}function $r(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ca(e))}function mi(e,t,i,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vh(e,t,i,n),t=t.sibling}function vh(e,t,i,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:mi(e,t,i,n),s&2048&&ja(9,t);break;case 1:mi(e,t,i,n);break;case 3:mi(e,t,i,n),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ca(e)));break;case 12:if(s&2048){mi(e,t,i,n),e=t.stateNode;try{var r=t.memoizedProps,g=r.id,w=r.onPostCommit;typeof w=="function"&&w(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){et(t,t.return,D)}}else mi(e,t,i,n);break;case 31:mi(e,t,i,n);break;case 13:mi(e,t,i,n);break;case 23:break;case 22:r=t.stateNode,g=t.alternate,t.memoizedState!==null?r._visibility&2?mi(e,t,i,n):Ga(e,t):r._visibility&2?mi(e,t,i,n):(r._visibility|=2,ta(e,t,i,n,(t.subtreeFlags&10256)!==0||!1)),s&2048&&Jr(g,t);break;case 24:mi(e,t,i,n),s&2048&&$r(t.alternate,t);break;default:mi(e,t,i,n)}}function ta(e,t,i,n,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,g=t,w=i,D=n,L=g.flags;switch(g.tag){case 0:case 11:case 15:ta(r,g,w,D,s),ja(8,g);break;case 23:break;case 22:var Z=g.stateNode;g.memoizedState!==null?Z._visibility&2?ta(r,g,w,D,s):Ga(r,g):(Z._visibility|=2,ta(r,g,w,D,s)),s&&L&2048&&Jr(g.alternate,g);break;case 24:ta(r,g,w,D,s),s&&L&2048&&$r(g.alternate,g);break;default:ta(r,g,w,D,s)}t=t.sibling}}function Ga(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,n=t,s=n.flags;switch(n.tag){case 22:Ga(i,n),s&2048&&Jr(n.alternate,n);break;case 24:Ga(i,n),s&2048&&$r(n.alternate,n);break;default:Ga(i,n)}t=t.sibling}}var qa=8192;function ia(e,t,i){if(e.subtreeFlags&qa)for(e=e.child;e!==null;)yh(e,t,i),e=e.sibling}function yh(e,t,i){switch(e.tag){case 26:ia(e,t,i),e.flags&qa&&e.memoizedState!==null&&Xg(i,gi,e.memoizedState,e.memoizedProps);break;case 5:ia(e,t,i);break;case 3:case 4:var n=gi;gi=hs(e.stateNode.containerInfo),ia(e,t,i),gi=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=qa,qa=16777216,ia(e,t,i),qa=n):ia(e,t,i));break;default:ia(e,t,i)}}function Th(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Va(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var n=t[i];Dt=n,wh(n,e)}Th(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Sh(e),e=e.sibling}function Sh(e){switch(e.tag){case 0:case 11:case 15:Va(e),e.flags&2048&&$i(9,e,e.return);break;case 3:Va(e);break;case 12:Va(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Jl(e)):Va(e);break;default:Va(e)}}function Jl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var n=t[i];Dt=n,wh(n,e)}Th(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:$i(8,t,t.return),Jl(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function wh(e,t){for(;Dt!==null;){var i=Dt;switch(i.tag){case 0:case 11:case 15:$i(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var n=i.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Ca(i.memoizedState.cache)}if(n=i.child,n!==null)n.return=i,Dt=n;else e:for(i=e;Dt!==null;){n=Dt;var s=n.sibling,r=n.return;if(hh(n),n===i){Dt=null;break e}if(s!==null){s.return=r,Dt=s;break e}Dt=r}}}var rg={getCacheForType:function(e){var t=Ht(wt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return Ht(wt).controller.signal}},og=typeof WeakMap=="function"?WeakMap:Map,Qe=0,st=null,Ue=null,qe=0,$e=0,Jt=null,en=!1,na=!1,eo=!1,ji=0,pt=0,tn=0,Mn=0,to=0,$t=0,aa=0,Za=null,kt=null,io=!1,$l=0,xh=0,es=1/0,ts=null,nn=null,Rt=0,an=null,la=null,Fi=0,no=0,ao=null,Eh=null,ka=0,lo=null;function ei(){return(Qe&2)!==0&&qe!==0?qe&-qe:G.T!==null?ho():Rs()}function bh(){if($t===0)if((qe&536870912)===0||Ze){var e=pi;pi<<=1,(pi&3932160)===0&&(pi=262144),$t=e}else $t=536870912;return e=Wt.current,e!==null&&(e.flags|=32),$t}function Xt(e,t,i){(e===st&&($e===2||$e===9)||e.cancelPendingCommit!==null)&&(sa(e,0),ln(e,qe,$t,!1)),mn(e,i),((Qe&2)===0||e!==st)&&(e===st&&((Qe&2)===0&&(Mn|=i),pt===4&&ln(e,qe,$t,!1)),wi(e))}function _h(e,t,i){if((Qe&6)!==0)throw Error(l(327));var n=!i&&(t&127)===0&&(t&e.expiredLanes)===0||dn(e,t),s=n?hg(e,t):ro(e,t,!0),r=n;do{if(s===0){na&&!n&&ln(e,t,0,!1);break}else{if(i=e.current.alternate,r&&!ug(i)){s=ro(e,t,!1),r=!1;continue}if(s===2){if(r=t,e.errorRecoveryDisabledLanes&r)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var w=e;s=Za;var D=w.current.memoizedState.isDehydrated;if(D&&(sa(w,g).flags|=256),g=ro(w,g,!1),g!==2){if(eo&&!D){w.errorRecoveryDisabledLanes|=r,Mn|=r,s=4;break e}r=kt,kt=s,r!==null&&(kt===null?kt=r:kt.push.apply(kt,r))}s=g}if(r=!1,s!==2)continue}}if(s===1){sa(e,0),ln(e,t,0,!0);break}e:{switch(n=e,r=s,r){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:ln(n,t,$t,!en);break e;case 2:kt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(s=$l+300-Re(),10<s)){if(ln(n,t,$t,!en),Hn(n,0,!0)!==0)break e;Fi=t,n.timeoutHandle=nf(Ch.bind(null,n,i,kt,ts,io,t,$t,Mn,aa,en,r,"Throttled",-0,0),s);break e}Ch(n,i,kt,ts,io,t,$t,Mn,aa,en,r,null,-0,0)}}break}while(!0);wi(e)}function Ch(e,t,i,n,s,r,g,w,D,L,Z,W,j,F){if(e.timeoutHandle=-1,W=t.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_i},yh(t,r,W);var fe=(r&62914560)===r?$l-Re():(r&4194048)===r?xh-Re():0;if(fe=Yg(W,fe),fe!==null){Fi=r,e.cancelPendingCommit=fe(Nh.bind(null,e,t,r,i,n,s,g,w,D,Z,W,null,j,F)),ln(e,r,g,!L);return}}Nh(e,t,r,i,n,s,g,w,D)}function ug(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var n=0;n<i.length;n++){var s=i[n],r=s.getSnapshot;s=s.value;try{if(!It(r(),s))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ln(e,t,i,n){t&=~to,t&=~Mn,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var s=t;0<s;){var r=31-De(s),g=1<<r;n[r]=-1,s&=~g}i!==0&&da(e,i,t)}function is(){return(Qe&6)===0?(Xa(0),!1):!0}function so(){if(Ue!==null){if($e===0)var e=Ue.return;else e=Ue,zi=En=null,xr(e),Wn=null,Da=0,e=Ue;for(;e!==null;)nh(e.alternate,e),e=e.return;Ue=null}}function sa(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,zg(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Fi=0,so(),st=e,Ue=i=Ri(e.current,null),qe=t,$e=0,Jt=null,en=!1,na=dn(e,t),eo=!1,aa=$t=to=Mn=tn=pt=0,kt=Za=null,io=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var s=31-De(n),r=1<<s;t|=e[s],n&=~r}return ji=t,El(),i}function Rh(e,t){Ae=null,G.H=La,t===Qn||t===Al?(t=Vu(),$e=3):t===cr?(t=Vu(),$e=4):$e=t===Ur?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Jt=t,Ue===null&&(pt=1,kl(e,si(t,e.current)))}function Dh(){var e=Wt.current;return e===null?!0:(qe&4194048)===qe?ci===null:(qe&62914560)===qe||(qe&536870912)!==0?e===ci:!1}function zh(){var e=G.H;return G.H=La,e===null?La:e}function Oh(){var e=G.A;return G.A=rg,e}function ns(){pt=4,en||(qe&4194048)!==qe&&Wt.current!==null||(na=!0),(tn&134217727)===0&&(Mn&134217727)===0||st===null||ln(st,qe,$t,!1)}function ro(e,t,i){var n=Qe;Qe|=2;var s=zh(),r=Oh();(st!==e||qe!==t)&&(ts=null,sa(e,t)),t=!1;var g=pt;e:do try{if($e!==0&&Ue!==null){var w=Ue,D=Jt;switch($e){case 8:so(),g=6;break e;case 3:case 2:case 9:case 6:Wt.current===null&&(t=!0);var L=$e;if($e=0,Jt=null,ra(e,w,D,L),i&&na){g=0;break e}break;default:L=$e,$e=0,Jt=null,ra(e,w,D,L)}}cg(),g=pt;break}catch(Z){Rh(e,Z)}while(!0);return t&&e.shellSuspendCounter++,zi=En=null,Qe=n,G.H=s,G.A=r,Ue===null&&(st=null,qe=0,El()),g}function cg(){for(;Ue!==null;)Ah(Ue)}function hg(e,t){var i=Qe;Qe|=2;var n=zh(),s=Oh();st!==e||qe!==t?(ts=null,es=Re()+500,sa(e,t)):na=dn(e,t);e:do try{if($e!==0&&Ue!==null){t=Ue;var r=Jt;t:switch($e){case 1:$e=0,Jt=null,ra(e,t,r,1);break;case 2:case 9:if(Gu(r)){$e=0,Jt=null,Mh(t);break}t=function(){$e!==2&&$e!==9||st!==e||($e=7),wi(e)},r.then(t,t);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:Gu(r)?($e=0,Jt=null,Mh(t)):($e=0,Jt=null,ra(e,t,r,7));break;case 5:var g=null;switch(Ue.tag){case 26:g=Ue.memoizedState;case 5:case 27:var w=Ue;if(g?yf(g):w.stateNode.complete){$e=0,Jt=null;var D=w.sibling;if(D!==null)Ue=D;else{var L=w.return;L!==null?(Ue=L,as(L)):Ue=null}break t}}$e=0,Jt=null,ra(e,t,r,5);break;case 6:$e=0,Jt=null,ra(e,t,r,6);break;case 8:so(),pt=6;break e;default:throw Error(l(462))}}fg();break}catch(Z){Rh(e,Z)}while(!0);return zi=En=null,G.H=n,G.A=s,Qe=i,Ue!==null?0:(st=null,qe=0,El(),pt)}function fg(){for(;Ue!==null&&!ye();)Ah(Ue)}function Ah(e){var t=th(e.alternate,e,ji);e.memoizedProps=e.pendingProps,t===null?as(e):Ue=t}function Mh(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Qc(i,t,t.pendingProps,t.type,void 0,qe);break;case 11:t=Qc(i,t,t.pendingProps,t.type.render,t.ref,qe);break;case 5:xr(t);default:nh(i,t),t=Ue=Ou(t,ji),t=th(i,t,ji)}e.memoizedProps=e.pendingProps,t===null?as(e):Ue=t}function ra(e,t,i,n){zi=En=null,xr(t),Wn=null,Da=0;var s=t.return;try{if(eg(e,s,t,i,qe)){pt=1,kl(e,si(i,e.current)),Ue=null;return}}catch(r){if(s!==null)throw Ue=s,r;pt=1,kl(e,si(i,e.current)),Ue=null;return}t.flags&32768?(Ze||n===1?e=!0:na||(qe&536870912)!==0?e=!1:(en=e=!0,(n===2||n===9||n===3||n===6)&&(n=Wt.current,n!==null&&n.tag===13&&(n.flags|=16384))),Hh(t,e)):as(t)}function as(e){var t=e;do{if((t.flags&32768)!==0){Hh(t,en);return}e=t.return;var i=ng(t.alternate,t,ji);if(i!==null){Ue=i;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);pt===0&&(pt=5)}function Hh(e,t){do{var i=ag(e.alternate,e);if(i!==null){i.flags&=32767,Ue=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Ue=e;return}Ue=e=i}while(e!==null);pt=6,Ue=null}function Nh(e,t,i,n,s,r,g,w,D){e.cancelPendingCommit=null;do ls();while(Rt!==0);if((Qe&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(r=t.lanes|t.childLanes,r|=Qs,Cs(e,i,r,g,w,D),e===st&&(Ue=st=null,qe=0),la=t,an=e,Fi=i,no=r,ao=s,Eh=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,pg(Ke,function(){return jh(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=G.T,G.T=null,s=ae.p,ae.p=2,g=Qe,Qe|=4;try{lg(e,t,i)}finally{Qe=g,ae.p=s,G.T=n}}Rt=1,Bh(),Lh(),Ph()}}function Bh(){if(Rt===1){Rt=0;var e=an,t=la,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=G.T,G.T=null;var n=ae.p;ae.p=2;var s=Qe;Qe|=4;try{mh(t,e);var r=So,g=wu(e.containerInfo),w=r.focusedElem,D=r.selectionRange;if(g!==w&&w&&w.ownerDocument&&Su(w.ownerDocument.documentElement,w)){if(D!==null&&Zs(w)){var L=D.start,Z=D.end;if(Z===void 0&&(Z=L),"selectionStart"in w)w.selectionStart=L,w.selectionEnd=Math.min(Z,w.value.length);else{var W=w.ownerDocument||document,j=W&&W.defaultView||window;if(j.getSelection){var F=j.getSelection(),fe=w.textContent.length,Ee=Math.min(D.start,fe),nt=D.end===void 0?Ee:Math.min(D.end,fe);!F.extend&&Ee>nt&&(g=nt,nt=Ee,Ee=g);var N=Tu(w,Ee),A=Tu(w,nt);if(N&&A&&(F.rangeCount!==1||F.anchorNode!==N.node||F.anchorOffset!==N.offset||F.focusNode!==A.node||F.focusOffset!==A.offset)){var B=W.createRange();B.setStart(N.node,N.offset),F.removeAllRanges(),Ee>nt?(F.addRange(B),F.extend(A.node,A.offset)):(B.setEnd(A.node,A.offset),F.addRange(B))}}}}for(W=[],F=w;F=F.parentNode;)F.nodeType===1&&W.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<W.length;w++){var Y=W[w];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}vs=!!To,So=To=null}finally{Qe=s,ae.p=n,G.T=i}}e.current=t,Rt=2}}function Lh(){if(Rt===2){Rt=0;var e=an,t=la,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=G.T,G.T=null;var n=ae.p;ae.p=2;var s=Qe;Qe|=4;try{ch(e,t.alternate,t)}finally{Qe=s,ae.p=n,G.T=i}}Rt=3}}function Ph(){if(Rt===4||Rt===3){Rt=0,le();var e=an,t=la,i=Fi,n=Eh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Rt=5:(Rt=0,la=an=null,Uh(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(nn=null),ga(i),t=t.stateNode,J&&typeof J.onCommitFiberRoot=="function")try{J.onCommitFiberRoot(q,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=G.T,s=ae.p,ae.p=2,G.T=null;try{for(var r=e.onRecoverableError,g=0;g<n.length;g++){var w=n[g];r(w.value,{componentStack:w.stack})}}finally{G.T=t,ae.p=s}}(Fi&3)!==0&&ls(),wi(e),s=e.pendingLanes,(i&261930)!==0&&(s&42)!==0?e===lo?ka++:(ka=0,lo=e):ka=0,Xa(0)}}function Uh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ca(t)))}function ls(){return Bh(),Lh(),Ph(),jh()}function jh(){if(Rt!==5)return!1;var e=an,t=no;no=0;var i=ga(Fi),n=G.T,s=ae.p;try{ae.p=32>i?32:i,G.T=null,i=ao,ao=null;var r=an,g=Fi;if(Rt=0,la=an=null,Fi=0,(Qe&6)!==0)throw Error(l(331));var w=Qe;if(Qe|=4,Sh(r.current),vh(r,r.current,g,i),Qe=w,Xa(0,!1),J&&typeof J.onPostCommitFiberRoot=="function")try{J.onPostCommitFiberRoot(q,r)}catch{}return!0}finally{ae.p=s,G.T=n,Uh(e,t)}}function Fh(e,t,i){t=si(i,t),t=Pr(e.stateNode,t,2),e=Wi(e,t,2),e!==null&&(mn(e,2),wi(e))}function et(e,t,i){if(e.tag===3)Fh(e,e,i);else for(;t!==null;){if(t.tag===3){Fh(t,e,i);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(nn===null||!nn.has(n))){e=si(i,e),i=Gc(2),n=Wi(t,i,2),n!==null&&(qc(i,n,t,e),mn(n,2),wi(n));break}}t=t.return}}function oo(e,t,i){var n=e.pingCache;if(n===null){n=e.pingCache=new og;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(i)||(eo=!0,s.add(i),e=dg.bind(null,e,t,i),t.then(e,e))}function dg(e,t,i){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,st===e&&(qe&i)===i&&(pt===4||pt===3&&(qe&62914560)===qe&&300>Re()-$l?(Qe&2)===0&&sa(e,0):to|=i,aa===qe&&(aa=0)),wi(e)}function Gh(e,t){t===0&&(t=sl()),e=Sn(e,t),e!==null&&(mn(e,t),wi(e))}function gg(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Gh(e,i)}function mg(e,t){var i=0;switch(e.tag){case 31:case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(i=s.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(l(314))}n!==null&&n.delete(t),Gh(e,i)}function pg(e,t){return $(e,t)}var ss=null,oa=null,uo=!1,rs=!1,co=!1,sn=0;function wi(e){e!==oa&&e.next===null&&(oa===null?ss=oa=e:oa=oa.next=e),rs=!0,uo||(uo=!0,yg())}function Xa(e,t){if(!co&&rs){co=!0;do for(var i=!1,n=ss;n!==null;){if(e!==0){var s=n.pendingLanes;if(s===0)var r=0;else{var g=n.suspendedLanes,w=n.pingedLanes;r=(1<<31-De(42|e)+1)-1,r&=s&~(g&~w),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(i=!0,kh(n,r))}else r=qe,r=Hn(n,n===st?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(r&3)===0||dn(n,r)||(i=!0,kh(n,r));n=n.next}while(i);co=!1}}function vg(){qh()}function qh(){rs=uo=!1;var e=0;sn!==0&&Dg()&&(e=sn);for(var t=Re(),i=null,n=ss;n!==null;){var s=n.next,r=Vh(n,t);r===0?(n.next=null,i===null?ss=s:i.next=s,s===null&&(oa=i)):(i=n,(e!==0||(r&3)!==0)&&(rs=!0)),n=s}Rt!==0&&Rt!==5||Xa(e),sn!==0&&(sn=0)}function Vh(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var g=31-De(r),w=1<<g,D=s[g];D===-1?((w&i)===0||(w&n)!==0)&&(s[g]=_s(w,t)):D<=t&&(e.expiredLanes|=w),r&=~w}if(t=st,i=qe,i=Hn(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,i===0||e===t&&($e===2||$e===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&ee(n),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||dn(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(n!==null&&ee(n),ga(i)){case 2:case 8:i=pe;break;case 32:i=Ke;break;case 268435456:i=y;break;default:i=Ke}return n=Zh.bind(null,e),i=$(i,n),e.callbackPriority=t,e.callbackNode=i,t}return n!==null&&n!==null&&ee(n),e.callbackPriority=2,e.callbackNode=null,2}function Zh(e,t){if(Rt!==0&&Rt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(ls()&&e.callbackNode!==i)return null;var n=qe;return n=Hn(e,e===st?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(_h(e,n,t),Vh(e,Re()),e.callbackNode!=null&&e.callbackNode===i?Zh.bind(null,e):null)}function kh(e,t){if(ls())return null;_h(e,t,!0)}function yg(){Og(function(){(Qe&6)!==0?$(Ie,vg):qh()})}function ho(){if(sn===0){var e=Yn;e===0&&(e=Yt,Yt<<=1,(Yt&261888)===0&&(Yt=256)),sn=e}return sn}function Xh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ml(""+e)}function Yh(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function Tg(e,t,i,n,s){if(t==="submit"&&i&&i.stateNode===s){var r=Xh((s[At]||null).action),g=n.submitter;g&&(t=(t=g[At]||null)?Xh(t.formAction):g.getAttribute("formAction"),t!==null&&(r=t,g=null));var w=new Tl("action","action",null,n,s);e.push({event:w,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(sn!==0){var D=g?Yh(s,g):new FormData(s);Ar(i,{pending:!0,data:D,method:s.method,action:r},null,D)}}else typeof r=="function"&&(w.preventDefault(),D=g?Yh(s,g):new FormData(s),Ar(i,{pending:!0,data:D,method:s.method,action:r},r,D))},currentTarget:s}]})}}for(var fo=0;fo<Is.length;fo++){var go=Is[fo],Sg=go.toLowerCase(),wg=go[0].toUpperCase()+go.slice(1);di(Sg,"on"+wg)}di(bu,"onAnimationEnd"),di(_u,"onAnimationIteration"),di(Cu,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(Pd,"onTransitionRun"),di(Ud,"onTransitionStart"),di(jd,"onTransitionCancel"),di(Ru,"onTransitionEnd"),qi("onMouseEnter",["mouseout","mouseover"]),qi("onMouseLeave",["mouseout","mouseover"]),qi("onPointerEnter",["pointerout","pointerover"]),qi("onPointerLeave",["pointerout","pointerover"]),Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ya));function Ih(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var n=e[i],s=n.event;n=n.listeners;e:{var r=void 0;if(t)for(var g=n.length-1;0<=g;g--){var w=n[g],D=w.instance,L=w.currentTarget;if(w=w.listener,D!==r&&s.isPropagationStopped())break e;r=w,s.currentTarget=L;try{r(s)}catch(Z){xl(Z)}s.currentTarget=null,r=D}else for(g=0;g<n.length;g++){if(w=n[g],D=w.instance,L=w.currentTarget,w=w.listener,D!==r&&s.isPropagationStopped())break e;r=w,s.currentTarget=L;try{r(s)}catch(Z){xl(Z)}s.currentTarget=null,r=D}}}}function je(e,t){var i=t[k];i===void 0&&(i=t[k]=new Set);var n=e+"__bubble";i.has(n)||(Qh(t,e,2,!1),i.add(n))}function mo(e,t,i){var n=0;t&&(n|=4),Qh(i,e,n,t)}var os="_reactListening"+Math.random().toString(36).slice(2);function po(e){if(!e[os]){e[os]=!0,cl.forEach(function(i){i!=="selectionchange"&&(xg.has(i)||mo(i,!1,e),mo(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[os]||(t[os]=!0,mo("selectionchange",!1,t))}}function Qh(e,t,i,n){switch(_f(t)){case 2:var s=Wg;break;case 8:s=Kg;break;default:s=Ao}i=s.bind(null,t,i,e),s=void 0,!Bs||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,i,{capture:!0,passive:s}):e.addEventListener(t,i,!0):s!==void 0?e.addEventListener(t,i,{passive:s}):e.addEventListener(t,i,!1)}function vo(e,t,i,n,s){var r=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var g=n.tag;if(g===3||g===4){var w=n.stateNode.containerInfo;if(w===s)break;if(g===4)for(g=n.return;g!==null;){var D=g.tag;if((D===3||D===4)&&g.stateNode.containerInfo===s)return;g=g.return}for(;w!==null;){if(g=Me(w),g===null)return;if(D=g.tag,D===5||D===6||D===26||D===27){n=r=g;continue e}w=w.parentNode}}n=n.return}eu(function(){var L=r,Z=Hs(i),W=[];e:{var j=Du.get(e);if(j!==void 0){var F=Tl,fe=e;switch(e){case"keypress":if(vl(i)===0)break e;case"keydown":case"keyup":F=md;break;case"focusin":fe="focus",F=js;break;case"focusout":fe="blur",F=js;break;case"beforeblur":case"afterblur":F=js;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=nd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=yd;break;case bu:case _u:case Cu:F=sd;break;case Ru:F=Sd;break;case"scroll":case"scrollend":F=td;break;case"wheel":F=xd;break;case"copy":case"cut":case"paste":F=od;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=lu;break;case"toggle":case"beforetoggle":F=bd}var Ee=(t&4)!==0,nt=!Ee&&(e==="scroll"||e==="scrollend"),N=Ee?j!==null?j+"Capture":null:j;Ee=[];for(var A=L,B;A!==null;){var Y=A;if(B=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||B===null||N===null||(Y=ma(A,N),Y!=null&&Ee.push(Ia(A,Y,B))),nt)break;A=A.return}0<Ee.length&&(j=new F(j,fe,null,i,Z),W.push({event:j,listeners:Ee}))}}if((t&7)===0){e:{if(j=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",j&&i!==Ms&&(fe=i.relatedTarget||i.fromElement)&&(Me(fe)||fe[H]))break e;if((F||j)&&(j=Z.window===Z?Z:(j=Z.ownerDocument)?j.defaultView||j.parentWindow:window,F?(fe=i.relatedTarget||i.toElement,F=L,fe=fe?Me(fe):null,fe!==null&&(nt=f(fe),Ee=fe.tag,fe!==nt||Ee!==5&&Ee!==27&&Ee!==6)&&(fe=null)):(F=null,fe=L),F!==fe)){if(Ee=nu,Y="onMouseLeave",N="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(Ee=lu,Y="onPointerLeave",N="onPointerEnter",A="pointer"),nt=F==null?j:lt(F),B=fe==null?j:lt(fe),j=new Ee(Y,A+"leave",F,i,Z),j.target=nt,j.relatedTarget=B,Y=null,Me(Z)===L&&(Ee=new Ee(N,A+"enter",fe,i,Z),Ee.target=B,Ee.relatedTarget=nt,Y=Ee),nt=Y,F&&fe)t:{for(Ee=Eg,N=F,A=fe,B=0,Y=N;Y;Y=Ee(Y))B++;Y=0;for(var Se=A;Se;Se=Ee(Se))Y++;for(;0<B-Y;)N=Ee(N),B--;for(;0<Y-B;)A=Ee(A),Y--;for(;B--;){if(N===A||A!==null&&N===A.alternate){Ee=N;break t}N=Ee(N),A=Ee(A)}Ee=null}else Ee=null;F!==null&&Wh(W,j,F,Ee,!1),fe!==null&&nt!==null&&Wh(W,nt,fe,Ee,!0)}}e:{if(j=L?lt(L):window,F=j.nodeName&&j.nodeName.toLowerCase(),F==="select"||F==="input"&&j.type==="file")var Xe=du;else if(hu(j))if(gu)Xe=Nd;else{Xe=Md;var ge=Ad}else F=j.nodeName,!F||F.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?L&&As(L.elementType)&&(Xe=du):Xe=Hd;if(Xe&&(Xe=Xe(e,L))){fu(W,Xe,i,Z);break e}ge&&ge(e,j,L),e==="focusout"&&L&&j.type==="number"&&L.memoizedProps.value!=null&&Os(j,"number",j.value)}switch(ge=L?lt(L):window,e){case"focusin":(hu(ge)||ge.contentEditable==="true")&&(jn=ge,ks=L,Ea=null);break;case"focusout":Ea=ks=jn=null;break;case"mousedown":Xs=!0;break;case"contextmenu":case"mouseup":case"dragend":Xs=!1,xu(W,i,Z);break;case"selectionchange":if(Ld)break;case"keydown":case"keyup":xu(W,i,Z)}var He;if(Gs)e:{switch(e){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Un?uu(e,i)&&(Ve="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Ve="onCompositionStart");Ve&&(su&&i.locale!=="ko"&&(Un||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Un&&(He=tu()):(Vi=Z,Ls="value"in Vi?Vi.value:Vi.textContent,Un=!0)),ge=us(L,Ve),0<ge.length&&(Ve=new au(Ve,e,null,i,Z),W.push({event:Ve,listeners:ge}),He?Ve.data=He:(He=cu(i),He!==null&&(Ve.data=He)))),(He=Cd?Rd(e,i):Dd(e,i))&&(Ve=us(L,"onBeforeInput"),0<Ve.length&&(ge=new au("onBeforeInput","beforeinput",null,i,Z),W.push({event:ge,listeners:Ve}),ge.data=He)),Tg(W,e,L,i,Z)}Ih(W,t)})}function Ia(e,t,i){return{instance:e,listener:t,currentTarget:i}}function us(e,t){for(var i=t+"Capture",n=[];e!==null;){var s=e,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=ma(e,i),s!=null&&n.unshift(Ia(e,s,r)),s=ma(e,t),s!=null&&n.push(Ia(e,s,r))),e.tag===3)return n;e=e.return}return[]}function Eg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Wh(e,t,i,n,s){for(var r=t._reactName,g=[];i!==null&&i!==n;){var w=i,D=w.alternate,L=w.stateNode;if(w=w.tag,D!==null&&D===n)break;w!==5&&w!==26&&w!==27||L===null||(D=L,s?(L=ma(i,r),L!=null&&g.unshift(Ia(i,L,D))):s||(L=ma(i,r),L!=null&&g.push(Ia(i,L,D)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var bg=/\r\n?/g,_g=/\u0000|\uFFFD/g;function Kh(e){return(typeof e=="string"?e:""+e).replace(bg,`
`).replace(_g,"")}function Jh(e,t){return t=Kh(t),Kh(e)===t}function it(e,t,i,n,s,r){switch(i){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||Bn(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&Bn(e,""+n);break;case"className":dl(e,"class",n);break;case"tabIndex":dl(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":dl(e,i,n);break;case"style":Jo(e,n,r);break;case"data":if(t!=="object"){dl(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(i);break}n=ml(""+n),e.setAttribute(i,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(i==="formAction"?(t!=="input"&&it(e,t,"name",s.name,s,null),it(e,t,"formEncType",s.formEncType,s,null),it(e,t,"formMethod",s.formMethod,s,null),it(e,t,"formTarget",s.formTarget,s,null)):(it(e,t,"encType",s.encType,s,null),it(e,t,"method",s.method,s,null),it(e,t,"target",s.target,s,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(i);break}n=ml(""+n),e.setAttribute(i,n);break;case"onClick":n!=null&&(e.onclick=_i);break;case"onScroll":n!=null&&je("scroll",e);break;case"onScrollEnd":n!=null&&je("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(l(61));if(i=n.__html,i!=null){if(s.children!=null)throw Error(l(60));e.innerHTML=i}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}i=ml(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,""+n):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":n===!0?e.setAttribute(i,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,n):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(i,n):e.removeAttribute(i);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(i):e.setAttribute(i,n);break;case"popover":je("beforetoggle",e),je("toggle",e),fl(e,"popover",n);break;case"xlinkActuate":bi(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":bi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":bi(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":bi(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":bi(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":bi(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":bi(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":bi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":bi(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":fl(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=$f.get(i)||i,fl(e,i,n))}}function yo(e,t,i,n,s,r){switch(i){case"style":Jo(e,n,r);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(l(61));if(i=n.__html,i!=null){if(s.children!=null)throw Error(l(60));e.innerHTML=i}}break;case"children":typeof n=="string"?Bn(e,n):(typeof n=="number"||typeof n=="bigint")&&Bn(e,""+n);break;case"onScroll":n!=null&&je("scroll",e);break;case"onScrollEnd":n!=null&&je("scrollend",e);break;case"onClick":n!=null&&(e.onclick=_i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hl.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(s=i.endsWith("Capture"),t=i.slice(2,s?i.length-7:void 0),r=e[At]||null,r=r!=null?r[i]:null,typeof r=="function"&&e.removeEventListener(t,r,s),typeof n=="function")){typeof r!="function"&&r!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,n,s);break e}i in e?e[i]=n:n===!0?e.setAttribute(i,""):fl(e,i,n)}}}function Bt(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",e),je("load",e);var n=!1,s=!1,r;for(r in i)if(i.hasOwnProperty(r)){var g=i[r];if(g!=null)switch(r){case"src":n=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:it(e,t,r,g,i,null)}}s&&it(e,t,"srcSet",i.srcSet,i,null),n&&it(e,t,"src",i.src,i,null);return;case"input":je("invalid",e);var w=r=g=s=null,D=null,L=null;for(n in i)if(i.hasOwnProperty(n)){var Z=i[n];if(Z!=null)switch(n){case"name":s=Z;break;case"type":g=Z;break;case"checked":D=Z;break;case"defaultChecked":L=Z;break;case"value":r=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(l(137,t));break;default:it(e,t,n,Z,i,null)}}Io(e,r,w,D,L,g,s,!1);return;case"select":je("invalid",e),n=g=r=null;for(s in i)if(i.hasOwnProperty(s)&&(w=i[s],w!=null))switch(s){case"value":r=w;break;case"defaultValue":g=w;break;case"multiple":n=w;default:it(e,t,s,w,i,null)}t=r,i=g,e.multiple=!!n,t!=null?Nn(e,!!n,t,!1):i!=null&&Nn(e,!!n,i,!0);return;case"textarea":je("invalid",e),r=s=n=null;for(g in i)if(i.hasOwnProperty(g)&&(w=i[g],w!=null))switch(g){case"value":n=w;break;case"defaultValue":s=w;break;case"children":r=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(l(91));break;default:it(e,t,g,w,i,null)}Wo(e,n,s,r);return;case"option":for(D in i)if(i.hasOwnProperty(D)&&(n=i[D],n!=null))switch(D){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:it(e,t,D,n,i,null)}return;case"dialog":je("beforetoggle",e),je("toggle",e),je("cancel",e),je("close",e);break;case"iframe":case"object":je("load",e);break;case"video":case"audio":for(n=0;n<Ya.length;n++)je(Ya[n],e);break;case"image":je("error",e),je("load",e);break;case"details":je("toggle",e);break;case"embed":case"source":case"link":je("error",e),je("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in i)if(i.hasOwnProperty(L)&&(n=i[L],n!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:it(e,t,L,n,i,null)}return;default:if(As(t)){for(Z in i)i.hasOwnProperty(Z)&&(n=i[Z],n!==void 0&&yo(e,t,Z,n,i,void 0));return}}for(w in i)i.hasOwnProperty(w)&&(n=i[w],n!=null&&it(e,t,w,n,i,null))}function Cg(e,t,i,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,g=null,w=null,D=null,L=null,Z=null;for(F in i){var W=i[F];if(i.hasOwnProperty(F)&&W!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":D=W;default:n.hasOwnProperty(F)||it(e,t,F,null,n,W)}}for(var j in n){var F=n[j];if(W=i[j],n.hasOwnProperty(j)&&(F!=null||W!=null))switch(j){case"type":r=F;break;case"name":s=F;break;case"checked":L=F;break;case"defaultChecked":Z=F;break;case"value":g=F;break;case"defaultValue":w=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(l(137,t));break;default:F!==W&&it(e,t,j,F,n,W)}}zs(e,g,w,D,L,Z,r,s);return;case"select":F=g=w=j=null;for(r in i)if(D=i[r],i.hasOwnProperty(r)&&D!=null)switch(r){case"value":break;case"multiple":F=D;default:n.hasOwnProperty(r)||it(e,t,r,null,n,D)}for(s in n)if(r=n[s],D=i[s],n.hasOwnProperty(s)&&(r!=null||D!=null))switch(s){case"value":j=r;break;case"defaultValue":w=r;break;case"multiple":g=r;default:r!==D&&it(e,t,s,r,n,D)}t=w,i=g,n=F,j!=null?Nn(e,!!i,j,!1):!!n!=!!i&&(t!=null?Nn(e,!!i,t,!0):Nn(e,!!i,i?[]:"",!1));return;case"textarea":F=j=null;for(w in i)if(s=i[w],i.hasOwnProperty(w)&&s!=null&&!n.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:it(e,t,w,null,n,s)}for(g in n)if(s=n[g],r=i[g],n.hasOwnProperty(g)&&(s!=null||r!=null))switch(g){case"value":j=s;break;case"defaultValue":F=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(l(91));break;default:s!==r&&it(e,t,g,s,n,r)}Qo(e,j,F);return;case"option":for(var fe in i)if(j=i[fe],i.hasOwnProperty(fe)&&j!=null&&!n.hasOwnProperty(fe))switch(fe){case"selected":e.selected=!1;break;default:it(e,t,fe,null,n,j)}for(D in n)if(j=n[D],F=i[D],n.hasOwnProperty(D)&&j!==F&&(j!=null||F!=null))switch(D){case"selected":e.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:it(e,t,D,j,n,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in i)j=i[Ee],i.hasOwnProperty(Ee)&&j!=null&&!n.hasOwnProperty(Ee)&&it(e,t,Ee,null,n,j);for(L in n)if(j=n[L],F=i[L],n.hasOwnProperty(L)&&j!==F&&(j!=null||F!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(l(137,t));break;default:it(e,t,L,j,n,F)}return;default:if(As(t)){for(var nt in i)j=i[nt],i.hasOwnProperty(nt)&&j!==void 0&&!n.hasOwnProperty(nt)&&yo(e,t,nt,void 0,n,j);for(Z in n)j=n[Z],F=i[Z],!n.hasOwnProperty(Z)||j===F||j===void 0&&F===void 0||yo(e,t,Z,j,n,F);return}}for(var N in i)j=i[N],i.hasOwnProperty(N)&&j!=null&&!n.hasOwnProperty(N)&&it(e,t,N,null,n,j);for(W in n)j=n[W],F=i[W],!n.hasOwnProperty(W)||j===F||j==null&&F==null||it(e,t,W,j,n,F)}function $h(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Rg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),n=0;n<i.length;n++){var s=i[n],r=s.transferSize,g=s.initiatorType,w=s.duration;if(r&&w&&$h(g)){for(g=0,w=s.responseEnd,n+=1;n<i.length;n++){var D=i[n],L=D.startTime;if(L>w)break;var Z=D.transferSize,W=D.initiatorType;Z&&$h(W)&&(D=D.responseEnd,g+=Z*(D<w?1:(w-L)/(D-L)))}if(--n,t+=8*(r+g)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var To=null,So=null;function cs(e){return e.nodeType===9?e:e.ownerDocument}function ef(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function wo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xo=null;function Dg(){var e=window.event;return e&&e.type==="popstate"?e===xo?!1:(xo=e,!0):(xo=null,!1)}var nf=typeof setTimeout=="function"?setTimeout:void 0,zg=typeof clearTimeout=="function"?clearTimeout:void 0,af=typeof Promise=="function"?Promise:void 0,Og=typeof queueMicrotask=="function"?queueMicrotask:typeof af<"u"?function(e){return af.resolve(null).then(e).catch(Ag)}:nf;function Ag(e){setTimeout(function(){throw e})}function rn(e){return e==="head"}function lf(e,t){var i=t,n=0;do{var s=i.nextSibling;if(e.removeChild(i),s&&s.nodeType===8)if(i=s.data,i==="/$"||i==="/&"){if(n===0){e.removeChild(s),fa(t);return}n--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")n++;else if(i==="html")Qa(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Qa(i);for(var r=i.firstChild;r;){var g=r.nextSibling,w=r.nodeName;r[re]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&r.rel.toLowerCase()==="stylesheet"||i.removeChild(r),r=g}}else i==="body"&&Qa(e.ownerDocument.body);i=s}while(i);fa(t)}function sf(e,t){var i=e;e=0;do{var n=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=n}while(i)}function Eo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Eo(i),Le(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Mg(e,t,i,n){for(;e.nodeType===1;){var s=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[re])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=hi(e.nextSibling),e===null)break}return null}function Hg(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=hi(e.nextSibling),e===null))return null;return e}function rf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=hi(e.nextSibling),e===null))return null;return e}function bo(e){return e.data==="$?"||e.data==="$~"}function _o(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ng(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var n=function(){t(),i.removeEventListener("DOMContentLoaded",n)};i.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function hi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Co=null;function of(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return hi(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function uf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function cf(e,t,i){switch(t=cs(i),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Qa(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Le(e)}var fi=new Map,hf=new Set;function hs(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Gi=ae.d;ae.d={f:Bg,r:Lg,D:Pg,C:Ug,L:jg,m:Fg,X:qg,S:Gg,M:Vg};function Bg(){var e=Gi.f(),t=is();return e||t}function Lg(e){var t=at(e);t!==null&&t.tag===5&&t.type==="form"?Rc(t):Gi.r(e)}var ua=typeof document>"u"?null:document;function ff(e,t,i){var n=ua;if(n&&typeof t=="string"&&t){var s=ai(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof i=="string"&&(s+='[crossorigin="'+i+'"]'),hf.has(s)||(hf.add(s),e={rel:e,crossOrigin:i,href:t},n.querySelector(s)===null&&(t=n.createElement("link"),Bt(t,"link",e),ft(t),n.head.appendChild(t)))}}function Pg(e){Gi.D(e),ff("dns-prefetch",e,null)}function Ug(e,t){Gi.C(e,t),ff("preconnect",e,t)}function jg(e,t,i){Gi.L(e,t,i);var n=ua;if(n&&e&&t){var s='link[rel="preload"][as="'+ai(t)+'"]';t==="image"&&i&&i.imageSrcSet?(s+='[imagesrcset="'+ai(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(s+='[imagesizes="'+ai(i.imageSizes)+'"]')):s+='[href="'+ai(e)+'"]';var r=s;switch(t){case"style":r=ca(e);break;case"script":r=ha(e)}fi.has(r)||(e=v({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),fi.set(r,e),n.querySelector(s)!==null||t==="style"&&n.querySelector(Wa(r))||t==="script"&&n.querySelector(Ka(r))||(t=n.createElement("link"),Bt(t,"link",e),ft(t),n.head.appendChild(t)))}}function Fg(e,t){Gi.m(e,t);var i=ua;if(i&&e){var n=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+ai(n)+'"][href="'+ai(e)+'"]',r=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=ha(e)}if(!fi.has(r)&&(e=v({rel:"modulepreload",href:e},t),fi.set(r,e),i.querySelector(s)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Ka(r)))return}n=i.createElement("link"),Bt(n,"link",e),ft(n),i.head.appendChild(n)}}}function Gg(e,t,i){Gi.S(e,t,i);var n=ua;if(n&&e){var s=Ut(n).hoistableStyles,r=ca(e);t=t||"default";var g=s.get(r);if(!g){var w={loading:0,preload:null};if(g=n.querySelector(Wa(r)))w.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},i),(i=fi.get(r))&&Ro(e,i);var D=g=n.createElement("link");ft(D),Bt(D,"link",e),D._p=new Promise(function(L,Z){D.onload=L,D.onerror=Z}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,fs(g,t,n)}g={type:"stylesheet",instance:g,count:1,state:w},s.set(r,g)}}}function qg(e,t){Gi.X(e,t);var i=ua;if(i&&e){var n=Ut(i).hoistableScripts,s=ha(e),r=n.get(s);r||(r=i.querySelector(Ka(s)),r||(e=v({src:e,async:!0},t),(t=fi.get(s))&&Do(e,t),r=i.createElement("script"),ft(r),Bt(r,"link",e),i.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(s,r))}}function Vg(e,t){Gi.M(e,t);var i=ua;if(i&&e){var n=Ut(i).hoistableScripts,s=ha(e),r=n.get(s);r||(r=i.querySelector(Ka(s)),r||(e=v({src:e,async:!0,type:"module"},t),(t=fi.get(s))&&Do(e,t),r=i.createElement("script"),ft(r),Bt(r,"link",e),i.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(s,r))}}function df(e,t,i,n){var s=(s=_e.current)?hs(s):null;if(!s)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=ca(i.href),i=Ut(s).hoistableStyles,n=i.get(t),n||(n={type:"style",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=ca(i.href);var r=Ut(s).hoistableStyles,g=r.get(e);if(g||(s=s.ownerDocument||s,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,g),(r=s.querySelector(Wa(e)))&&!r._p&&(g.instance=r,g.state.loading=5),fi.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},fi.set(e,i),r||Zg(s,e,i,g.state))),t&&n===null)throw Error(l(528,""));return g}if(t&&n!==null)throw Error(l(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ha(i),i=Ut(s).hoistableScripts,n=i.get(t),n||(n={type:"script",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function ca(e){return'href="'+ai(e)+'"'}function Wa(e){return'link[rel="stylesheet"]['+e+"]"}function gf(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Zg(e,t,i,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Bt(t,"link",i),ft(t),e.head.appendChild(t))}function ha(e){return'[src="'+ai(e)+'"]'}function Ka(e){return"script[async]"+e}function mf(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+ai(i.href)+'"]');if(n)return t.instance=n,ft(n),n;var s=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),ft(n),Bt(n,"style",s),fs(n,i.precedence,e),t.instance=n;case"stylesheet":s=ca(i.href);var r=e.querySelector(Wa(s));if(r)return t.state.loading|=4,t.instance=r,ft(r),r;n=gf(i),(s=fi.get(s))&&Ro(n,s),r=(e.ownerDocument||e).createElement("link"),ft(r);var g=r;return g._p=new Promise(function(w,D){g.onload=w,g.onerror=D}),Bt(r,"link",n),t.state.loading|=4,fs(r,i.precedence,e),t.instance=r;case"script":return r=ha(i.src),(s=e.querySelector(Ka(r)))?(t.instance=s,ft(s),s):(n=i,(s=fi.get(r))&&(n=v({},i),Do(n,s)),e=e.ownerDocument||e,s=e.createElement("script"),ft(s),Bt(s,"link",n),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,fs(n,i.precedence,e));return t.instance}function fs(e,t,i){for(var n=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,r=s,g=0;g<n.length;g++){var w=n[g];if(w.dataset.precedence===t)r=w;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Ro(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Do(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ds=null;function pf(e,t,i){if(ds===null){var n=new Map,s=ds=new Map;s.set(i,n)}else s=ds,n=s.get(i),n||(n=new Map,s.set(i,n));if(n.has(e))return n;for(n.set(e,null),i=i.getElementsByTagName(e),s=0;s<i.length;s++){var r=i[s];if(!(r[re]||r[Ct]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var g=r.getAttribute(t)||"";g=e+g;var w=n.get(g);w?w.push(r):n.set(g,[r])}}return n}function vf(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function kg(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function yf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Xg(e,t,i,n){if(i.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var s=ca(n.href),r=t.querySelector(Wa(s));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=gs.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=r,ft(r);return}r=t.ownerDocument||t,n=gf(n),(s=fi.get(s))&&Ro(n,s),r=r.createElement("link"),ft(r);var g=r;g._p=new Promise(function(w,D){g.onload=w,g.onerror=D}),Bt(r,"link",n),i.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=gs.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var zo=0;function Yg(e,t){return e.stylesheets&&e.count===0&&ps(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var n=setTimeout(function(){if(e.stylesheets&&ps(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&zo===0&&(zo=62500*Rg());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ps(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>zo?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(s)}}:null}function gs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ps(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ms=null;function ps(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ms=new Map,t.forEach(Ig,e),ms=null,gs.call(e))}function Ig(e,t){if(!(t.state.loading&4)){var i=ms.get(e);if(i)var n=i.get(null);else{i=new Map,ms.set(e,i);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var g=s[r];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),n=g)}n&&i.set(null,n)}s=t.instance,g=s.getAttribute("data-precedence"),r=i.get(g)||n,r===n&&i.set(null,s),i.set(g,s),this.count++,n=gs.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),r?r.parentNode.insertBefore(s,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var Ja={$$typeof:K,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function Qg(e,t,i,n,s,r,g,w,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gn(0),this.hiddenUpdates=gn(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Tf(e,t,i,n,s,r,g,w,D,L,Z,W){return e=new Qg(e,t,i,g,D,L,Z,W,w),t=1,r===!0&&(t|=24),r=Qt(3,null,null,t),e.current=r,r.stateNode=e,t=rr(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:n,isDehydrated:i,cache:t},hr(r),e}function Sf(e){return e?(e=qn,e):qn}function wf(e,t,i,n,s,r){s=Sf(s),n.context===null?n.context=s:n.pendingContext=s,n=Qi(t),n.payload={element:i},r=r===void 0?null:r,r!==null&&(n.callback=r),i=Wi(e,n,t),i!==null&&(Xt(i,e,t),Oa(i,e,t))}function xf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Oo(e,t){xf(e,t),(e=e.alternate)&&xf(e,t)}function Ef(e){if(e.tag===13||e.tag===31){var t=Sn(e,67108864);t!==null&&Xt(t,e,67108864),Oo(e,67108864)}}function bf(e){if(e.tag===13||e.tag===31){var t=ei();t=pn(t);var i=Sn(e,t);i!==null&&Xt(i,e,t),Oo(e,t)}}var vs=!0;function Wg(e,t,i,n){var s=G.T;G.T=null;var r=ae.p;try{ae.p=2,Ao(e,t,i,n)}finally{ae.p=r,G.T=s}}function Kg(e,t,i,n){var s=G.T;G.T=null;var r=ae.p;try{ae.p=8,Ao(e,t,i,n)}finally{ae.p=r,G.T=s}}function Ao(e,t,i,n){if(vs){var s=Mo(n);if(s===null)vo(e,t,n,ys,i),Cf(e,n);else if($g(s,e,t,i,n))n.stopPropagation();else if(Cf(e,n),t&4&&-1<Jg.indexOf(e)){for(;s!==null;){var r=at(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var g=ii(r.pendingLanes);if(g!==0){var w=r;for(w.pendingLanes|=2,w.entangledLanes|=2;g;){var D=1<<31-De(g);w.entanglements[1]|=D,g&=~D}wi(r),(Qe&6)===0&&(es=Re()+500,Xa(0))}}break;case 31:case 13:w=Sn(r,2),w!==null&&Xt(w,r,2),is(),Oo(r,2)}if(r=Mo(n),r===null&&vo(e,t,n,ys,i),r===s)break;s=r}s!==null&&n.stopPropagation()}else vo(e,t,n,null,i)}}function Mo(e){return e=Hs(e),Ho(e)}var ys=null;function Ho(e){if(ys=null,e=Me(e),e!==null){var t=f(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=p(t),e!==null)return e;e=null}else if(i===31){if(e=h(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ys=e,null}function _f(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ge()){case Ie:return 2;case pe:return 8;case Ke:case T:return 32;case y:return 268435456;default:return 32}default:return 32}}var No=!1,on=null,un=null,cn=null,$a=new Map,el=new Map,hn=[],Jg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cf(e,t){switch(e){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":$a.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":el.delete(t.pointerId)}}function tl(e,t,i,n,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:r,targetContainers:[s]},t!==null&&(t=at(t),t!==null&&Ef(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function $g(e,t,i,n,s){switch(t){case"focusin":return on=tl(on,e,t,i,n,s),!0;case"dragenter":return un=tl(un,e,t,i,n,s),!0;case"mouseover":return cn=tl(cn,e,t,i,n,s),!0;case"pointerover":var r=s.pointerId;return $a.set(r,tl($a.get(r)||null,e,t,i,n,s)),!0;case"gotpointercapture":return r=s.pointerId,el.set(r,tl(el.get(r)||null,e,t,i,n,s)),!0}return!1}function Rf(e){var t=Me(e.target);if(t!==null){var i=f(t);if(i!==null){if(t=i.tag,t===13){if(t=p(i),t!==null){e.blockedOn=t,ul(e.priority,function(){bf(i)});return}}else if(t===31){if(t=h(i),t!==null){e.blockedOn=t,ul(e.priority,function(){bf(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ts(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Mo(e.nativeEvent);if(i===null){i=e.nativeEvent;var n=new i.constructor(i.type,i);Ms=n,i.target.dispatchEvent(n),Ms=null}else return t=at(i),t!==null&&Ef(t),e.blockedOn=i,!1;t.shift()}return!0}function Df(e,t,i){Ts(e)&&i.delete(t)}function em(){No=!1,on!==null&&Ts(on)&&(on=null),un!==null&&Ts(un)&&(un=null),cn!==null&&Ts(cn)&&(cn=null),$a.forEach(Df),el.forEach(Df)}function Ss(e,t){e.blockedOn===t&&(e.blockedOn=null,No||(No=!0,ne.unstable_scheduleCallback(ne.unstable_NormalPriority,em)))}var ws=null;function zf(e){ws!==e&&(ws=e,ne.unstable_scheduleCallback(ne.unstable_NormalPriority,function(){ws===e&&(ws=null);for(var t=0;t<e.length;t+=3){var i=e[t],n=e[t+1],s=e[t+2];if(typeof n!="function"){if(Ho(n||i)===null)continue;break}var r=at(i);r!==null&&(e.splice(t,3),t-=3,Ar(r,{pending:!0,data:s,method:i.method,action:n},n,s))}}))}function fa(e){function t(D){return Ss(D,e)}on!==null&&Ss(on,e),un!==null&&Ss(un,e),cn!==null&&Ss(cn,e),$a.forEach(t),el.forEach(t);for(var i=0;i<hn.length;i++){var n=hn[i];n.blockedOn===e&&(n.blockedOn=null)}for(;0<hn.length&&(i=hn[0],i.blockedOn===null);)Rf(i),i.blockedOn===null&&hn.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(n=0;n<i.length;n+=3){var s=i[n],r=i[n+1],g=s[At]||null;if(typeof r=="function")g||zf(i);else if(g){var w=null;if(r&&r.hasAttribute("formAction")){if(s=r,g=r[At]||null)w=g.formAction;else if(Ho(s)!==null)continue}else w=g.action;typeof w=="function"?i[n+1]=w:(i.splice(n,3),n-=3),zf(i)}}}function Of(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(g){return s=g})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),n||setTimeout(i,20)}function i(){if(!n&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function Bo(e){this._internalRoot=e}xs.prototype.render=Bo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var i=t.current,n=ei();wf(i,n,e,t,null,null)},xs.prototype.unmount=Bo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wf(e.current,2,null,e,null,null),is(),t[H]=null}};function xs(e){this._internalRoot=e}xs.prototype.unstable_scheduleHydration=function(e){if(e){var t=Rs();e={blockedOn:null,target:e,priority:t};for(var i=0;i<hn.length&&t!==0&&t<hn[i].priority;i++);hn.splice(i,0,e),i===0&&Rf(e)}};var Af=te.version;if(Af!=="19.2.0")throw Error(l(527,Af,"19.2.0"));ae.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=c(t),e=e!==null?d(e):null,e=e===null?null:e.stateNode,e};var tm={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Es=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Es.isDisabled&&Es.supportsFiber)try{q=Es.inject(tm),J=Es}catch{}}return nl.createRoot=function(e,t){if(!o(e))throw Error(l(299));var i=!1,n="",s=Pc,r=Uc,g=jc;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=Tf(e,1,!1,null,null,i,n,null,s,r,g,Of),e[H]=t.current,po(e),new Bo(t)},nl.hydrateRoot=function(e,t,i){if(!o(e))throw Error(l(299));var n=!1,s="",r=Pc,g=Uc,w=jc,D=null;return i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onUncaughtError!==void 0&&(r=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.formState!==void 0&&(D=i.formState)),t=Tf(e,1,!0,t,i??null,n,s,D,r,g,w,Of),t.context=Sf(null),i=t.current,n=ei(),n=pn(n),s=Qi(n),s.callback=null,Wi(i,s,n),i=n,t.current.lanes=i,mn(t,i),wi(t),e[H]=t.current,po(e),new xs(t)},nl.version="19.2.0",nl}var Gf;function fm(){if(Gf)return Uo.exports;Gf=1;function ne(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ne)}catch(te){console.error(te)}}return ne(),Uo.exports=hm(),Uo.exports}var dm=fm();const gm=qo(dm);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=ne=>ne.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pm=ne=>ne.replace(/^([A-Z])|[\s-_]+(\w)/g,(te,a,l)=>l?l.toUpperCase():a.toLowerCase()),qf=ne=>{const te=pm(ne);return te.charAt(0).toUpperCase()+te.slice(1)},Yf=(...ne)=>ne.filter((te,a,l)=>!!te&&te.trim()!==""&&l.indexOf(te)===a).join(" ").trim(),vm=ne=>{for(const te in ne)if(te.startsWith("aria-")||te==="role"||te==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ym={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=ve.forwardRef(({color:ne="currentColor",size:te=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:o="",children:f,iconNode:p,...h},u)=>ve.createElement("svg",{ref:u,...ym,width:te,height:te,stroke:ne,strokeWidth:l?Number(a)*24/Number(te):a,className:Yf("lucide",o),...!f&&!vm(h)&&{"aria-hidden":"true"},...h},[...p.map(([c,d])=>ve.createElement(c,d)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=(ne,te)=>{const a=ve.forwardRef(({className:l,...o},f)=>ve.createElement(Tm,{ref:f,iconNode:te,className:Yf(`lucide-${mm(qf(ne))}`,`lucide-${ne}`,l),...o}));return a.displayName=qf(ne),a};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Vf=ll("brain",Sm);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],xm=ll("database",wm);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bm=ll("eye",Em);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Zf=ll("layers",_m);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],kf=ll("loader-circle",Cm);var bs={exports:{}},Rm=bs.exports,Xf;function Dm(){return Xf||(Xf=1,(function(ne){//! openseadragon 4.1.1
//! Built on 2024-04-01
//! Git commit: v4.1.1-0-f90d9814
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function te(a){return new te.Viewer(a)}(function(a){a.version={versionStr:"4.1.1",major:parseInt("4",10),minor:parseInt("1",10),revision:parseInt("1",10)};var l={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},o=Object.prototype.toString,f=Object.prototype.hasOwnProperty;a.isFunction=function(p){return a.type(p)==="function"},a.isArray=Array.isArray||function(p){return a.type(p)==="array"},a.isWindow=function(p){return p&&typeof p=="object"&&"setInterval"in p},a.type=function(p){return p==null?String(p):l[o.call(p)]||"object"},a.isPlainObject=function(p){if(!p||te.type(p)!=="object"||p.nodeType||a.isWindow(p)||p.constructor&&!f.call(p,"constructor")&&!f.call(p.constructor.prototype,"isPrototypeOf"))return!1;var h;for(var u in p)h=u;return h===void 0||f.call(p,h)},a.isEmptyObject=function(p){for(var h in p)return!1;return!0},a.freezeObject=function(p){return Object.freeze?a.freezeObject=Object.freeze:a.freezeObject=function(h){return h},a.freezeObject(p)},a.supportsCanvas=(function(){var p=document.createElement("canvas");return!!(a.isFunction(p.getContext)&&p.getContext("2d"))})(),a.isCanvasTainted=function(p){var h=!1;try{p.getContext("2d").getImageData(0,0,1,1)}catch{h=!0}return h},a.supportsAddEventListener=(function(){return!!(document.documentElement.addEventListener&&document.addEventListener)})(),a.supportsRemoveEventListener=(function(){return!!(document.documentElement.removeEventListener&&document.removeEventListener)})(),a.supportsEventListenerOptions=(function(){var p=0;if(a.supportsAddEventListener)try{var h={get capture(){return p++,!1},get once(){return p++,!1},get passive(){return p++,!1}};window.addEventListener("test",null,h),window.removeEventListener("test",null,h)}catch{p=0}return p>=3})(),a.getCurrentPixelDensityRatio=function(){if(a.supportsCanvas){var p=document.createElement("canvas").getContext("2d"),h=window.devicePixelRatio||1,u=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return Math.max(h,1)/u}else return 1},a.pixelDensityRatio=a.getCurrentPixelDensityRatio()})(te),(function(a){a.extend=function(){var u,c,d,v,S,C,_=arguments[0]||{},O=arguments.length,R=!1,M=1;for(typeof _=="boolean"&&(R=_,_=arguments[1]||{},M=2),typeof _!="object"&&!te.isFunction(_)&&(_={}),O===M&&(_=this,--M);M<O;M++)if(u=arguments[M],u!==null||u!==void 0)for(c in u){var X=Object.getOwnPropertyDescriptor(u,c);if(X!==void 0){if(X.get||X.set){Object.defineProperty(_,c,X);continue}v=X.value}else{a.console.warn('Could not copy inherited property "'+c+'".');continue}_!==v&&(R&&v&&(te.isPlainObject(v)||(S=te.isArray(v)))?(d=_[c],S?(S=!1,C=d&&te.isArray(d)?d:[]):C=d&&te.isPlainObject(d)?d:{},_[c]=te.extend(R,C,v)):v!==void 0&&(_[c]=v))}return _};var l=function(){if(typeof navigator!="object")return!1;var u=navigator.userAgent;return typeof u!="string"?!1:u.indexOf("iPhone")!==-1||u.indexOf("iPad")!==-1||u.indexOf("iPod")!==-1};a.extend(a,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!1,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerDblClickDrag:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:l(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorElement:null,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,tileRetryMax:0,tileRetryDelay:2500,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},SIGNAL:"----seadragon----",delegate:function(u,c){return function(){var d=arguments;return d===void 0&&(d=[]),c.apply(u,d)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(u){return a._viewers.get(this.getElement(u))},getElement:function(u){return typeof u=="string"&&(u=document.getElementById(u)),u},getElementPosition:function(u){var c=new a.Point,d,v;for(u=a.getElement(u),d=a.getElementStyle(u).position==="fixed",v=h(u,d);v;)c.x+=u.offsetLeft,c.y+=u.offsetTop,d&&(c=c.plus(a.getPageScroll())),u=v,d=a.getElementStyle(u).position==="fixed",v=h(u,d);return c},getElementOffset:function(u){u=a.getElement(u);var c=u&&u.ownerDocument,d,v,S={top:0,left:0};return c?(d=c.documentElement,typeof u.getBoundingClientRect<"u"&&(S=u.getBoundingClientRect()),v=c===c.window?c:c.nodeType===9?c.defaultView||c.parentWindow:!1,new a.Point(S.left+(v.pageXOffset||d.scrollLeft)-(d.clientLeft||0),S.top+(v.pageYOffset||d.scrollTop)-(d.clientTop||0))):new a.Point},getElementSize:function(u){return u=a.getElement(u),new a.Point(u.clientWidth,u.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(u){return u=a.getElement(u),u.currentStyle}:function(u){return u=a.getElement(u),window.getComputedStyle(u,"")},getCssPropertyWithVendorPrefix:function(u){var c={};return a.getCssPropertyWithVendorPrefix=function(d){if(c[d]!==void 0)return c[d];var v=document.createElement("div").style,S=null;if(v[d]!==void 0)S=d;else for(var C=["Webkit","Moz","MS","O","webkit","moz","ms","o"],_=a.capitalizeFirstLetter(d),O=0;O<C.length;O++){var R=C[O]+_;if(v[R]!==void 0){S=R;break}}return c[d]=S,S},a.getCssPropertyWithVendorPrefix(u)},capitalizeFirstLetter:function(u){return u.charAt(0).toUpperCase()+u.slice(1)},positiveModulo:function(u,c){var d=u%c;return d<0&&(d+=c),d},pointInElement:function(u,c){u=a.getElement(u);var d=a.getElementOffset(u),v=a.getElementSize(u);return c.x>=d.x&&c.x<d.x+v.x&&c.y<d.y+v.y&&c.y>=d.y},getMousePosition:function(u){if(typeof u.pageX=="number")a.getMousePosition=function(c){var d=new a.Point;return d.x=c.pageX,d.y=c.pageY,d};else if(typeof u.clientX=="number")a.getMousePosition=function(c){var d=new a.Point;return d.x=c.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d.y=c.clientY+document.body.scrollTop+document.documentElement.scrollTop,d};else throw new Error("Unknown event mouse position, no known technique.");return a.getMousePosition(u)},getPageScroll:function(){var u=document.documentElement||{},c=document.body||{};if(typeof window.pageXOffset=="number")a.getPageScroll=function(){return new a.Point(window.pageXOffset,window.pageYOffset)};else if(c.scrollLeft||c.scrollTop)a.getPageScroll=function(){return new a.Point(document.body.scrollLeft,document.body.scrollTop)};else if(u.scrollLeft||u.scrollTop)a.getPageScroll=function(){return new a.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new a.Point(0,0);return a.getPageScroll()},setPageScroll:function(u){if(typeof window.scrollTo<"u")a.setPageScroll=function(v){window.scrollTo(v.x,v.y)};else{var c=a.getPageScroll();if(c.x===u.x&&c.y===u.y)return;document.body.scrollLeft=u.x,document.body.scrollTop=u.y;var d=a.getPageScroll();if(d.x!==c.x&&d.y!==c.y){a.setPageScroll=function(v){document.body.scrollLeft=v.x,document.body.scrollTop=v.y};return}if(document.documentElement.scrollLeft=u.x,document.documentElement.scrollTop=u.y,d=a.getPageScroll(),d.x!==c.x&&d.y!==c.y){a.setPageScroll=function(v){document.documentElement.scrollLeft=v.x,document.documentElement.scrollTop=v.y};return}a.setPageScroll=function(v){}}a.setPageScroll(u)},getWindowSize:function(){var u=document.documentElement||{},c=document.body||{};if(typeof window.innerWidth=="number")a.getWindowSize=function(){return new a.Point(window.innerWidth,window.innerHeight)};else if(u.clientWidth||u.clientHeight)a.getWindowSize=function(){return new a.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(c.clientWidth||c.clientHeight)a.getWindowSize=function(){return new a.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return a.getWindowSize()},makeCenteredNode:function(u){u=a.getElement(u);var c=[a.makeNeutralElement("div"),a.makeNeutralElement("div"),a.makeNeutralElement("div")];return a.extend(c[0].style,{display:"table",height:"100%",width:"100%"}),a.extend(c[1].style,{display:"table-row"}),a.extend(c[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),c[0].appendChild(c[1]),c[1].appendChild(c[2]),c[2].appendChild(u),c[0]},makeNeutralElement:function(u){var c=document.createElement(u),d=c.style;return d.background="transparent none",d.border="none",d.margin="0px",d.padding="0px",d.position="static",c},now:function(){return Date.now?a.now=Date.now:a.now=function(){return new Date().getTime()},a.now()},makeTransparentImage:function(u){var c=a.makeNeutralElement("img");return c.src=u,c},setElementOpacity:function(u,c,d){var v,S;u=a.getElement(u),d&&!a.Browser.alpha&&(c=Math.round(c)),a.Browser.opacity?u.style.opacity=c<1?c:"":c<1?(v=Math.round(100*c),S="alpha(opacity="+v+")",u.style.filter=S):u.style.filter=""},setElementTouchActionNone:function(u){u=a.getElement(u),typeof u.style.touchAction<"u"?u.style.touchAction="none":typeof u.style.msTouchAction<"u"&&(u.style.msTouchAction="none")},setElementPointerEvents:function(u,c){u=a.getElement(u),typeof u.style<"u"&&typeof u.style.pointerEvents<"u"&&(u.style.pointerEvents=c)},setElementPointerEventsNone:function(u){a.setElementPointerEvents(u,"none")},addClass:function(u,c){u=a.getElement(u),u.className?(" "+u.className+" ").indexOf(" "+c+" ")===-1&&(u.className+=" "+c):u.className=c},indexOf:function(u,c,d){return Array.prototype.indexOf?this.indexOf=function(v,S,C){return v.indexOf(S,C)}:this.indexOf=function(v,S,C){var _,O=C||0,R;if(!v)throw new TypeError;if(R=v.length,R===0||O>=R)return-1;for(O<0&&(O=R-Math.abs(O)),_=O;_<R;_++)if(v[_]===S)return _;return-1},this.indexOf(u,c,d)},removeClass:function(u,c){var d,v=[],S;for(u=a.getElement(u),d=u.className.split(/\s+/),S=0;S<d.length;S++)d[S]&&d[S]!==c&&v.push(d[S]);u.className=v.join(" ")},normalizeEventListenerOptions:function(u){var c;return typeof u<"u"?typeof u=="boolean"?c=a.supportsEventListenerOptions?{capture:u}:u:c=a.supportsEventListenerOptions?u:typeof u.capture<"u"?u.capture:!1:c=a.supportsEventListenerOptions?{capture:!1}:!1,c},addEvent:(function(){if(a.supportsAddEventListener)return function(u,c,d,v){v=a.normalizeEventListenerOptions(v),u=a.getElement(u),u.addEventListener(c,d,v)};if(document.documentElement.attachEvent&&document.attachEvent)return function(u,c,d){u=a.getElement(u),u.attachEvent("on"+c,d)};throw new Error("No known event model.")})(),removeEvent:(function(){if(a.supportsRemoveEventListener)return function(u,c,d,v){v=a.normalizeEventListenerOptions(v),u=a.getElement(u),u.removeEventListener(c,d,v)};if(document.documentElement.detachEvent&&document.detachEvent)return function(u,c,d){u=a.getElement(u),u.detachEvent("on"+c,d)};throw new Error("No known event model.")})(),cancelEvent:function(u){u.preventDefault()},eventIsCanceled:function(u){return u.defaultPrevented},stopEvent:function(u){u.stopPropagation()},createCallback:function(u,c){var d=[],v;for(v=2;v<arguments.length;v++)d.push(arguments[v]);return function(){var S=d.concat([]),C;for(C=0;C<arguments.length;C++)S.push(arguments[C]);return c.apply(u,S)}},getUrlParameter:function(u){var c=p[u];return c||null},getUrlProtocol:function(u){var c=u.match(/^([a-z]+:)\/\//i);return c===null?window.location.protocol:c[1].toLowerCase()},createAjaxRequest:function(u){var c;try{c=!!new ActiveXObject("Microsoft.XMLHTTP")}catch{c=!1}if(c)window.XMLHttpRequest?a.createAjaxRequest=function(d){return d?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:a.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)a.createAjaxRequest=function(){return new XMLHttpRequest};else throw new Error("Browser doesn't support XMLHttpRequest.");return a.createAjaxRequest(u)},makeAjaxRequest:function(u,c,d){var v,S,C,_;a.isPlainObject(u)&&(c=u.success,d=u.error,v=u.withCredentials,S=u.headers,C=u.responseType||null,_=u.postData||null,u=u.url);var O=a.getUrlProtocol(u),R=a.createAjaxRequest(O==="file:");if(!a.isFunction(c))throw new Error("makeAjaxRequest requires a success callback");R.onreadystatechange=function(){R.readyState===4&&(R.onreadystatechange=function(){},R.status>=200&&R.status<300||R.status===0&&O!=="http:"&&O!=="https:"?c(R):a.isFunction(d)?d(R):a.console.error("AJAX request returned %d: %s",R.status,u))};var M=_?"POST":"GET";try{if(R.open(M,u,!0),C&&(R.responseType=C),S)for(var X in S)Object.prototype.hasOwnProperty.call(S,X)&&S[X]&&R.setRequestHeader(X,S[X]);v&&(R.withCredentials=!0),R.send(_)}catch(K){a.console.error("%s while making AJAX request: %s",K.name,K.message),R.onreadystatechange=function(){},a.isFunction(d)&&d(R,K)}return R},jsonp:function(u){var c,d=u.url,v=document.head||document.getElementsByTagName("head")[0]||document.documentElement,S=u.callbackName||"openseadragon"+a.now(),C=window[S],_="$1"+S+"$2",O=u.param||"callback",R=u.callback;d=d.replace(/(=)\?(&|$)|\?\?/i,_),d+=(/\?/.test(d)?"&":"?")+O+"="+S,window[S]=function(M){if(C)window[S]=C;else try{delete window[S]}catch{}R&&a.isFunction(R)&&R(M)},c=document.createElement("script"),(u.async!==void 0||u.async!==!1)&&(c.async="async"),u.scriptCharset&&(c.charset=u.scriptCharset),c.src=d,c.onload=c.onreadystatechange=function(M,X){(X||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,v&&c.parentNode&&v.removeChild(c),c=void 0)},v.insertBefore(c,v.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(u){if(window.DOMParser)a.parseXml=function(c){var d=null,v;return v=new DOMParser,d=v.parseFromString(c,"text/xml"),d};else if(window.ActiveXObject)a.parseXml=function(c){var d=null;return d=new ActiveXObject("Microsoft.XMLDOM"),d.async=!1,d.loadXML(c),d};else throw new Error("Browser doesn't support XML DOM.");return a.parseXml(u)},parseJSON:function(u){return a.parseJSON=window.JSON.parse,a.parseJSON(u)},imageFormatSupported:function(u){return u=u||"",!!f[u.toLowerCase()]},setImageFormatsSupported:function(u){a.extend(f,u)}});var o=function(u){};a.console=window.console||{log:o,debug:o,info:o,warn:o,error:o,assert:o},a.Browser={vendor:a.BROWSERS.UNKNOWN,version:0,alpha:!0};var f={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},p={};(function(){var u=navigator.appVersion,c=navigator.userAgent,d;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(a.Browser.vendor=a.BROWSERS.IE,a.Browser.version=parseFloat(c.substring(c.indexOf("MSIE")+5,c.indexOf(";",c.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(c.indexOf("Edge")>=0?(a.Browser.vendor=a.BROWSERS.EDGE,a.Browser.version=parseFloat(c.substring(c.indexOf("Edge")+5))):c.indexOf("Edg")>=0?(a.Browser.vendor=a.BROWSERS.CHROMEEDGE,a.Browser.version=parseFloat(c.substring(c.indexOf("Edg")+4))):c.indexOf("Firefox")>=0?(a.Browser.vendor=a.BROWSERS.FIREFOX,a.Browser.version=parseFloat(c.substring(c.indexOf("Firefox")+8))):c.indexOf("Safari")>=0?(a.Browser.vendor=c.indexOf("Chrome")>=0?a.BROWSERS.CHROME:a.BROWSERS.SAFARI,a.Browser.version=parseFloat(c.substring(c.substring(0,c.indexOf("Safari")).lastIndexOf("/")+1,c.indexOf("Safari")))):(d=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),d.exec(c)!==null&&(a.Browser.vendor=a.BROWSERS.IE,a.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":a.Browser.vendor=a.BROWSERS.OPERA,a.Browser.version=parseFloat(u);break}var v=window.location.search.substring(1),S=v.split("&"),C,_,O;for(O=0;O<S.length;O++)if(C=S[O],_=C.indexOf("="),_>0){var R=C.substring(0,_),M=C.substring(_+1);try{p[R]=decodeURIComponent(M)}catch{a.console.error("Ignoring malformed URL parameter: %s=%s",R,M)}}a.Browser.alpha=!(a.Browser.vendor===a.BROWSERS.CHROME&&a.Browser.version<2),a.Browser.opacity=!0,a.Browser.vendor===a.BROWSERS.IE&&a.Browser.version<11&&a.console.error("Internet Explorer versions < 11 are not supported by OpenSeadragon")})(),(function(u){var c=u.requestAnimationFrame||u.mozRequestAnimationFrame||u.webkitRequestAnimationFrame||u.msRequestAnimationFrame,d=u.cancelAnimationFrame||u.mozCancelAnimationFrame||u.webkitCancelAnimationFrame||u.msCancelAnimationFrame;if(c&&d)a.requestAnimationFrame=function(){return c.apply(u,arguments)},a.cancelAnimationFrame=function(){return d.apply(u,arguments)};else{var v=[],S=[],C=0,_;a.requestAnimationFrame=function(O){return v.push([++C,O]),_||(_=setInterval(function(){if(v.length){var R=a.now(),M=S;for(S=v,v=M;S.length;)S.shift()[1](R)}else clearInterval(_),_=void 0},1e3/50)),C},a.cancelAnimationFrame=function(O){var R,M;for(R=0,M=v.length;R<M;R+=1)if(v[R][0]===O){v.splice(R,1);return}for(R=0,M=S.length;R<M;R+=1)if(S[R][0]===O){S.splice(R,1);return}}}})(window);function h(u,c){return c&&u!==document.body?document.body:u.offsetParent}})(te),(function(a,l){ne.exports?ne.exports=l():a.OpenSeadragon=l()})(Rm,function(){return te}),(function(a){var l={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(l.supportsFullScreen=!0,l.getFullScreenElement=function(){return document.fullscreenElement},l.requestFullScreen=function(o){return o.requestFullscreen()},l.exitFullScreen=function(){document.exitFullscreen()},l.fullScreenEventName="fullscreenchange",l.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(l.supportsFullScreen=!0,l.getFullScreenElement=function(){return document.msFullscreenElement},l.requestFullScreen=function(o){return o.msRequestFullscreen()},l.exitFullScreen=function(){document.msExitFullscreen()},l.fullScreenEventName="MSFullscreenChange",l.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(l.supportsFullScreen=!0,l.getFullScreenElement=function(){return document.webkitFullscreenElement},l.requestFullScreen=function(o){return o.webkitRequestFullscreen()},l.exitFullScreen=function(){document.webkitExitFullscreen()},l.fullScreenEventName="webkitfullscreenchange",l.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(l.supportsFullScreen=!0,l.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},l.requestFullScreen=function(o){return o.webkitRequestFullScreen()},l.exitFullScreen=function(){document.webkitCancelFullScreen()},l.fullScreenEventName="webkitfullscreenchange",l.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(l.supportsFullScreen=!0,l.getFullScreenElement=function(){return document.mozFullScreenElement},l.requestFullScreen=function(o){return o.mozRequestFullScreen()},l.exitFullScreen=function(){document.mozCancelFullScreen()},l.fullScreenEventName="mozfullscreenchange",l.fullScreenErrorEventName="mozfullscreenerror"),l.isFullScreen=function(){return l.getFullScreenElement()!==null},l.cancelFullScreen=function(){a.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),l.exitFullScreen()},a.extend(a,l)})(te),(function(a){a.EventSource=function(){this.events={}},a.EventSource.prototype={addOnceHandler:function(l,o,f,p,h){var u=this;p=p||1;var c=0,d=function(v){return c++,c===p&&u.removeHandler(l,d),o(v)};this.addHandler(l,d,f,h)},addHandler:function(l,o,f,p){var h=this.events[l];if(h||(this.events[l]=h=[]),o&&a.isFunction(o)){var u=h.length,c={handler:o,userData:f||null,priority:p||0};for(h[u]=c;u>0&&h[u-1].priority<h[u].priority;)h[u]=h[u-1],h[u-1]=c,u--}},removeHandler:function(l,o){var f=this.events[l],p=[],h;if(f&&a.isArray(f)){for(h=0;h<f.length;h++)f[h].handler!==o&&p.push(f[h]);this.events[l]=p}},numberOfHandlers:function(l){var o=this.events[l];return o?o.length:0},removeAllHandlers:function(l){if(l)this.events[l]=[];else for(var o in this.events)this.events[o]=[]},getHandler:function(l){var o=this.events[l];return!o||!o.length?null:(o=o.length===1?[o[0]]:Array.apply(null,o),function(f,p){var h,u=o.length;for(h=0;h<u;h++)o[h]&&(p.eventSource=f,p.userData=o[h].userData,o[h].handler(p))})},raiseEvent:function(l,o){var f=this.getHandler(l);if(f)return f(this,o||{})}}})(te),(function(a){var l={};a.MouseTracker=function(T){var y=arguments;a.isPlainObject(T)||(T={element:y[0],clickTimeThreshold:y[1],clickDistThreshold:y[2]}),this.hash=Math.random(),this.element=a.getElement(T.element),this.clickTimeThreshold=T.clickTimeThreshold||a.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=T.clickDistThreshold||a.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=T.dblClickTimeThreshold||a.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=T.dblClickDistThreshold||a.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=T.userData||null,this.stopDelay=T.stopDelay||50,this.preProcessEventHandler=T.preProcessEventHandler||null,this.contextMenuHandler=T.contextMenuHandler||null,this.enterHandler=T.enterHandler||null,this.leaveHandler=T.leaveHandler||null,this.exitHandler=T.exitHandler||null,this.overHandler=T.overHandler||null,this.outHandler=T.outHandler||null,this.pressHandler=T.pressHandler||null,this.nonPrimaryPressHandler=T.nonPrimaryPressHandler||null,this.releaseHandler=T.releaseHandler||null,this.nonPrimaryReleaseHandler=T.nonPrimaryReleaseHandler||null,this.moveHandler=T.moveHandler||null,this.scrollHandler=T.scrollHandler||null,this.clickHandler=T.clickHandler||null,this.dblClickHandler=T.dblClickHandler||null,this.dragHandler=T.dragHandler||null,this.dragEndHandler=T.dragEndHandler||null,this.pinchHandler=T.pinchHandler||null,this.stopHandler=T.stopHandler||null,this.keyDownHandler=T.keyDownHandler||null,this.keyUpHandler=T.keyUpHandler||null,this.keyHandler=T.keyHandler||null,this.focusHandler=T.focusHandler||null,this.blurHandler=T.blurHandler||null;var x=this;l[this.hash]={click:function(b){K(x,b)},dblclick:function(b){ce(x,b)},keydown:function(b){Ce(x,b)},keyup:function(b){Te(x,b)},keypress:function(b){V(x,b)},focus:function(b){we(x,b)},blur:function(b){ze(x,b)},contextmenu:function(b){ct(x,b)},wheel:function(b){Pe(x,b)},mousewheel:function(b){Fe(x,b)},DOMMouseScroll:function(b){Fe(x,b)},MozMousePixelScroll:function(b){Fe(x,b)},losecapture:function(b){dt(x,b)},mouseenter:function(b){Q(x,b)},mouseleave:function(b){ie(x,b)},mouseover:function(b){xe(x,b)},mouseout:function(b){_e(x,b)},mousedown:function(b){Be(x,b)},mouseup:function(b){We(x,b)},mousemove:function(b){Pt(x,b)},touchstart:function(b){_t(x,b)},touchend:function(b){G(x,b)},touchmove:function(b){ae(x,b)},touchcancel:function(b){me(x,b)},gesturestart:function(b){Ne(x,b)},gesturechange:function(b){be(x,b)},gotpointercapture:function(b){z(x,b)},lostpointercapture:function(b){I(x,b)},pointerenter:function(b){Q(x,b)},pointerleave:function(b){ie(x,b)},pointerover:function(b){xe(x,b)},pointerout:function(b){_e(x,b)},pointerdown:function(b){Be(x,b)},pointerup:function(b){We(x,b)},pointermove:function(b){Pt(x,b)},pointercancel:function(b){Tt(x,b)},pointerupcaptured:function(b){ke(x,b)},pointermovecaptured:function(b){rt(x,b)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,a.MouseTracker.havePointerEvents&&a.setElementPointerEvents(this.element,"auto"),this.exitHandler&&a.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),T.startDisabled||this.setTracking(!0)},a.MouseTracker.prototype={destroy:function(){u(this),this.element=null,l[this.hash]=null,delete l[this.hash]},isTracking:function(){return l[this.hash].tracking},setTracking:function(T){return T?h(this):u(this),this},getActivePointersListByType:function(T){var y=l[this.hash],x,b=y.activePointersLists.length,q;for(x=0;x<b;x++)if(y.activePointersLists[x].type===T)return y.activePointersLists[x];return q=new a.MouseTracker.GesturePointList(T),y.activePointersLists.push(q),q},getActivePointerCount:function(){var T=l[this.hash],y,x=T.activePointersLists.length,b=0;for(y=0;y<x;y++)b+=T.activePointersLists[y].getLength();return b},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var o=(function(){try{return window.self!==window.top}catch{return!0}})();function f(T){try{return T.addEventListener&&T.removeEventListener}catch{return!1}}a.MouseTracker.gesturePointVelocityTracker=(function(){var T=[],y=0,x=0,b=function(De,de){return De.hash.toString()+de.type+de.id.toString()},q=function(){var De,de=T.length,Ot,gt,Yt=a.now(),pi,xi,ii;for(pi=Yt-x,x=Yt,De=0;De<de;De++)Ot=T[De],gt=Ot.gPoint,gt.direction=Math.atan2(gt.currentPos.y-Ot.lastPos.y,gt.currentPos.x-Ot.lastPos.x),xi=Ot.lastPos.distanceTo(gt.currentPos),Ot.lastPos=gt.currentPos,ii=1e3*xi/(pi+1),gt.speed=.75*ii+.25*gt.speed},J=function(De,de){var Ot=b(De,de);T.push({guid:Ot,gPoint:de,lastPos:de.currentPos}),T.length===1&&(x=a.now(),y=window.setInterval(q,50))},he=function(De,de){var Ot=b(De,de),gt,Yt=T.length;for(gt=0;gt<Yt;gt++)if(T[gt].guid===Ot){T.splice(gt,1),Yt--,Yt===0&&window.clearInterval(y);break}};return{addPoint:J,removePoint:he}})(),a.MouseTracker.captureElement=document,a.MouseTracker.wheelEventName=a.Browser.vendor===a.BROWSERS.IE&&a.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",a.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",a.MouseTracker.wheelEventName],a.MouseTracker.wheelEventName==="DOMMouseScroll"&&a.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(a.MouseTracker.havePointerEvents=!0,a.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),a.MouseTracker.havePointerCapture=(function(){var T=document.createElement("div");return a.isFunction(T.setPointerCapture)&&a.isFunction(T.releasePointerCapture)})(),a.MouseTracker.havePointerCapture&&a.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(a.MouseTracker.havePointerEvents=!1,a.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),a.MouseTracker.mousePointerId="legacy-mouse",a.MouseTracker.havePointerCapture=(function(){var T=document.createElement("div");return a.isFunction(T.setCapture)&&a.isFunction(T.releaseCapture)})(),a.MouseTracker.havePointerCapture&&a.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&a.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&a.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),a.MouseTracker.GesturePointList=function(T){this._gPoints=[],this.type=T,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},a.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(T){return this._gPoints.push(T)},removeById:function(T){var y,x=this._gPoints.length;for(y=0;y<x;y++)if(this._gPoints[y].id===T){this._gPoints.splice(y,1);break}return this._gPoints.length},getByIndex:function(T){return T<this._gPoints.length?this._gPoints[T]:null},getById:function(T){var y,x=this._gPoints.length;for(y=0;y<x;y++)if(this._gPoints[y].id===T)return this._gPoints[y];return null},getPrimary:function(T){var y,x=this._gPoints.length;for(y=0;y<x;y++)if(this._gPoints[y].isPrimary)return this._gPoints[y];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(a.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function p(T){var y=l[T.hash],x,b,q,J,he,De=y.activePointersLists.length;for(x=0;x<De;x++)if(q=y.activePointersLists[x],q.getLength()>0){for(he=[],J=q.asArray(),b=0;b<J.length;b++)he.push(J[b]);for(b=0;b<he.length;b++)St(T,q,he[b])}for(x=0;x<De;x++)y.activePointersLists.pop();y.sentDragEvent=!1}function h(T){var y=l[T.hash],x,b;if(!y.tracking){for(b=0;b<a.MouseTracker.subscribeEvents.length;b++)x=a.MouseTracker.subscribeEvents[b],a.addEvent(T.element,x,y[x],x===a.MouseTracker.wheelEventName?{passive:!1,capture:!1}:!1);p(T),y.tracking=!0}}function u(T){var y=l[T.hash],x,b;if(y.tracking){for(b=0;b<a.MouseTracker.subscribeEvents.length;b++)x=a.MouseTracker.subscribeEvents[b],a.removeEvent(T.element,x,y[x],!1);p(T),y.tracking=!1}}function c(T,y){var x=l[T.hash];if(y==="pointerevent")return{upName:"pointerup",upHandler:x.pointerupcaptured,moveName:"pointermove",moveHandler:x.pointermovecaptured};if(y==="mouse")return{upName:"pointerup",upHandler:x.pointerupcaptured,moveName:"pointermove",moveHandler:x.pointermovecaptured};if(y==="touch")return{upName:"touchend",upHandler:x.touchendcaptured,moveName:"touchmove",moveHandler:x.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function d(T,y){var x;if(a.MouseTracker.havePointerCapture)if(a.MouseTracker.havePointerEvents)try{T.element.setPointerCapture(y.id)}catch{a.console.warn("setPointerCapture() called on invalid pointer ID");return}else T.element.setCapture(!0);else x=c(T,a.MouseTracker.havePointerEvents?"pointerevent":y.type),o&&f(window.top)&&a.addEvent(window.top,x.upName,x.upHandler,!0),a.addEvent(a.MouseTracker.captureElement,x.upName,x.upHandler,!0),a.addEvent(a.MouseTracker.captureElement,x.moveName,x.moveHandler,!0);U(T,y,!0)}function v(T,y){var x,b,q;if(a.MouseTracker.havePointerCapture)if(a.MouseTracker.havePointerEvents){if(b=T.getActivePointersListByType(y.type),q=b.getById(y.id),!q||!q.captured)return;try{T.element.releasePointerCapture(y.id)}catch{}}else T.element.releaseCapture();else x=c(T,a.MouseTracker.havePointerEvents?"pointerevent":y.type),o&&f(window.top)&&a.removeEvent(window.top,x.upName,x.upHandler,!0),a.removeEvent(a.MouseTracker.captureElement,x.moveName,x.moveHandler,!0),a.removeEvent(a.MouseTracker.captureElement,x.upName,x.upHandler,!0);U(T,y,!1)}function S(T){return a.MouseTracker.havePointerEvents?T.pointerId:a.MouseTracker.mousePointerId}function C(T){return a.MouseTracker.havePointerEvents?T.pointerType||(a.Browser.vendor===a.BROWSERS.IE?"mouse":""):"mouse"}function _(T){return a.MouseTracker.havePointerEvents?T.isPrimary:!0}function O(T){return a.getMousePosition(T)}function R(T,y){return M(O(T),y)}function M(T,y){var x=a.getElementOffset(y);return T.minus(x)}function X(T,y){return new a.Point((T.x+y.x)/2,(T.y+y.y)/2)}function K(T,y){var x={originalEvent:y,eventType:"click",pointerType:"mouse",isEmulated:!1};E(T,x),x.preventDefault&&!x.defaultPrevented&&a.cancelEvent(y),x.stopPropagation&&a.stopEvent(y)}function ce(T,y){var x={originalEvent:y,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};E(T,x),x.preventDefault&&!x.defaultPrevented&&a.cancelEvent(y),x.stopPropagation&&a.stopEvent(y)}function Ce(T,y){var x=null,b={originalEvent:y,eventType:"keydown",pointerType:"",isEmulated:!1};E(T,b),T.keyDownHandler&&!b.preventGesture&&!b.defaultPrevented&&(x={eventSource:T,keyCode:y.keyCode?y.keyCode:y.charCode,ctrl:y.ctrlKey,shift:y.shiftKey,alt:y.altKey,meta:y.metaKey,originalEvent:y,preventDefault:b.preventDefault||b.defaultPrevented,userData:T.userData},T.keyDownHandler(x)),(x&&x.preventDefault||b.preventDefault&&!b.defaultPrevented)&&a.cancelEvent(y),b.stopPropagation&&a.stopEvent(y)}function Te(T,y){var x=null,b={originalEvent:y,eventType:"keyup",pointerType:"",isEmulated:!1};E(T,b),T.keyUpHandler&&!b.preventGesture&&!b.defaultPrevented&&(x={eventSource:T,keyCode:y.keyCode?y.keyCode:y.charCode,ctrl:y.ctrlKey,shift:y.shiftKey,alt:y.altKey,meta:y.metaKey,originalEvent:y,preventDefault:b.preventDefault||b.defaultPrevented,userData:T.userData},T.keyUpHandler(x)),(x&&x.preventDefault||b.preventDefault&&!b.defaultPrevented)&&a.cancelEvent(y),b.stopPropagation&&a.stopEvent(y)}function V(T,y){var x=null,b={originalEvent:y,eventType:"keypress",pointerType:"",isEmulated:!1};E(T,b),T.keyHandler&&!b.preventGesture&&!b.defaultPrevented&&(x={eventSource:T,keyCode:y.keyCode?y.keyCode:y.charCode,ctrl:y.ctrlKey,shift:y.shiftKey,alt:y.altKey,meta:y.metaKey,originalEvent:y,preventDefault:b.preventDefault||b.defaultPrevented,userData:T.userData},T.keyHandler(x)),(x&&x.preventDefault||b.preventDefault&&!b.defaultPrevented)&&a.cancelEvent(y),b.stopPropagation&&a.stopEvent(y)}function we(T,y){var x={originalEvent:y,eventType:"focus",pointerType:"",isEmulated:!1};E(T,x),T.focusHandler&&!x.preventGesture&&T.focusHandler({eventSource:T,originalEvent:y,userData:T.userData})}function ze(T,y){var x={originalEvent:y,eventType:"blur",pointerType:"",isEmulated:!1};E(T,x),T.blurHandler&&!x.preventGesture&&T.blurHandler({eventSource:T,originalEvent:y,userData:T.userData})}function ct(T,y){var x=null,b={originalEvent:y,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};E(T,b),T.contextMenuHandler&&!b.preventGesture&&!b.defaultPrevented&&(x={eventSource:T,position:M(O(y),T.element),originalEvent:b.originalEvent,preventDefault:b.preventDefault||b.defaultPrevented,userData:T.userData},T.contextMenuHandler(x)),(x&&x.preventDefault||b.preventDefault&&!b.defaultPrevented)&&a.cancelEvent(y),b.stopPropagation&&a.stopEvent(y)}function Pe(T,y){Je(T,y,y)}function Fe(T,y){var x={target:y.target||y.srcElement,type:"wheel",shiftKey:y.shiftKey||!1,clientX:y.clientX,clientY:y.clientY,pageX:y.pageX?y.pageX:y.clientX,pageY:y.pageY?y.pageY:y.clientY,deltaMode:y.type==="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};a.MouseTracker.wheelEventName==="mousewheel"?x.deltaY=-y.wheelDelta/a.DEFAULT_SETTINGS.pixelsPerWheelLine:x.deltaY=y.detail,Je(T,x,y)}function Je(T,y,x){var b=0,q,J=null;b=y.deltaY<0?1:-1,q={originalEvent:y,eventType:"wheel",pointerType:"mouse",isEmulated:y!==x},E(T,q),T.scrollHandler&&!q.preventGesture&&!q.defaultPrevented&&(J={eventSource:T,pointerType:"mouse",position:R(y,T.element),scroll:b,shift:y.shiftKey,isTouchEvent:!1,originalEvent:x,preventDefault:q.preventDefault||q.defaultPrevented,userData:T.userData},T.scrollHandler(J)),q.stopPropagation&&a.stopEvent(x),(J&&J.preventDefault||q.preventDefault&&!q.defaultPrevented)&&a.cancelEvent(x)}function dt(T,y){var x={id:a.MouseTracker.mousePointerId,type:"mouse"},b={originalEvent:y,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};E(T,b),y.target===T.element&&U(T,x,!1),b.stopPropagation&&a.stopEvent(y)}function _t(T,y){var x,b,q=y.changedTouches.length,J,he=T.getActivePointersListByType("touch");x=a.now(),he.getLength()>y.touches.length-q&&a.console.warn("Tracked touch contact count doesn't match event.touches.length");var De={originalEvent:y,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(E(T,De),b=0;b<q;b++)J={id:y.changedTouches[b].identifier,type:"touch",isPrimary:he.getLength()===0,currentPos:O(y.changedTouches[b]),currentTime:x},$(T,De,J),Re(T,De,J,0),U(T,J,!0);De.preventDefault&&!De.defaultPrevented&&a.cancelEvent(y),De.stopPropagation&&a.stopEvent(y)}function G(T,y){var x,b,q=y.changedTouches.length,J;x=a.now();var he={originalEvent:y,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(E(T,he),b=0;b<q;b++)J={id:y.changedTouches[b].identifier,type:"touch",currentPos:O(y.changedTouches[b]),currentTime:x},Ge(T,he,J,0),U(T,J,!1),ee(T,he,J);he.preventDefault&&!he.defaultPrevented&&a.cancelEvent(y),he.stopPropagation&&a.stopEvent(y)}function ae(T,y){var x,b,q=y.changedTouches.length,J;x=a.now();var he={originalEvent:y,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(E(T,he),b=0;b<q;b++)J={id:y.changedTouches[b].identifier,type:"touch",currentPos:O(y.changedTouches[b]),currentTime:x},Ie(T,he,J);he.preventDefault&&!he.defaultPrevented&&a.cancelEvent(y),he.stopPropagation&&a.stopEvent(y)}function me(T,y){var x=y.changedTouches.length,b,q,J={originalEvent:y,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(E(T,J),b=0;b<x;b++)q={id:y.changedTouches[b].identifier,type:"touch"},pe(T,J,q);J.stopPropagation&&a.stopEvent(y)}function Ne(T,y){return a.eventIsCanceled(y)||y.preventDefault(),!1}function be(T,y){return a.eventIsCanceled(y)||y.preventDefault(),!1}function z(T,y){var x={originalEvent:y,eventType:"gotpointercapture",pointerType:C(y),isEmulated:!1};E(T,x),y.target===T.element&&U(T,{id:y.pointerId,type:C(y)},!0),x.stopPropagation&&a.stopEvent(y)}function I(T,y){var x={originalEvent:y,eventType:"lostpointercapture",pointerType:C(y),isEmulated:!1};E(T,x),y.target===T.element&&U(T,{id:y.pointerId,type:C(y)},!1),x.stopPropagation&&a.stopEvent(y)}function Q(T,y){var x={id:S(y),type:C(y),isPrimary:_(y),currentPos:O(y),currentTime:a.now()},b={originalEvent:y,eventType:"pointerenter",pointerType:x.type,isEmulated:!1};E(T,b),$(T,b,x)}function ie(T,y){var x={id:S(y),type:C(y),isPrimary:_(y),currentPos:O(y),currentTime:a.now()},b={originalEvent:y,eventType:"pointerleave",pointerType:x.type,isEmulated:!1};E(T,b),ee(T,b,x)}function xe(T,y){var x={id:S(y),type:C(y),isPrimary:_(y),currentPos:O(y),currentTime:a.now()},b={originalEvent:y,eventType:"pointerover",pointerType:x.type,isEmulated:!1};E(T,b),ye(T,b,x),b.preventDefault&&!b.defaultPrevented&&a.cancelEvent(y),b.stopPropagation&&a.stopEvent(y)}function _e(T,y){var x={id:S(y),type:C(y),isPrimary:_(y),currentPos:O(y),currentTime:a.now()},b={originalEvent:y,eventType:"pointerout",pointerType:x.type,isEmulated:!1};E(T,b),le(T,b,x),b.preventDefault&&!b.defaultPrevented&&a.cancelEvent(y),b.stopPropagation&&a.stopEvent(y)}function Be(T,y){var x={id:S(y),type:C(y),isPrimary:_(y),currentPos:O(y),currentTime:a.now()},b=a.MouseTracker.havePointerEvents&&x.type==="touch"&&a.Browser.vendor!==a.BROWSERS.IE,q={originalEvent:y,eventType:"pointerdown",pointerType:x.type,isEmulated:!1};E(T,q),Re(T,q,x,y.button),q.preventDefault&&!q.defaultPrevented&&a.cancelEvent(y),q.stopPropagation&&a.stopEvent(y),q.shouldCapture&&(b?U(T,x,!0):d(T,x))}function We(T,y){Ft(T,y)}function ke(T,y){var x=T.getActivePointersListByType(C(y));x.getById(y.pointerId)&&Ft(T,y),a.stopEvent(y)}function Ft(T,y){var x;x={id:S(y),type:C(y),isPrimary:_(y),currentPos:O(y),currentTime:a.now()};var b={originalEvent:y,eventType:"pointerup",pointerType:x.type,isEmulated:!1};E(T,b),Ge(T,b,x,y.button),b.preventDefault&&!b.defaultPrevented&&a.cancelEvent(y),b.stopPropagation&&a.stopEvent(y),b.shouldReleaseCapture&&(y.target===T.element?v(T,x):U(T,x,!1))}function Pt(T,y){ti(T,y)}function rt(T,y){var x=T.getActivePointersListByType(C(y));x.getById(y.pointerId)&&ti(T,y),a.stopEvent(y)}function ti(T,y){var x={id:S(y),type:C(y),isPrimary:_(y),currentPos:O(y),currentTime:a.now()},b={originalEvent:y,eventType:"pointermove",pointerType:x.type,isEmulated:!1};E(T,b),Ie(T,b,x),b.preventDefault&&!b.defaultPrevented&&a.cancelEvent(y),b.stopPropagation&&a.stopEvent(y)}function Tt(T,y){var x={id:y.pointerId,type:C(y)},b={originalEvent:y,eventType:"pointercancel",pointerType:x.type,isEmulated:!1};E(T,b),pe(T,b,x),b.stopPropagation&&a.stopEvent(y)}function zt(T,y){return y.speed=0,y.direction=0,y.contactPos=y.currentPos,y.contactTime=y.currentTime,y.lastPos=y.currentPos,y.lastTime=y.currentTime,T.add(y)}function St(T,y,x){var b,q=y.getById(x.id);return q?(q.captured&&(a.console.warn("stopTrackingPointer() called on captured pointer"),v(T,q)),y.removeContact(),b=y.removeById(x.id)):b=y.getLength(),b}function m(T,y){switch(y.eventType){case"pointermove":y.isStoppable=!0,y.isCancelable=!0,y.preventDefault=!1,y.preventGesture=!T.hasGestureHandlers,y.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":y.isStoppable=!0,y.isCancelable=!0,y.preventDefault=!1,y.preventGesture=!1,y.stopPropagation=!1;break;case"pointerdown":y.isStoppable=!0,y.isCancelable=!0,y.preventDefault=!1,y.preventGesture=!T.hasGestureHandlers,y.stopPropagation=!1;break;case"pointerup":y.isStoppable=!0,y.isCancelable=!0,y.preventDefault=!1,y.preventGesture=!T.hasGestureHandlers,y.stopPropagation=!1;break;case"wheel":y.isStoppable=!0,y.isCancelable=!0,y.preventDefault=!1,y.preventGesture=!T.hasScrollHandler,y.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":y.isStoppable=!0,y.isCancelable=!1,y.preventDefault=!1,y.preventGesture=!1,y.stopPropagation=!1;break;case"click":y.isStoppable=!0,y.isCancelable=!0,y.preventDefault=!!T.clickHandler,y.preventGesture=!1,y.stopPropagation=!1;break;case"dblclick":y.isStoppable=!0,y.isCancelable=!0,y.preventDefault=!!T.dblClickHandler,y.preventGesture=!1,y.stopPropagation=!1;break;case"focus":case"blur":case"pointerenter":case"pointerleave":default:y.isStoppable=!1,y.isCancelable=!1,y.preventDefault=!1,y.preventGesture=!1,y.stopPropagation=!1;break}}function E(T,y){y.eventSource=T,y.eventPhase=y.originalEvent&&typeof y.originalEvent.eventPhase<"u"?y.originalEvent.eventPhase:0,y.defaultPrevented=a.eventIsCanceled(y.originalEvent),y.shouldCapture=!1,y.shouldReleaseCapture=!1,y.userData=T.userData,m(T,y),T.preProcessEventHandler&&T.preProcessEventHandler(y)}function U(T,y,x){var b=T.getActivePointersListByType(y.type),q=b.getById(y.id);q?x&&!q.captured?(q.captured=!0,b.captureCount++):!x&&q.captured&&(q.captured=!1,b.captureCount--,b.captureCount<0&&(b.captureCount=0,a.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):a.console.warn("updatePointerCaptured() called on untracked pointer")}function $(T,y,x){var b=T.getActivePointersListByType(x.type),q;q=b.getById(x.id),q?(q.insideElement=!0,q.lastPos=q.currentPos,q.lastTime=q.currentTime,q.currentPos=x.currentPos,q.currentTime=x.currentTime,x=q):(x.captured=!1,x.insideElementPressed=!1,x.insideElement=!0,zt(b,x)),T.enterHandler&&T.enterHandler({eventSource:T,pointerType:x.type,position:M(x.currentPos,T.element),buttons:b.buttons,pointers:T.getActivePointerCount(),insideElementPressed:x.insideElementPressed,buttonDownAny:b.buttons!==0,isTouchEvent:x.type==="touch",originalEvent:y.originalEvent,userData:T.userData})}function ee(T,y,x){var b=T.getActivePointersListByType(x.type),q,J;q=b.getById(x.id),q?(q.captured?(q.insideElement=!1,q.lastPos=q.currentPos,q.lastTime=q.currentTime,q.currentPos=x.currentPos,q.currentTime=x.currentTime):St(T,b,q),x=q):(x.captured=!1,x.insideElementPressed=!1),(T.leaveHandler||T.exitHandler)&&(J={eventSource:T,pointerType:x.type,position:x.currentPos&&M(x.currentPos,T.element),buttons:b.buttons,pointers:T.getActivePointerCount(),insideElementPressed:x.insideElementPressed,buttonDownAny:b.buttons!==0,isTouchEvent:x.type==="touch",originalEvent:y.originalEvent,userData:T.userData},T.leaveHandler&&T.leaveHandler(J),T.exitHandler&&T.exitHandler(J))}function ye(T,y,x){var b,q;b=T.getActivePointersListByType(x.type),q=b.getById(x.id),q?x=q:(x.captured=!1,x.insideElementPressed=!1),T.overHandler&&T.overHandler({eventSource:T,pointerType:x.type,position:M(x.currentPos,T.element),buttons:b.buttons,pointers:T.getActivePointerCount(),insideElementPressed:x.insideElementPressed,buttonDownAny:b.buttons!==0,isTouchEvent:x.type==="touch",originalEvent:y.originalEvent,userData:T.userData})}function le(T,y,x){var b,q;b=T.getActivePointersListByType(x.type),q=b.getById(x.id),q?x=q:(x.captured=!1,x.insideElementPressed=!1),T.outHandler&&T.outHandler({eventSource:T,pointerType:x.type,position:x.currentPos&&M(x.currentPos,T.element),buttons:b.buttons,pointers:T.getActivePointerCount(),insideElementPressed:x.insideElementPressed,buttonDownAny:b.buttons!==0,isTouchEvent:x.type==="touch",originalEvent:y.originalEvent,userData:T.userData})}function Re(T,y,x,b){var q=l[T.hash],J=T.getActivePointersListByType(x.type),he;if(typeof y.originalEvent.buttons<"u"?J.buttons=y.originalEvent.buttons:b===0?J.buttons|=1:b===1?J.buttons|=4:b===2?J.buttons|=2:b===3?J.buttons|=8:b===4?J.buttons|=16:b===5&&(J.buttons|=32),b!==0){y.shouldCapture=!1,y.shouldReleaseCapture=!1,T.nonPrimaryPressHandler&&!y.preventGesture&&!y.defaultPrevented&&(y.preventDefault=!0,T.nonPrimaryPressHandler({eventSource:T,pointerType:x.type,position:M(x.currentPos,T.element),button:b,buttons:J.buttons,isTouchEvent:x.type==="touch",originalEvent:y.originalEvent,userData:T.userData}));return}he=J.getById(x.id),he?(he.insideElementPressed=!0,he.insideElement=!0,he.originalTarget=y.originalEvent.target,he.contactPos=x.currentPos,he.contactTime=x.currentTime,he.lastPos=he.currentPos,he.lastTime=he.currentTime,he.currentPos=x.currentPos,he.currentTime=x.currentTime,x=he):(x.captured=!1,x.insideElementPressed=!0,x.insideElement=!0,x.originalTarget=y.originalEvent.target,zt(J,x)),J.addContact(),!y.preventGesture&&!y.defaultPrevented?(y.shouldCapture=!0,y.shouldReleaseCapture=!1,y.preventDefault=!0,(T.dragHandler||T.dragEndHandler||T.pinchHandler)&&a.MouseTracker.gesturePointVelocityTracker.addPoint(T,x),J.contacts===1?T.pressHandler&&!y.preventGesture&&T.pressHandler({eventSource:T,pointerType:x.type,position:M(x.contactPos,T.element),buttons:J.buttons,isTouchEvent:x.type==="touch",originalEvent:y.originalEvent,userData:T.userData}):J.contacts===2&&T.pinchHandler&&x.type==="touch"&&(q.pinchGPoints=J.asArray(),q.lastPinchDist=q.currentPinchDist=q.pinchGPoints[0].currentPos.distanceTo(q.pinchGPoints[1].currentPos),q.lastPinchCenter=q.currentPinchCenter=X(q.pinchGPoints[0].currentPos,q.pinchGPoints[1].currentPos))):(y.shouldCapture=!1,y.shouldReleaseCapture=!1)}function Ge(T,y,x,b){var q=l[T.hash],J=T.getActivePointersListByType(x.type),he,De,de,Ot=!1,gt;if(typeof y.originalEvent.buttons<"u"?J.buttons=y.originalEvent.buttons:b===0?J.buttons^=-2:b===1?J.buttons^=-5:b===2?J.buttons^=-3:b===3?J.buttons^=-9:b===4?J.buttons^=-17:b===5&&(J.buttons^=-33),y.shouldCapture=!1,b!==0){y.shouldReleaseCapture=!1,T.nonPrimaryReleaseHandler&&!y.preventGesture&&!y.defaultPrevented&&(y.preventDefault=!0,T.nonPrimaryReleaseHandler({eventSource:T,pointerType:x.type,position:M(x.currentPos,T.element),button:b,buttons:J.buttons,isTouchEvent:x.type==="touch",originalEvent:y.originalEvent,userData:T.userData}));return}de=J.getById(x.id),de?(J.removeContact(),de.captured&&(Ot=!0),de.lastPos=de.currentPos,de.lastTime=de.currentTime,de.currentPos=x.currentPos,de.currentTime=x.currentTime,de.insideElement||St(T,J,de),he=de.currentPos,De=de.currentTime):(x.captured=!1,x.insideElementPressed=!1,x.insideElement=!0,zt(J,x),de=x),!y.preventGesture&&!y.defaultPrevented&&(Ot?(y.shouldReleaseCapture=!0,y.preventDefault=!0,(T.dragHandler||T.dragEndHandler||T.pinchHandler)&&a.MouseTracker.gesturePointVelocityTracker.removePoint(T,de),J.contacts===0?(T.releaseHandler&&he&&T.releaseHandler({eventSource:T,pointerType:de.type,position:M(he,T.element),buttons:J.buttons,insideElementPressed:de.insideElementPressed,insideElementReleased:de.insideElement,isTouchEvent:de.type==="touch",originalEvent:y.originalEvent,userData:T.userData}),T.dragEndHandler&&q.sentDragEvent&&T.dragEndHandler({eventSource:T,pointerType:de.type,position:M(de.currentPos,T.element),speed:de.speed,direction:de.direction,shift:y.originalEvent.shiftKey,isTouchEvent:de.type==="touch",originalEvent:y.originalEvent,userData:T.userData}),q.sentDragEvent=!1,(T.clickHandler||T.dblClickHandler)&&de.insideElement&&(gt=De-de.contactTime<=T.clickTimeThreshold&&de.contactPos.distanceTo(he)<=T.clickDistThreshold,T.clickHandler&&T.clickHandler({eventSource:T,pointerType:de.type,position:M(de.currentPos,T.element),quick:gt,shift:y.originalEvent.shiftKey,isTouchEvent:de.type==="touch",originalEvent:y.originalEvent,originalTarget:de.originalTarget,userData:T.userData}),T.dblClickHandler&&gt&&(J.clicks++,J.clicks===1?(q.lastClickPos=he,q.dblClickTimeOut=setTimeout(function(){J.clicks=0},T.dblClickTimeThreshold)):J.clicks===2&&(clearTimeout(q.dblClickTimeOut),J.clicks=0,q.lastClickPos.distanceTo(he)<=T.dblClickDistThreshold&&T.dblClickHandler({eventSource:T,pointerType:de.type,position:M(de.currentPos,T.element),shift:y.originalEvent.shiftKey,isTouchEvent:de.type==="touch",originalEvent:y.originalEvent,userData:T.userData}),q.lastClickPos=null)))):J.contacts===2&&T.pinchHandler&&de.type==="touch"&&(q.pinchGPoints=J.asArray(),q.lastPinchDist=q.currentPinchDist=q.pinchGPoints[0].currentPos.distanceTo(q.pinchGPoints[1].currentPos),q.lastPinchCenter=q.currentPinchCenter=X(q.pinchGPoints[0].currentPos,q.pinchGPoints[1].currentPos))):(y.shouldReleaseCapture=!1,T.releaseHandler&&he&&(T.releaseHandler({eventSource:T,pointerType:de.type,position:M(he,T.element),buttons:J.buttons,insideElementPressed:de.insideElementPressed,insideElementReleased:de.insideElement,isTouchEvent:de.type==="touch",originalEvent:y.originalEvent,userData:T.userData}),y.preventDefault=!0)))}function Ie(T,y,x){var b=l[T.hash],q=T.getActivePointersListByType(x.type),J,he,De;if(typeof y.originalEvent.buttons<"u"&&(q.buttons=y.originalEvent.buttons),J=q.getById(x.id),J)J.lastPos=J.currentPos,J.lastTime=J.currentTime,J.currentPos=x.currentPos,J.currentTime=x.currentTime;else return;y.shouldCapture=!1,y.shouldReleaseCapture=!1,T.stopHandler&&x.type==="mouse"&&(clearTimeout(T.stopTimeOut),T.stopTimeOut=setTimeout(function(){Ke(T,y.originalEvent,x.type)},T.stopDelay)),q.contacts===0?T.moveHandler&&T.moveHandler({eventSource:T,pointerType:x.type,position:M(x.currentPos,T.element),buttons:q.buttons,isTouchEvent:x.type==="touch",originalEvent:y.originalEvent,userData:T.userData}):q.contacts===1?(T.moveHandler&&(J=q.asArray()[0],T.moveHandler({eventSource:T,pointerType:J.type,position:M(J.currentPos,T.element),buttons:q.buttons,isTouchEvent:J.type==="touch",originalEvent:y.originalEvent,userData:T.userData})),T.dragHandler&&!y.preventGesture&&!y.defaultPrevented&&(J=q.asArray()[0],De=J.currentPos.minus(J.lastPos),T.dragHandler({eventSource:T,pointerType:J.type,position:M(J.currentPos,T.element),buttons:q.buttons,delta:De,speed:J.speed,direction:J.direction,shift:y.originalEvent.shiftKey,isTouchEvent:J.type==="touch",originalEvent:y.originalEvent,userData:T.userData}),y.preventDefault=!0,b.sentDragEvent=!0)):q.contacts===2&&(T.moveHandler&&(he=q.asArray(),T.moveHandler({eventSource:T,pointerType:he[0].type,position:M(X(he[0].currentPos,he[1].currentPos),T.element),buttons:q.buttons,isTouchEvent:he[0].type==="touch",originalEvent:y.originalEvent,userData:T.userData})),T.pinchHandler&&x.type==="touch"&&!y.preventGesture&&!y.defaultPrevented&&(De=b.pinchGPoints[0].currentPos.distanceTo(b.pinchGPoints[1].currentPos),De!==b.currentPinchDist&&(b.lastPinchDist=b.currentPinchDist,b.currentPinchDist=De,b.lastPinchCenter=b.currentPinchCenter,b.currentPinchCenter=X(b.pinchGPoints[0].currentPos,b.pinchGPoints[1].currentPos),T.pinchHandler({eventSource:T,pointerType:"touch",gesturePoints:b.pinchGPoints,lastCenter:M(b.lastPinchCenter,T.element),center:M(b.currentPinchCenter,T.element),lastDistance:b.lastPinchDist,distance:b.currentPinchDist,shift:y.originalEvent.shiftKey,originalEvent:y.originalEvent,userData:T.userData}),y.preventDefault=!0)))}function pe(T,y,x){var b=T.getActivePointersListByType(x.type),q;q=b.getById(x.id),q&&St(T,b,q)}function Ke(T,y,x){T.stopHandler&&T.stopHandler({eventSource:T,pointerType:x,position:R(y,T.element),buttons:T.getActivePointersListByType(x).buttons,isTouchEvent:x==="touch",originalEvent:y,userData:T.userData})}})(te),(function(a){a.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},a.Control=function(l,o,f){var p=l.parentNode;typeof o=="number"&&(a.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),o={anchor:o}),o.attachToViewer=typeof o.attachToViewer>"u"?!0:o.attachToViewer,this.autoFade=typeof o.autoFade>"u"?!0:o.autoFade,this.element=l,this.anchor=o.anchor,this.container=f,this.anchor===a.ControlAnchor.ABSOLUTE?(this.wrapper=a.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof o.top=="number"?o.top+"px":o.top,this.wrapper.style.left=typeof o.left=="number"?o.left+"px":o.left,this.wrapper.style.height=typeof o.height=="number"?o.height+"px":o.height,this.wrapper.style.width=typeof o.width=="number"?o.width+"px":o.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=a.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===a.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),o.attachToViewer?this.anchor===a.ControlAnchor.TOP_RIGHT||this.anchor===a.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):p.appendChild(this.wrapper)},a.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==a.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!=="none"},setVisible:function(l){this.wrapper.style.display=l?this.anchor===a.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(l){this.element[a.SIGNAL]&&a.Browser.vendor===a.BROWSERS.IE?a.setElementOpacity(this.element,l,!0):a.setElementOpacity(this.wrapper,l,!0)}}})(te),(function(a){a.ControlDock=function(o){var f=["topleft","topright","bottomright","bottomleft"],p,h;for(a.extend(!0,this,{id:"controldock-"+a.now()+"-"+Math.floor(Math.random()*1e6),container:a.makeNeutralElement("div"),controls:[]},o),this.container.onsubmit=function(){return!1},this.element&&(this.element=a.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),h=0;h<f.length;h++)p=f[h],this.controls[p]=a.makeNeutralElement("div"),this.controls[p].style.position="absolute",p.match("left")&&(this.controls[p].style.left="0px"),p.match("right")&&(this.controls[p].style.right="0px"),p.match("top")&&(this.controls[p].style.top="0px"),p.match("bottom")&&(this.controls[p].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},a.ControlDock.prototype={addControl:function(o,f){o=a.getElement(o);var p=null;if(!(l(this,o)>=0)){switch(f.anchor){case a.ControlAnchor.TOP_RIGHT:p=this.controls.topright,o.style.position="relative",o.style.paddingRight="0px",o.style.paddingTop="0px";break;case a.ControlAnchor.BOTTOM_RIGHT:p=this.controls.bottomright,o.style.position="relative",o.style.paddingRight="0px",o.style.paddingBottom="0px";break;case a.ControlAnchor.BOTTOM_LEFT:p=this.controls.bottomleft,o.style.position="relative",o.style.paddingLeft="0px",o.style.paddingBottom="0px";break;case a.ControlAnchor.TOP_LEFT:p=this.controls.topleft,o.style.position="relative",o.style.paddingLeft="0px",o.style.paddingTop="0px";break;case a.ControlAnchor.ABSOLUTE:p=this.container,o.style.margin="0px",o.style.padding="0px";break;default:case a.ControlAnchor.NONE:p=this.container,o.style.margin="0px",o.style.padding="0px";break}this.controls.push(new a.Control(o,f,p)),o.style.display="inline-block"}},removeControl:function(o){o=a.getElement(o);var f=l(this,o);return f>=0&&(this.controls[f].destroy(),this.controls.splice(f,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var o;for(o=this.controls.length-1;o>=0;o--)if(this.controls[o].isVisible())return!0;return!1},setControlsEnabled:function(o){var f;for(f=this.controls.length-1;f>=0;f--)this.controls[f].setVisible(o);return this}};function l(o,f){var p=o.controls,h;for(h=p.length-1;h>=0;h--)if(p[h].element===f)return h;return-1}})(te),(function(a){a.Placement=a.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})})(te),(function(a){var l={},o=1;a.Viewer=function(m){var E=arguments,U=this,$;if(a.isPlainObject(m)||(m={id:E[0],xmlPath:E.length>1?E[1]:void 0,prefixUrl:E.length>2?E[2]:void 0,controls:E.length>3?E[3]:void 0,overlays:E.length>4?E[4]:void 0}),m.config&&(a.extend(!0,m,m.config),delete m.config),a.extend(!0,this,{id:m.id,hash:m.hash||o++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttonGroup:null,profiler:null},a.DEFAULT_SETTINGS,m),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(typeof l[this.hash]<"u"&&a.console.warn("Hash "+this.hash+" has already been used."),l[this.hash]={fsBoundsDelta:new a.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,needsResize:!1,forceResize:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null,lastClickTime:null,draggingToZoom:!1},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=a.now(),a.EventSource.call(this),this.addHandler("open-failed",function(ee){var ye=a.getString("Errors.OpenFailed",ee.eventSource,ee.message);U._showMessage(ye)}),a.ControlDock.call(this,m),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=a.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",(function(ee){ee.width="100%",ee.height="100%",ee.overflow="hidden",ee.position="absolute",ee.top="0px",ee.left="0px"})(this.canvas.style),a.setElementTouchActionNone(this.canvas),m.tabIndex!==""&&(this.canvas.tabIndex=m.tabIndex===void 0?0:m.tabIndex),this.container.className="openseadragon-container",(function(ee){ee.width="100%",ee.height="100%",ee.position="relative",ee.overflow="hidden",ee.left="0px",ee.top="0px",ee.textAlign="left"})(this.container.style),a.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new a.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:a.delegate(this,R),keyDownHandler:a.delegate(this,M),keyHandler:a.delegate(this,X),clickHandler:a.delegate(this,K),dblClickHandler:a.delegate(this,ce),dragHandler:a.delegate(this,Ce),dragEndHandler:a.delegate(this,Te),enterHandler:a.delegate(this,V),leaveHandler:a.delegate(this,we),pressHandler:a.delegate(this,ze),releaseHandler:a.delegate(this,ct),nonPrimaryPressHandler:a.delegate(this,Pe),nonPrimaryReleaseHandler:a.delegate(this,Fe),scrollHandler:a.delegate(this,G),pinchHandler:a.delegate(this,Je),focusHandler:a.delegate(this,dt),blurHandler:a.delegate(this,_t)}),this.outerTracker=new a.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:a.delegate(this,ae),leaveHandler:a.delegate(this,me)}),this.toolbar&&(this.toolbar=new a.ControlDock({element:this.toolbar})),this.bindStandardControls(),l[this.hash].prevContainerSize=f(this.container),window.ResizeObserver?(this._autoResizePolling=!1,this._resizeObserver=new ResizeObserver(function(){l[U.hash].needsResize=!0}),this._resizeObserver.observe(this.container,{})):this._autoResizePolling=!0,this.world=new a.World({viewer:this}),this.world.addHandler("add-item",function(ee){U.source=U.world.getItemAt(0).source,l[U.hash].forceRedraw=!0,U._updateRequestId||(U._updateRequestId=c(U,Ne))}),this.world.addHandler("remove-item",function(ee){U.world.getItemCount()?U.source=U.world.getItemAt(0).source:U.source=null,l[U.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(ee){U.viewport&&U.viewport._setContentBounds(U.world.getHomeBounds(),U.world.getContentFactor())}),this.world.addHandler("item-index-change",function(ee){U.source=U.world.getItemAt(0).source}),this.viewport=new a.Viewport({containerSize:l[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new a.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:m.timeout,tileRetryMax:this.tileRetryMax,tileRetryDelay:this.tileRetryDelay}),this.tileCache=new a.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new a.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=a.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&($=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice($,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&($=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice($,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new a.Navigator({element:this.navigatorElement,id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy,animationTime:this.animationTime})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),$=0;$<this.customControls.length;$++)this.addControl(this.customControls[$].id,{anchor:this.customControls[$].anchor});a.requestAnimationFrame(function(){v(U)}),this.imageSmoothingEnabled!==void 0&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),a._viewers.set(this.element,this)},a.extend(a.Viewer.prototype,a.EventSource.prototype,a.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(m){return a.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(m)},openTileSource:function(m){return a.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(m)},get buttons(){return a.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(m,E){var U=this;if(this.close(),!m)return this;if(this.sequenceMode&&a.isArray(m))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof E<"u"&&!isNaN(E)&&(this.initialPage=E),this.tileSources=m,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(a.isArray(m)||(m=[m]),!m.length)return this;this._opening=!0;for(var $=m.length,ee=0,ye=0,le,Re=function(){if(ee+ye===$)if(ee){(U._firstOpen||!U.preserveViewport)&&(U.viewport.goHome(!0),U.viewport.update()),U._firstOpen=!1;var pe=m[0];if(pe.tileSource&&(pe=pe.tileSource),U.overlays&&!U.preserveOverlays)for(var Ke=0;Ke<U.overlays.length;Ke++)U.currentOverlays[Ke]=h(U,U.overlays[Ke]);U._drawOverlays(),U._opening=!1,U.raiseEvent("open",{source:pe})}else U._opening=!1,U.raiseEvent("open-failed",le)},Ge=function(pe){(!a.isPlainObject(pe)||!pe.tileSource)&&(pe={tileSource:pe}),pe.index!==void 0&&(a.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete pe.index),pe.collectionImmediately===void 0&&(pe.collectionImmediately=!0);var Ke=pe.success;pe.success=function(y){if(ee++,pe.tileSource.overlays)for(var x=0;x<pe.tileSource.overlays.length;x++)U.addOverlay(pe.tileSource.overlays[x]);Ke&&Ke(y),Re()};var T=pe.error;pe.error=function(y){ye++,le||(le=y),T&&T(y),Re()},U.addTiledImage(pe)},Ie=0;Ie<m.length;Ie++)Ge(m[Ie]);return this},close:function(){return l[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),l[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(l[this.hash]){if(this.raiseEvent("before-destroy"),this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this._resizeObserver&&this._resizeObserver.disconnect(),this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(a.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),l[this.navigator.hash]=null,delete l[this.navigator.hash],this.navigator=null),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),l[this.hash]=null,delete l[this.hash],this.canvas=null,this.container=null,a._viewers.delete(this.element),this.element=null,this.raiseEvent("destroy"),this.removeAllHandlers()}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(m){return this.innerTracker.setTracking(m),this.outerTracker.setTracking(m),this.raiseEvent("mouse-enabled",{enabled:m}),this},areControlsEnabled:function(){var m=this.controls.length,E;for(E=0;E<this.controls.length;E++)m=m&&this.controls[E].isVisible();return m},setControlsEnabled:function(m){return m?C(this):v(this),this.raiseEvent("controls-enabled",{enabled:m}),this},setDebugMode:function(m){for(var E=0;E<this.world.getItemCount();E++)this.world.getItemAt(E).debugMode=m;this.debugMode=m,this.forceRedraw()},setAjaxHeaders:function(m,E){if(m===null&&(m={}),!a.isPlainObject(m)){console.error("[Viewer.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}if(E===void 0&&(E=!0),this.ajaxHeaders=m,E){for(var U=0;U<this.world.getItemCount();U++)this.world.getItemAt(U)._updateAjaxHeaders(!0);if(this.navigator&&this.navigator.setAjaxHeaders(this.ajaxHeaders,!0),this.referenceStrip&&this.referenceStrip.miniViewers)for(var $ in this.referenceStrip.miniViewers)this.referenceStrip.miniViewers[$].setAjaxHeaders(this.ajaxHeaders,!0)}},addButton:function(m){this.buttonGroup.addButton(m)},isFullPage:function(){return l[this.hash].fullPage},setFullPage:function(m){var E=document.body,U=E.style,$=document.documentElement.style,ee=this,ye,le;if(m===this.isFullPage())return this;var Re={fullPage:m,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",Re),Re.preventDefaultAction)return this;if(m){for(this.elementSize=a.getElementSize(this.element),this.pageScroll=a.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=U.margin,this.docMargin=$.margin,U.margin="0",$.margin="0",this.bodyPadding=U.padding,this.docPadding=$.padding,U.padding="0",$.padding="0",this.bodyWidth=U.width,this.docWidth=$.width,U.width="100%",$.width="100%",this.bodyHeight=U.height,this.docHeight=$.height,U.height="100%",$.height="100%",this.bodyDisplay=U.display,U.display="block",this.previousBody=[],l[this.hash].prevElementParent=this.element.parentNode,l[this.hash].prevNextSibling=this.element.nextSibling,l[this.hash].prevElementWidth=this.element.style.width,l[this.hash].prevElementHeight=this.element.style.height,ye=E.childNodes.length,le=0;le<ye;le++)this.previousBody.push(E.childNodes[0]),E.removeChild(E.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,E.appendChild(this.toolbar.element),a.addClass(this.toolbar.element,"fullpage")),a.addClass(this.element,"fullpage"),E.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=a.getElementSize(this.element).y-a.getElementSize(this.toolbar.element).y+"px"),l[this.hash].fullPage=!0,a.delegate(this,ae)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,U.margin=this.bodyMargin,$.margin=this.docMargin,U.padding=this.bodyPadding,$.padding=this.docPadding,U.width=this.bodyWidth,$.width=this.docWidth,U.height=this.bodyHeight,$.height=this.docHeight,U.display=this.bodyDisplay,E.removeChild(this.element),ye=this.previousBody.length,le=0;le<ye;le++)E.appendChild(this.previousBody.shift());a.removeClass(this.element,"fullpage"),l[this.hash].prevElementParent.insertBefore(this.element,l[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(E.removeChild(this.toolbar.element),a.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=l[this.hash].prevElementWidth,this.element.style.height=l[this.hash].prevElementHeight;var Ge=0,Ie=function(){a.setPageScroll(ee.pageScroll);var pe=a.getPageScroll();Ge++,Ge<10&&(pe.x!==ee.pageScroll.x||pe.y!==ee.pageScroll.y)&&a.requestAnimationFrame(Ie)};a.requestAnimationFrame(Ie),l[this.hash].fullPage=!1,a.delegate(this,me)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:m}),this},setFullScreen:function(m){var E=this;if(!a.supportsFullScreen)return this.setFullPage(m);if(a.isFullScreen()===m)return this;var U={fullScreen:m,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",U),U.preventDefaultAction)return this;if(m){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var $=function(){var ee=a.isFullScreen();ee||(a.removeEvent(document,a.fullScreenEventName,$),a.removeEvent(document,a.fullScreenErrorEventName,$),E.setFullPage(!1),E.isFullPage()&&(E.element.style.width=E.fullPageStyleWidth,E.element.style.height=E.fullPageStyleHeight)),E.navigator&&E.viewport&&setTimeout(function(){E.navigator.update(E.viewport)}),E.raiseEvent("full-screen",{fullScreen:ee})};a.addEvent(document,a.fullScreenEventName,$),a.addEvent(document,a.fullScreenErrorEventName,$),a.requestFullScreen(document.body)}else a.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!=="hidden"},isFullScreen:function(){return a.isFullScreen()&&this.isFullPage()},setVisible:function(m){return this.container.style.visibility=m?"":"hidden",this.raiseEvent("visible",{visible:m}),this},addTiledImage:function(m){a.console.assert(m,"[Viewer.addTiledImage] options is required"),a.console.assert(m.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),a.console.assert(!m.replace||m.index>-1&&m.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var E=this;m.replace&&(m.replaceItem=E.world.getItemAt(m.index)),this._hideMessage(),m.placeholderFillStyle===void 0&&(m.placeholderFillStyle=this.placeholderFillStyle),m.opacity===void 0&&(m.opacity=this.opacity),m.preload===void 0&&(m.preload=this.preload),m.compositeOperation===void 0&&(m.compositeOperation=this.compositeOperation),m.crossOriginPolicy===void 0&&(m.crossOriginPolicy=m.tileSource.crossOriginPolicy!==void 0?m.tileSource.crossOriginPolicy:this.crossOriginPolicy),m.ajaxWithCredentials===void 0&&(m.ajaxWithCredentials=this.ajaxWithCredentials),m.loadTilesWithAjax===void 0&&(m.loadTilesWithAjax=this.loadTilesWithAjax),a.isPlainObject(m.ajaxHeaders)||(m.ajaxHeaders={});var U={options:m};function $(le){for(var Re=0;Re<E._loadQueue.length;Re++)if(E._loadQueue[Re]===U){E._loadQueue.splice(Re,1);break}E._loadQueue.length===0&&ee(U),E.raiseEvent("add-item-failed",le),m.error&&m.error(le)}function ee(le){E.collectionMode&&(E.world.arrange({immediately:le.options.collectionImmediately,rows:E.collectionRows,columns:E.collectionColumns,layout:E.collectionLayout,tileSize:E.collectionTileSize,tileMargin:E.collectionTileMargin}),E.world.setAutoRefigureSizes(!0))}if(a.isArray(m.tileSource)){setTimeout(function(){$({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:m.tileSource,options:m})});return}this._loadQueue.push(U);function ye(){for(var le,Re,Ge;E._loadQueue.length&&(le=E._loadQueue[0],!!le.tileSource);){if(E._loadQueue.splice(0,1),le.options.replace){var Ie=E.world.getIndexOfItem(le.options.replaceItem);Ie!==-1&&(le.options.index=Ie),E.world.removeItem(le.options.replaceItem)}Re=new a.TiledImage({viewer:E,source:le.tileSource,viewport:E.viewport,drawer:E.drawer,tileCache:E.tileCache,imageLoader:E.imageLoader,x:le.options.x,y:le.options.y,width:le.options.width,height:le.options.height,fitBounds:le.options.fitBounds,fitBoundsPlacement:le.options.fitBoundsPlacement,clip:le.options.clip,placeholderFillStyle:le.options.placeholderFillStyle,opacity:le.options.opacity,preload:le.options.preload,degrees:le.options.degrees,flipped:le.options.flipped,compositeOperation:le.options.compositeOperation,springStiffness:E.springStiffness,animationTime:E.animationTime,minZoomImageRatio:E.minZoomImageRatio,wrapHorizontal:E.wrapHorizontal,wrapVertical:E.wrapVertical,immediateRender:E.immediateRender,blendTime:E.blendTime,alwaysBlend:E.alwaysBlend,minPixelRatio:E.minPixelRatio,smoothTileEdgesMinZoom:E.smoothTileEdgesMinZoom,iOSDevice:E.iOSDevice,crossOriginPolicy:le.options.crossOriginPolicy,ajaxWithCredentials:le.options.ajaxWithCredentials,loadTilesWithAjax:le.options.loadTilesWithAjax,ajaxHeaders:le.options.ajaxHeaders,debugMode:E.debugMode,subPixelRoundingForTransparency:E.subPixelRoundingForTransparency}),E.collectionMode&&E.world.setAutoRefigureSizes(!1),E.navigator&&(Ge=a.extend({},le.options,{replace:!1,originalTiledImage:Re,tileSource:le.tileSource}),E.navigator.addTiledImage(Ge)),E.world.addItem(Re,{index:le.options.index}),E._loadQueue.length===0&&ee(le),E.world.getItemCount()===1&&!E.preserveViewport&&E.viewport.goHome(!0),le.options.success&&le.options.success({item:Re})}}p(this,m.tileSource,m,function(le){U.tileSource=le,ye()},function(le){le.options=m,$(le),ye()})},addSimpleImage:function(m){a.console.assert(m,"[Viewer.addSimpleImage] options is required"),a.console.assert(m.url,"[Viewer.addSimpleImage] options.url is required");var E=a.extend({},m,{tileSource:{type:"image",url:m.url}});delete E.url,this.addTiledImage(E)},addLayer:function(m){var E=this;a.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var U=a.extend({},m,{success:function($){E.raiseEvent("add-layer",{options:m,drawer:$.item})},error:function($){E.raiseEvent("add-layer-failed",$)}});return this.addTiledImage(U),this},getLayerAtLevel:function(m){return a.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(m)},getLevelOfLayer:function(m){return a.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(m)},getLayersCount:function(){return a.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(m,E){return a.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(m,E)},removeLayer:function(m){return a.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(m)},forceRedraw:function(){return l[this.hash].forceRedraw=!0,this},forceResize:function(){l[this.hash].needsResize=!0,l[this.hash].forceResize=!0},bindSequenceControls:function(){var m=a.delegate(this,_),E=a.delegate(this,O),U=a.delegate(this,this.goToNextPage),$=a.delegate(this,this.goToPreviousPage),ee=this.navImages,ye=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(ye=!1),this.previousButton=new a.Button({element:this.previousButton?a.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.PreviousPage"),srcRest:Q(this.prefixUrl,ee.previous.REST),srcGroup:Q(this.prefixUrl,ee.previous.GROUP),srcHover:Q(this.prefixUrl,ee.previous.HOVER),srcDown:Q(this.prefixUrl,ee.previous.DOWN),onRelease:$,onFocus:m,onBlur:E}),this.nextButton=new a.Button({element:this.nextButton?a.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.NextPage"),srcRest:Q(this.prefixUrl,ee.next.REST),srcGroup:Q(this.prefixUrl,ee.next.GROUP),srcHover:Q(this.prefixUrl,ee.next.HOVER),srcDown:Q(this.prefixUrl,ee.next.DOWN),onRelease:U,onFocus:m,onBlur:E}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),ye&&(this.paging=new a.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:a.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||a.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var m=a.delegate(this,ie),E=a.delegate(this,_e),U=a.delegate(this,ke),$=a.delegate(this,xe),ee=a.delegate(this,Ft),ye=a.delegate(this,rt),le=a.delegate(this,ti),Re=a.delegate(this,Tt),Ge=a.delegate(this,zt),Ie=a.delegate(this,St),pe=a.delegate(this,_),Ke=a.delegate(this,O),T=this.navImages,y=[],x=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(x=!1),this.showZoomControl&&(y.push(this.zoomInButton=new a.Button({element:this.zoomInButton?a.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.ZoomIn"),srcRest:Q(this.prefixUrl,T.zoomIn.REST),srcGroup:Q(this.prefixUrl,T.zoomIn.GROUP),srcHover:Q(this.prefixUrl,T.zoomIn.HOVER),srcDown:Q(this.prefixUrl,T.zoomIn.DOWN),onPress:m,onRelease:E,onClick:U,onEnter:m,onExit:E,onFocus:pe,onBlur:Ke})),y.push(this.zoomOutButton=new a.Button({element:this.zoomOutButton?a.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.ZoomOut"),srcRest:Q(this.prefixUrl,T.zoomOut.REST),srcGroup:Q(this.prefixUrl,T.zoomOut.GROUP),srcHover:Q(this.prefixUrl,T.zoomOut.HOVER),srcDown:Q(this.prefixUrl,T.zoomOut.DOWN),onPress:$,onRelease:E,onClick:ee,onEnter:$,onExit:E,onFocus:pe,onBlur:Ke}))),this.showHomeControl&&y.push(this.homeButton=new a.Button({element:this.homeButton?a.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.Home"),srcRest:Q(this.prefixUrl,T.home.REST),srcGroup:Q(this.prefixUrl,T.home.GROUP),srcHover:Q(this.prefixUrl,T.home.HOVER),srcDown:Q(this.prefixUrl,T.home.DOWN),onRelease:ye,onFocus:pe,onBlur:Ke})),this.showFullPageControl&&y.push(this.fullPageButton=new a.Button({element:this.fullPageButton?a.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.FullPage"),srcRest:Q(this.prefixUrl,T.fullpage.REST),srcGroup:Q(this.prefixUrl,T.fullpage.GROUP),srcHover:Q(this.prefixUrl,T.fullpage.HOVER),srcDown:Q(this.prefixUrl,T.fullpage.DOWN),onRelease:le,onFocus:pe,onBlur:Ke})),this.showRotationControl&&(y.push(this.rotateLeftButton=new a.Button({element:this.rotateLeftButton?a.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.RotateLeft"),srcRest:Q(this.prefixUrl,T.rotateleft.REST),srcGroup:Q(this.prefixUrl,T.rotateleft.GROUP),srcHover:Q(this.prefixUrl,T.rotateleft.HOVER),srcDown:Q(this.prefixUrl,T.rotateleft.DOWN),onRelease:Re,onFocus:pe,onBlur:Ke})),y.push(this.rotateRightButton=new a.Button({element:this.rotateRightButton?a.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.RotateRight"),srcRest:Q(this.prefixUrl,T.rotateright.REST),srcGroup:Q(this.prefixUrl,T.rotateright.GROUP),srcHover:Q(this.prefixUrl,T.rotateright.HOVER),srcDown:Q(this.prefixUrl,T.rotateright.DOWN),onRelease:Ge,onFocus:pe,onBlur:Ke}))),this.showFlipControl&&y.push(this.flipButton=new a.Button({element:this.flipButton?a.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.Flip"),srcRest:Q(this.prefixUrl,T.flip.REST),srcGroup:Q(this.prefixUrl,T.flip.GROUP),srcHover:Q(this.prefixUrl,T.flip.HOVER),srcDown:Q(this.prefixUrl,T.flip.DOWN),onRelease:Ie,onFocus:pe,onBlur:Ke})),x?(this.buttonGroup=new a.ButtonGroup({buttons:y,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",a.delegate(this,Pt)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||a.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||a.ControlAnchor.TOP_LEFT})):this.customButtons=y),this},currentPage:function(){return this._sequenceIndex},goToPage:function(m){return this.tileSources&&m>=0&&m<this.tileSources.length&&(this._sequenceIndex=m,this._updateSequenceButtons(m),this.open(this.tileSources[m]),this.referenceStrip&&this.referenceStrip.setFocus(m),this.raiseEvent("page",{page:m})),this},addOverlay:function(m,E,U,$){var ee;if(a.isPlainObject(m)?ee=m:ee={element:m,location:E,placement:U,onDraw:$},m=a.getElement(ee.element),u(this.currentOverlays,m)>=0)return this;var ye=h(this,ee);return this.currentOverlays.push(ye),ye.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:m,location:ee.location,placement:ee.placement}),this},updateOverlay:function(m,E,U){var $;return m=a.getElement(m),$=u(this.currentOverlays,m),$>=0&&(this.currentOverlays[$].update(E,U),l[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:m,location:E,placement:U})),this},removeOverlay:function(m){var E;return m=a.getElement(m),E=u(this.currentOverlays,m),E>=0&&(this.currentOverlays[E].destroy(),this.currentOverlays.splice(E,1),l[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:m})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return l[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(m){var E;return m=a.getElement(m),E=u(this.currentOverlays,m),E>=0?this.currentOverlays[E]:null},_updateSequenceButtons:function(m){this.nextButton&&(!this.tileSources||this.tileSources.length-1===m?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(m>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(m){this._hideMessage();var E=a.makeNeutralElement("div");E.appendChild(document.createTextNode(m)),this.messageDiv=a.makeCenteredNode(E),a.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var m=this.messageDiv;m&&(m.parentNode.removeChild(m),delete this.messageDiv)},gestureSettingsByDeviceType:function(m){switch(m){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var m,E=this.currentOverlays.length;for(m=0;m<E;m++)this.currentOverlays[m].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new a.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else a.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),a.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){a.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var m=a.pixelDensityRatio,E=a.getCurrentPixelDensityRatio();m!==E&&(a.pixelDensityRatio=E,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var m=this._sequenceIndex-1;this.navPrevNextWrap&&m<0&&(m+=this.tileSources.length),this.goToPage(m)},goToNextPage:function(){var m=this._sequenceIndex+1;this.navPrevNextWrap&&m>=this.tileSources.length&&(m=0),this.goToPage(m)},isAnimating:function(){return l[this.hash].animating}});function f(m){return m=a.getElement(m),new a.Point(m.clientWidth===0?1:m.clientWidth,m.clientHeight===0?1:m.clientHeight)}function p(m,E,U,$,ee){var ye=m;if(a.type(E)==="string"){if(E.match(/^\s*<.*>\s*$/))E=a.parseXml(E);else if(E.match(/^\s*[{[].*[}\]]\s*$/))try{var le=a.parseJSON(E);E=le}catch{}}function Re(Ge,Ie){Ge.ready?$(Ge):(Ge.addHandler("ready",function(){$(Ge)}),Ge.addHandler("open-failed",function(pe){ee({message:pe.message,source:Ie})}))}setTimeout(function(){if(a.type(E)==="string")E=new a.TileSource({url:E,crossOriginPolicy:U.crossOriginPolicy!==void 0?U.crossOriginPolicy:m.crossOriginPolicy,ajaxWithCredentials:m.ajaxWithCredentials,ajaxHeaders:U.ajaxHeaders?U.ajaxHeaders:m.ajaxHeaders,splitHashDataForPost:m.splitHashDataForPost,useCanvas:m.useCanvas,success:function(Ke){$(Ke.tileSource)}}),E.addHandler("open-failed",function(Ke){ee(Ke)});else if(a.isPlainObject(E)||E.nodeType)if(E.crossOriginPolicy===void 0&&(U.crossOriginPolicy!==void 0||m.crossOriginPolicy!==void 0)&&(E.crossOriginPolicy=U.crossOriginPolicy!==void 0?U.crossOriginPolicy:m.crossOriginPolicy),E.ajaxWithCredentials===void 0&&(E.ajaxWithCredentials=m.ajaxWithCredentials),E.useCanvas===void 0&&(E.useCanvas=m.useCanvas),a.isFunction(E.getTileUrl)){var Ge=new a.TileSource(E);Ge.getTileUrl=E.getTileUrl,$(Ge)}else{var Ie=a.TileSource.determineType(ye,E);if(!Ie){ee({message:"Unable to load TileSource",source:E});return}var pe=Ie.prototype.configure.apply(ye,[E]);Re(new Ie(pe),E)}else Re(E,E)})}function h(m,E){if(E instanceof a.Overlay)return E;var U=null;if(E.element)U=a.getElement(E.element);else{var $=E.id?E.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);U=a.getElement(E.id),U||(U=document.createElement("a"),U.href="#/overlay/"+$),U.id=$,a.addClass(U,E.className?E.className:"openseadragon-overlay")}var ee=E.location,ye=E.width,le=E.height;if(!ee){var Re=E.x,Ge=E.y;if(E.px!==void 0){var Ie=m.viewport.imageToViewportRectangle(new a.Rect(E.px,E.py,ye||0,le||0));Re=Ie.x,Ge=Ie.y,ye=ye!==void 0?Ie.width:void 0,le=le!==void 0?Ie.height:void 0}ee=new a.Point(Re,Ge)}var pe=E.placement;return pe&&a.type(pe)==="string"&&(pe=a.Placement[E.placement.toUpperCase()]),new a.Overlay({element:U,location:ee,placement:pe,onDraw:E.onDraw,checkResize:E.checkResize,width:ye,height:le,rotationMode:E.rotationMode})}function u(m,E){var U;for(U=m.length-1;U>=0;U--)if(m[U].element===E)return U;return-1}function c(m,E){return a.requestAnimationFrame(function(){E(m)})}function d(m){a.requestAnimationFrame(function(){S(m)})}function v(m){m.autoHideControls&&(m.controlsShouldFade=!0,m.controlsFadeBeginTime=a.now()+m.controlsFadeDelay,window.setTimeout(function(){d(m)},m.controlsFadeDelay))}function S(m){var E,U,$,ee;if(m.controlsShouldFade){for(E=a.now(),U=E-m.controlsFadeBeginTime,$=1-U/m.controlsFadeLength,$=Math.min(1,$),$=Math.max(0,$),ee=m.controls.length-1;ee>=0;ee--)m.controls[ee].autoFade&&m.controls[ee].setOpacity($);$>0&&d(m)}}function C(m){var E;for(m.controlsShouldFade=!1,E=m.controls.length-1;E>=0;E--)m.controls[E].setOpacity(1)}function _(){C(this)}function O(){v(this)}function R(m){var E={tracker:m.eventSource,position:m.position,originalEvent:m.originalEvent,preventDefault:m.preventDefault};this.raiseEvent("canvas-contextmenu",E),m.preventDefault=E.preventDefault}function M(m){var E={originalEvent:m.originalEvent,preventDefaultAction:!1,preventVerticalPan:m.preventVerticalPan||!this.panVertical,preventHorizontalPan:m.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",E),!E.preventDefaultAction&&!m.ctrl&&!m.alt&&!m.meta)switch(m.keyCode){case 38:E.preventVerticalPan||(m.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),m.preventDefault=!0;break;case 40:E.preventVerticalPan||(m.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),m.preventDefault=!0;break;case 37:E.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),m.preventDefault=!0;break;case 39:E.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),m.preventDefault=!0;break;case 187:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),m.preventDefault=!0;break;case 189:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),m.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),m.preventDefault=!0;break;case 87:E.preventVerticalPan||(m.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(0,-40))),this.viewport.applyConstraints()),m.preventDefault=!0;break;case 83:E.preventVerticalPan||(m.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(0,40))),this.viewport.applyConstraints()),m.preventDefault=!0;break;case 65:E.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(-40,0))),this.viewport.applyConstraints()),m.preventDefault=!0;break;case 68:E.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(40,0))),this.viewport.applyConstraints()),m.preventDefault=!0;break;case 82:m.shift?this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement),this.viewport.applyConstraints(),m.preventDefault=!0;break;case 70:this.viewport.toggleFlip(),m.preventDefault=!0;break;case 74:this.goToPreviousPage();break;case 75:this.goToNextPage();break;default:m.preventDefault=!1;break}else m.preventDefault=!1}function X(m){var E={originalEvent:m.originalEvent};this.raiseEvent("canvas-key-press",E)}function K(m){var E,U=document.activeElement===this.canvas;U||this.canvas.focus(),this.viewport.flipped&&(m.position.x=this.viewport.getContainerSize().x-m.position.x);var $={tracker:m.eventSource,position:m.position,quick:m.quick,shift:m.shift,originalEvent:m.originalEvent,originalTarget:m.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",$),!$.preventDefaultAction&&this.viewport&&m.quick&&(E=this.gestureSettingsByDeviceType(m.pointerType),E.clickToZoom===!0&&(this.viewport.zoomBy(m.shift?1/this.zoomPerClick:this.zoomPerClick,E.zoomToRefPoint?this.viewport.pointFromPixel(m.position,!0):null),this.viewport.applyConstraints()),E.dblClickDragToZoom&&(l[this.hash].draggingToZoom===!0?(l[this.hash].lastClickTime=null,l[this.hash].draggingToZoom=!1):l[this.hash].lastClickTime=a.now()))}function ce(m){var E,U={tracker:m.eventSource,position:m.position,shift:m.shift,originalEvent:m.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",U),!U.preventDefaultAction&&this.viewport&&(E=this.gestureSettingsByDeviceType(m.pointerType),E.dblClickToZoom&&(this.viewport.zoomBy(m.shift?1/this.zoomPerClick:this.zoomPerClick,E.zoomToRefPoint?this.viewport.pointFromPixel(m.position,!0):null),this.viewport.applyConstraints()))}function Ce(m){var E,U={tracker:m.eventSource,pointerType:m.pointerType,position:m.position,delta:m.delta,speed:m.speed,direction:m.direction,shift:m.shift,originalEvent:m.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",U),E=this.gestureSettingsByDeviceType(m.pointerType),!U.preventDefaultAction&&this.viewport){if(E.dblClickDragToZoom&&l[this.hash].draggingToZoom){var $=Math.pow(this.zoomPerDblClickDrag,m.delta.y/50);this.viewport.zoomBy($)}else if(E.dragToPan&&!l[this.hash].draggingToZoom){if(this.panHorizontal||(m.delta.x=0),this.panVertical||(m.delta.y=0),this.viewport.flipped&&(m.delta.x=-m.delta.x),this.constrainDuringPan){var ee=this.viewport.deltaPointsFromPixels(m.delta.negate());this.viewport.centerSpringX.target.value+=ee.x,this.viewport.centerSpringY.target.value+=ee.y;var ye=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=ee.x,this.viewport.centerSpringY.target.value-=ee.y,ye.xConstrained&&(m.delta.x=0),ye.yConstrained&&(m.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(m.delta.negate()),E.flickEnabled&&!this.constrainDuringPan)}}}function Te(m){var E,U={tracker:m.eventSource,pointerType:m.pointerType,position:m.position,speed:m.speed,direction:m.direction,shift:m.shift,originalEvent:m.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",U),E=this.gestureSettingsByDeviceType(m.pointerType),!U.preventDefaultAction&&this.viewport){if(!l[this.hash].draggingToZoom&&E.flickEnabled&&m.speed>=E.flickMinSpeed){var $=0;this.panHorizontal&&($=E.flickMomentum*m.speed*Math.cos(m.direction));var ee=0;this.panVertical&&(ee=E.flickMomentum*m.speed*Math.sin(m.direction));var ye=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),le=this.viewport.pointFromPixel(new a.Point(ye.x-$,ye.y-ee));this.viewport.panTo(le,!1)}this.viewport.applyConstraints()}E.dblClickDragToZoom&&l[this.hash].draggingToZoom===!0&&(l[this.hash].draggingToZoom=!1)}function V(m){this.raiseEvent("canvas-enter",{tracker:m.eventSource,pointerType:m.pointerType,position:m.position,buttons:m.buttons,pointers:m.pointers,insideElementPressed:m.insideElementPressed,buttonDownAny:m.buttonDownAny,originalEvent:m.originalEvent})}function we(m){this.raiseEvent("canvas-exit",{tracker:m.eventSource,pointerType:m.pointerType,position:m.position,buttons:m.buttons,pointers:m.pointers,insideElementPressed:m.insideElementPressed,buttonDownAny:m.buttonDownAny,originalEvent:m.originalEvent})}function ze(m){var E;if(this.raiseEvent("canvas-press",{tracker:m.eventSource,pointerType:m.pointerType,position:m.position,insideElementPressed:m.insideElementPressed,insideElementReleased:m.insideElementReleased,originalEvent:m.originalEvent}),E=this.gestureSettingsByDeviceType(m.pointerType),E.dblClickDragToZoom){var U=l[this.hash].lastClickTime,$=a.now();if(U===null)return;$-U<this.dblClickTimeThreshold&&(l[this.hash].draggingToZoom=!0),l[this.hash].lastClickTime=null}}function ct(m){this.raiseEvent("canvas-release",{tracker:m.eventSource,pointerType:m.pointerType,position:m.position,insideElementPressed:m.insideElementPressed,insideElementReleased:m.insideElementReleased,originalEvent:m.originalEvent})}function Pe(m){this.raiseEvent("canvas-nonprimary-press",{tracker:m.eventSource,position:m.position,pointerType:m.pointerType,button:m.button,buttons:m.buttons,originalEvent:m.originalEvent})}function Fe(m){this.raiseEvent("canvas-nonprimary-release",{tracker:m.eventSource,position:m.position,pointerType:m.pointerType,button:m.button,buttons:m.buttons,originalEvent:m.originalEvent})}function Je(m){var E,U,$,ee,ye={tracker:m.eventSource,pointerType:m.pointerType,gesturePoints:m.gesturePoints,lastCenter:m.lastCenter,center:m.center,lastDistance:m.lastDistance,distance:m.distance,shift:m.shift,originalEvent:m.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",ye),this.viewport&&(E=this.gestureSettingsByDeviceType(m.pointerType),E.pinchToZoom&&(!ye.preventDefaultPanAction||!ye.preventDefaultZoomAction)&&(U=this.viewport.pointFromPixel(m.center,!0),E.zoomToRefPoint&&!ye.preventDefaultPanAction&&($=this.viewport.pointFromPixel(m.lastCenter,!0),ee=$.minus(U),this.panHorizontal||(ee.x=0),this.panVertical||(ee.y=0),this.viewport.panBy(ee,!0)),ye.preventDefaultZoomAction||this.viewport.zoomBy(m.distance/m.lastDistance,U,!0),this.viewport.applyConstraints()),E.pinchRotate&&!ye.preventDefaultRotateAction)){var le=Math.atan2(m.gesturePoints[0].currentPos.y-m.gesturePoints[1].currentPos.y,m.gesturePoints[0].currentPos.x-m.gesturePoints[1].currentPos.x),Re=Math.atan2(m.gesturePoints[0].lastPos.y-m.gesturePoints[1].lastPos.y,m.gesturePoints[0].lastPos.x-m.gesturePoints[1].lastPos.x);U=this.viewport.pointFromPixel(m.center,!0),this.viewport.rotateTo(this.viewport.getRotation(!0)+(le-Re)*(180/Math.PI),U,!0)}}function dt(m){this.raiseEvent("canvas-focus",{tracker:m.eventSource,originalEvent:m.originalEvent})}function _t(m){this.raiseEvent("canvas-blur",{tracker:m.eventSource,originalEvent:m.originalEvent})}function G(m){var E,U,$,ee,ye;ee=a.now(),ye=ee-this._lastScrollTime,ye>this.minScrollDeltaTime?(this._lastScrollTime=ee,E={tracker:m.eventSource,position:m.position,scroll:m.scroll,shift:m.shift,originalEvent:m.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",E),!E.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(m.position.x=this.viewport.getContainerSize().x-m.position.x),U=this.gestureSettingsByDeviceType(m.pointerType),U.scrollToZoom&&($=Math.pow(this.zoomPerScroll,m.scroll),this.viewport.zoomBy($,U.zoomToRefPoint?this.viewport.pointFromPixel(m.position,!0):null),this.viewport.applyConstraints())),m.preventDefault=E.preventDefault):m.preventDefault=!0}function ae(m){l[this.hash].mouseInside=!0,C(this),this.raiseEvent("container-enter",{tracker:m.eventSource,pointerType:m.pointerType,position:m.position,buttons:m.buttons,pointers:m.pointers,insideElementPressed:m.insideElementPressed,buttonDownAny:m.buttonDownAny,originalEvent:m.originalEvent})}function me(m){m.pointers<1&&(l[this.hash].mouseInside=!1,l[this.hash].animating||v(this)),this.raiseEvent("container-exit",{tracker:m.eventSource,pointerType:m.pointerType,position:m.position,buttons:m.buttons,pointers:m.pointers,insideElementPressed:m.insideElementPressed,buttonDownAny:m.buttonDownAny,originalEvent:m.originalEvent})}function Ne(m){z(m),m.isOpen()?m._updateRequestId=c(m,Ne):m._updateRequestId=!1}function be(m,E){var U=m.viewport,$=U.getZoom(),ee=U.getCenter();U.resize(E,m.preserveImageSizeOnResize),U.panTo(ee,!0);var ye;if(m.preserveImageSizeOnResize)ye=l[m.hash].prevContainerSize.x/E.x;else{var le=new a.Point(0,0),Re=new a.Point(l[m.hash].prevContainerSize.x,l[m.hash].prevContainerSize.y).distanceTo(le),Ge=new a.Point(E.x,E.y).distanceTo(le);ye=Ge/Re*l[m.hash].prevContainerSize.x/E.x}U.zoomTo($*ye,null,!0),l[m.hash].prevContainerSize=E,l[m.hash].forceRedraw=!0,l[m.hash].needsResize=!1,l[m.hash].forceResize=!1}function z(m){if(!(m._opening||!l[m.hash])){if(m.autoResize||l[m.hash].forceResize){var E;if(m._autoResizePolling){E=f(m.container);var U=l[m.hash].prevContainerSize;E.equals(U)||(l[m.hash].needsResize=!0)}l[m.hash].needsResize&&be(m,E||f(m.container))}var $=m.viewport.update(),ee=m.world.update()||$;$&&m.raiseEvent("viewport-change"),m.referenceStrip&&(ee=m.referenceStrip.update(m.viewport)||ee);var ye=l[m.hash].animating;!ye&&ee&&(m.raiseEvent("animation-start"),C(m));var le=ye&&!ee;le&&(l[m.hash].animating=!1),(ee||le||l[m.hash].forceRedraw||m.world.needsDraw())&&(I(m),m._drawOverlays(),m.navigator&&m.navigator.update(m.viewport),l[m.hash].forceRedraw=!1,ee&&m.raiseEvent("animation")),le&&(m.raiseEvent("animation-finish"),l[m.hash].mouseInside||v(m)),l[m.hash].animating=ee}}function I(m){m.imageLoader.clear(),m.drawer.clear(),m.world.draw(),m.raiseEvent("update-viewport",{})}function Q(m,E){return m?m+E:E}function ie(){l[this.hash].lastZoomTime=a.now(),l[this.hash].zoomFactor=this.zoomPerSecond,l[this.hash].zooming=!0,Be(this)}function xe(){l[this.hash].lastZoomTime=a.now(),l[this.hash].zoomFactor=1/this.zoomPerSecond,l[this.hash].zooming=!0,Be(this)}function _e(){l[this.hash].zooming=!1}function Be(m){a.requestAnimationFrame(a.delegate(m,We))}function We(){var m,E,U;l[this.hash].zooming&&this.viewport&&(m=a.now(),E=m-l[this.hash].lastZoomTime,U=Math.pow(l[this.hash].zoomFactor,E/1e3),this.viewport.zoomBy(U),this.viewport.applyConstraints(),l[this.hash].lastZoomTime=m,Be(this))}function ke(){this.viewport&&(l[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function Ft(){this.viewport&&(l[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function Pt(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function rt(){this.viewport&&this.viewport.goHome()}function ti(){this.isFullPage()&&!a.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function Tt(){if(this.viewport){var m=this.viewport.getRotation();this.viewport.flipped?m+=this.rotationIncrement:m-=this.rotationIncrement,this.viewport.setRotation(m)}}function zt(){if(this.viewport){var m=this.viewport.getRotation();this.viewport.flipped?m-=this.rotationIncrement:m+=this.rotationIncrement,this.viewport.setRotation(m)}}function St(){this.viewport.toggleFlip()}})(te),(function(a){a.Navigator=function(c){var d=c.viewer,v=this,S,C;c.element||c.id?(c.element?(c.id&&a.console.warn("Given option.id for Navigator was ignored since option.element was provided and is being used instead."),c.element.id?c.id=c.element.id:c.id="navigator-"+a.now(),this.element=c.element):this.element=document.getElementById(c.id),c.controlOptions={anchor:a.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(c.id="navigator-"+a.now(),this.element=a.makeNeutralElement("div"),c.controlOptions={anchor:a.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:c.autoFade},c.position&&(c.position==="BOTTOM_RIGHT"?c.controlOptions.anchor=a.ControlAnchor.BOTTOM_RIGHT:c.position==="BOTTOM_LEFT"?c.controlOptions.anchor=a.ControlAnchor.BOTTOM_LEFT:c.position==="TOP_RIGHT"?c.controlOptions.anchor=a.ControlAnchor.TOP_RIGHT:c.position==="TOP_LEFT"?c.controlOptions.anchor=a.ControlAnchor.TOP_LEFT:c.position==="ABSOLUTE"&&(c.controlOptions.anchor=a.ControlAnchor.ABSOLUTE,c.controlOptions.top=c.top,c.controlOptions.left=c.left,c.controlOptions.height=c.height,c.controlOptions.width=c.width))),this.element.id=c.id,this.element.className+=" navigator",c=a.extend(!0,{sizeRatio:a.DEFAULT_SETTINGS.navigatorSizeRatio},c,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:c.animationTime,autoResize:!1,minZoomImageRatio:1,background:c.background,opacity:c.opacity,borderColor:c.borderColor,displayRegionColor:c.displayRegionColor}),c.minPixelRatio=this.minPixelRatio=d.minPixelRatio,a.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new a.Point(1,1),this.totalBorderWidths=new a.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),c.controlOptions.anchor!==a.ControlAnchor.NONE&&(function(R,M){R.margin="0px",R.border=M+"px solid "+c.borderColor,R.padding="0px",R.background=c.background,R.opacity=c.opacity,R.overflow="hidden"})(this.element.style,this.borderWidth),this.displayRegion=a.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",(function(R,M){R.position="relative",R.top="0px",R.left="0px",R.fontSize="0px",R.overflow="hidden",R.border=M+"px solid "+c.displayRegionColor,R.margin="0px",R.padding="0px",R.background="transparent",R.float="left",R.cssFloat="left",R.styleFloat="left",R.zIndex=999999999,R.cursor="default",R.boxSizing="content-box"})(this.displayRegion.style,this.borderWidth),a.setElementPointerEventsNone(this.displayRegion),a.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=a.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",a.setElementPointerEventsNone(this.displayRegionContainer),a.setElementTouchActionNone(this.displayRegionContainer),d.addControl(this.element,c.controlOptions),this._resizeWithViewer=c.controlOptions.anchor!==a.ControlAnchor.ABSOLUTE&&c.controlOptions.anchor!==a.ControlAnchor.NONE,c.width&&c.height?(this.setWidth(c.width),this.setHeight(c.height)):this._resizeWithViewer&&(S=a.getElementSize(d.element),this.element.style.height=Math.round(S.y*c.sizeRatio)+"px",this.element.style.width=Math.round(S.x*c.sizeRatio)+"px",this.oldViewerSize=S,C=a.getElementSize(this.element),this.elementArea=C.x*C.y),this.oldContainerSize=new a.Point(0,0),a.Viewer.apply(this,[c]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function _(R,M){h(v.displayRegionContainer,R),h(v.displayRegion,-R),v.viewport.setRotation(R,M)}if(c.navigatorRotate){var O=c.viewer.viewport?c.viewer.viewport.getRotation():c.viewer.degrees||0;_(O,!0),c.viewer.addHandler("rotate",function(R){_(R.degrees,R.immediately)})}this.innerTracker.destroy(),this.innerTracker=new a.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:a.delegate(this,o),clickHandler:a.delegate(this,l),releaseHandler:a.delegate(this,f),scrollHandler:a.delegate(this,p),preProcessEventHandler:function(R){R.eventType==="wheel"&&(R.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",a.setElementPointerEventsNone(this.canvas),a.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){v.viewport&&v.viewport.goHome(!0)}),d.world.addHandler("item-index-change",function(R){window.setTimeout(function(){var M=v.world.getItemAt(R.previousIndex);v.world.setItemIndex(M,R.newIndex)},1)}),d.world.addHandler("remove-item",function(R){var M=R.item,X=v._getMatchingItem(M);X&&v.world.removeItem(X)}),this.update(d.viewport)},a.extend(a.Navigator.prototype,a.EventSource.prototype,a.Viewer.prototype,{updateSize:function(){if(this.viewport){var c=new a.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);c.equals(this.oldContainerSize)||(this.viewport.resize(c,!0),this.viewport.goHome(!0),this.oldContainerSize=c,this.drawer.clear(),this.world.draw())}},setWidth:function(c){this.width=c,this.element.style.width=typeof c=="number"?c+"px":c,this._resizeWithViewer=!1,this.updateSize()},setHeight:function(c){this.height=c,this.element.style.height=typeof c=="number"?c+"px":c,this._resizeWithViewer=!1,this.updateSize()},setFlip:function(c){return this.viewport.setFlip(c),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(c){u(this.displayRegion,c),u(this.canvas,c),u(this.element,c)},update:function(c){var d,v,S,C,_,O;if(d=a.getElementSize(this.viewer.element),this._resizeWithViewer&&d.x&&d.y&&!d.equals(this.oldViewerSize)&&(this.oldViewerSize=d,this.maintainSizeRatio||!this.elementArea?(v=d.x*this.sizeRatio,S=d.y*this.sizeRatio):(v=Math.sqrt(this.elementArea*(d.x/d.y)),S=this.elementArea/v),this.element.style.width=Math.round(v)+"px",this.element.style.height=Math.round(S)+"px",this.elementArea||(this.elementArea=v*S),this.updateSize()),c&&this.viewport){if(C=c.getBoundsNoRotate(!0),_=this.viewport.pixelFromPointNoRotate(C.getTopLeft(),!1),O=this.viewport.pixelFromPointNoRotate(C.getBottomRight(),!1).minus(this.totalBorderWidths),!this.navigatorRotate){var R=c.getRotation(!0);h(this.displayRegion,-R)}var M=this.displayRegion.style;M.display=this.world.getItemCount()?"block":"none",M.top=_.y.toFixed(2)+"px",M.left=_.x.toFixed(2)+"px";var X=O.x-_.x,K=O.y-_.y;M.width=Math.round(Math.max(X,0))+"px",M.height=Math.round(Math.max(K,0))+"px"}},addTiledImage:function(c){var d=this,v=c.originalTiledImage;delete c.original;var S=a.extend({},c,{success:function(C){var _=C.item;_._originalForNavigator=v,d._matchBounds(_,v,!0),d._matchOpacity(_,v),d._matchCompositeOperation(_,v);function O(){d._matchBounds(_,v)}function R(){d._matchOpacity(_,v)}function M(){d._matchCompositeOperation(_,v)}v.addHandler("bounds-change",O),v.addHandler("clip-change",O),v.addHandler("opacity-change",R),v.addHandler("composite-operation-change",M)}});return a.Viewer.prototype.addTiledImage.apply(this,[S])},destroy:function(){return a.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(c){for(var d=this.world.getItemCount(),v,S=0;S<d;S++)if(v=this.world.getItemAt(S),v._originalForNavigator===c)return v;return null},_matchBounds:function(c,d,v){var S=d.getBoundsNoRotate();c.setPosition(S.getTopLeft(),v),c.setWidth(S.width,v),c.setRotation(d.getRotation(),v),c.setClip(d.getClip()),c.setFlip(d.getFlip())},_matchOpacity:function(c,d){c.setOpacity(d.opacity)},_matchCompositeOperation:function(c,d){c.setCompositeOperation(d.compositeOperation)}});function l(c){var d={tracker:c.eventSource,position:c.position,quick:c.quick,shift:c.shift,originalEvent:c.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",d),!d.preventDefaultAction&&c.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(c.position.x=this.viewport.getContainerSize().x-c.position.x);var v=this.viewport.pointFromPixel(c.position);this.panVertical?this.panHorizontal||(v.x=this.viewer.viewport.getCenter(!0).x):v.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(v),this.viewer.viewport.applyConstraints()}}function o(c){var d={tracker:c.eventSource,position:c.position,delta:c.delta,speed:c.speed,direction:c.direction,shift:c.shift,originalEvent:c.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",d),!d.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(c.delta.x=0),this.panVertical||(c.delta.y=0),this.viewer.viewport.flipped&&(c.delta.x=-c.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(c.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function f(c){c.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function p(c){var d={tracker:c.eventSource,position:c.position,scroll:c.scroll,shift:c.shift,originalEvent:c.originalEvent,preventDefault:c.preventDefault};this.viewer.raiseEvent("navigator-scroll",d),c.preventDefault=d.preventDefault}function h(c,d){u(c,"rotate("+d+"deg)")}function u(c,d){c.style.webkitTransform=d,c.style.mozTransform=d,c.style.msTransform=d,c.style.oTransform=d,c.style.transform=d}})(te),(function(a){var l={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};a.extend(a,{getString:function(o){var f=o.split("."),p=null,h=arguments,u=l,c;for(c=0;c<f.length-1;c++)u=u[f[c]]||{};return p=u[f[c]],typeof p!="string"&&(a.console.error("Untranslated source string:",o),p=""),p.replace(/\{\d+\}/g,function(d){var v=parseInt(d.match(/\d+/),10)+1;return v<h.length?h[v]:""})},setString:function(o,f){var p=o.split("."),h=l,u;for(u=0;u<p.length-1;u++)h[p[u]]||(h[p[u]]={}),h=h[p[u]];h[p[u]]=f}})})(te),(function(a){a.Point=function(l,o){this.x=typeof l=="number"?l:0,this.y=typeof o=="number"?o:0},a.Point.prototype={clone:function(){return new a.Point(this.x,this.y)},plus:function(l){return new a.Point(this.x+l.x,this.y+l.y)},minus:function(l){return new a.Point(this.x-l.x,this.y-l.y)},times:function(l){return new a.Point(this.x*l,this.y*l)},divide:function(l){return new a.Point(this.x/l,this.y/l)},negate:function(){return new a.Point(-this.x,-this.y)},distanceTo:function(l){return Math.sqrt(Math.pow(this.x-l.x,2)+Math.pow(this.y-l.y,2))},squaredDistanceTo:function(l){return Math.pow(this.x-l.x,2)+Math.pow(this.y-l.y,2)},apply:function(l){return new a.Point(l(this.x),l(this.y))},equals:function(l){return l instanceof a.Point&&this.x===l.x&&this.y===l.y},rotate:function(l,o){o=o||new a.Point(0,0);var f,p;if(l%90===0){var h=a.positiveModulo(l,360);switch(h){case 0:f=1,p=0;break;case 90:f=0,p=1;break;case 180:f=-1,p=0;break;case 270:f=0,p=-1;break}}else{var u=l*Math.PI/180;f=Math.cos(u),p=Math.sin(u)}var c=f*(this.x-o.x)-p*(this.y-o.y)+o.x,d=p*(this.x-o.x)+f*(this.y-o.y)+o.y;return new a.Point(c,d)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}})(te),(function(a){a.TileSource=function(o,f,p,h,u,c){var d=this,v=arguments,S,C;if(a.isPlainObject(o)?S=o:S={width:v[0],height:v[1],tileSize:v[2],tileOverlap:v[3],minLevel:v[4],maxLevel:v[5]},a.EventSource.call(this),a.extend(!0,this,S),!this.success){for(C=0;C<arguments.length;C++)if(a.isFunction(arguments[C])){this.success=arguments[C];break}}this.success&&this.addHandler("ready",function(_){d.success(_)}),a.type(arguments[0])==="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new a.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=S.width&&S.height?S.width/S.height:1,this.dimensions=new a.Point(S.width,S.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=S.tileOverlap?S.tileOverlap:0,this.minLevel=S.minLevel?S.minLevel:0,this.maxLevel=S.maxLevel!==void 0&&S.maxLevel!==null?S.maxLevel:S.width&&S.height?Math.ceil(Math.log(Math.max(S.width,S.height))/Math.log(2)):0,this.success&&a.isFunction(this.success)&&this.success(this))},a.TileSource.prototype={getTileSize:function(o){return a.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(o){return this._tileWidth?this._tileWidth:this.getTileSize(o)},getTileHeight:function(o){return this._tileHeight?this._tileHeight:this.getTileSize(o)},setMaxLevel:function(o){this.maxLevel=o,this._memoizeLevelScale()},getLevelScale:function(o){return this._memoizeLevelScale(),this.getLevelScale(o)},_memoizeLevelScale:function(){var o={},f;for(f=0;f<=this.maxLevel;f++)o[f]=1/Math.pow(2,this.maxLevel-f);this.getLevelScale=function(p){return o[p]}},getNumTiles:function(o){var f=this.getLevelScale(o),p=Math.ceil(f*this.dimensions.x/this.getTileWidth(o)),h=Math.ceil(f*this.dimensions.y/this.getTileHeight(o));return new a.Point(p,h)},getPixelRatio:function(o){var f=this.dimensions.times(this.getLevelScale(o)),p=1/f.x*a.pixelDensityRatio,h=1/f.y*a.pixelDensityRatio;return new a.Point(p,h)},getClosestLevel:function(){var o,f;for(o=this.minLevel+1;o<=this.maxLevel&&(f=this.getNumTiles(o),!(f.x>1||f.y>1));o++);return o-1},getTileAtPoint:function(o,f){var p=f.x>=0&&f.x<=1&&f.y>=0&&f.y<=1/this.aspectRatio;a.console.assert(p,"[TileSource.getTileAtPoint] must be called with a valid point.");var h=this.dimensions.x*this.getLevelScale(o),u=f.x*h,c=f.y*h,d=Math.floor(u/this.getTileWidth(o)),v=Math.floor(c/this.getTileHeight(o));f.x>=1&&(d=this.getNumTiles(o).x-1);var S=1e-15;return f.y>=1/this.aspectRatio-S&&(v=this.getNumTiles(o).y-1),new a.Point(d,v)},getTileBounds:function(o,f,p,h){var u=this.dimensions.times(this.getLevelScale(o)),c=this.getTileWidth(o),d=this.getTileHeight(o),v=f===0?0:c*f-this.tileOverlap,S=p===0?0:d*p-this.tileOverlap,C=c+(f===0?1:2)*this.tileOverlap,_=d+(p===0?1:2)*this.tileOverlap,O=1/u.x;return C=Math.min(C,u.x-v),_=Math.min(_,u.y-S),h?new a.Rect(0,0,C,_):new a.Rect(v*O,S*O,C*O,_*O)},getImageInfo:function(o){var f=this,p,h,u,c,d,v,S;o&&(d=o.split("/"),v=d[d.length-1],S=v.lastIndexOf("."),S>-1&&(d[d.length-1]=v.slice(0,S)));var C=null;if(this.splitHashDataForPost){var _=o.indexOf("#");_!==-1&&(C=o.substring(_+1),o=o.substr(0,_))}h=function(O){typeof O=="string"&&(O=a.parseXml(O));var R=a.TileSource.determineType(f,O,o);if(!R){f.raiseEvent("open-failed",{message:"Unable to load TileSource",source:o});return}c=R.prototype.configure.apply(f,[O,o,C]),c.ajaxWithCredentials===void 0&&(c.ajaxWithCredentials=f.ajaxWithCredentials),u=new R(c),f.ready=!0,f.raiseEvent("ready",{tileSource:u})},o.match(/\.js$/)?(p=o.split("/").pop().replace(".js",""),a.jsonp({url:o,async:!1,callbackName:p,callback:h})):a.makeAjaxRequest({url:o,postData:C,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(O){var R=l(O);h(R)},error:function(O,R){var M;try{M="HTTP "+O.status+" attempting to load TileSource: "+o}catch{var X;typeof R>"u"||!R.toString?X="Unknown error":X=R.toString(),M=X+" attempting to load TileSource: "+o}a.console.error(M),f.raiseEvent("open-failed",{message:M,source:o,postData:C})}})},supports:function(o,f){return!1},configure:function(o,f,p){throw new Error("Method not implemented.")},getTileUrl:function(o,f,p){throw new Error("Method not implemented.")},getTilePostData:function(o,f,p){return null},getTileAjaxHeaders:function(o,f,p){return{}},getTileHashKey:function(o,f,p,h,u,c){function d(v){return u?v+"+"+JSON.stringify(u):v}return d(typeof h!="string"?o+"/"+f+"_"+p:h)},tileExists:function(o,f,p){var h=this.getNumTiles(o);return o>=this.minLevel&&o<=this.maxLevel&&f>=0&&p>=0&&f<h.x&&p<h.y},hasTransparency:function(o,f,p,h){return!!o||f.match(".png")},downloadTileStart:function(o){var f=o.userData,p=new Image;f.image=p,f.request=null;var h=function(u){if(!p){o.finish(null,f.request,"Image load failed: undefined Image instance.");return}p.onload=p.onerror=p.onabort=null,o.finish(u?null:p,f.request,u)};p.onload=function(){h()},p.onabort=p.onerror=function(){h("Image load aborted.")},o.loadWithAjax?f.request=a.makeAjaxRequest({url:o.src,withCredentials:o.ajaxWithCredentials,headers:o.ajaxHeaders,responseType:"arraybuffer",postData:o.postData,success:function(u){var c;try{c=new window.Blob([u.response])}catch(S){var d=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(S.name==="TypeError"&&d){var v=new d;v.append(u.response),c=v.getBlob()}}c.size===0?h("Empty image response."):p.src=(window.URL||window.webkitURL).createObjectURL(c)},error:function(u){h("Image load aborted - XHR error")}}):(o.crossOriginPolicy!==!1&&(p.crossOrigin=o.crossOriginPolicy),p.src=o.src)},downloadTileAbort:function(o){o.userData.request&&o.userData.request.abort();var f=o.userData.image;o.userData.image&&(f.onload=f.onerror=f.onabort=null)},createTileCache:function(o,f,p){o._data=f},destroyTileCache:function(o){o._data=null,o._renderedContext=null},getTileCacheData:function(o){return o._data},getTileCacheDataAsImage:function(o){return o._data},getTileCacheDataAsContext2D:function(o){if(!o._renderedContext){var f=document.createElement("canvas");f.width=o._data.width,f.height=o._data.height,o._renderedContext=f.getContext("2d"),o._renderedContext.drawImage(o._data,0,0),o._data=null}return o._renderedContext}},a.extend(!0,a.TileSource.prototype,a.EventSource.prototype);function l(o){var f=o.responseText,p=o.status,h,u;if(o){if(o.status!==200&&o.status!==0)throw p=o.status,h=p===404?"Not Found":o.statusText,new Error(a.getString("Errors.Status",p,h))}else throw new Error(a.getString("Errors.Security"));if(f.match(/^\s*<.*/))try{u=o.responseXML&&o.responseXML.documentElement?o.responseXML:a.parseXml(f)}catch{u=o.responseText}else if(f.match(/\s*[{[].*/))try{u=a.parseJSON(f)}catch{u=f}else u=f;return u}a.TileSource.determineType=function(o,f,p){var h;for(h in te)if(h.match(/.+TileSource$/)&&a.isFunction(te[h])&&a.isFunction(te[h].prototype.supports)&&te[h].prototype.supports.call(o,f,p))return te[h];return a.console.error("No TileSource was able to open %s %s",p,f),null}})(te),(function(a){a.DziTileSource=function(f,p,h,u,c,d,v,S,C){var _,O,R,M;if(a.isPlainObject(f)?M=f:M={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=M.tilesUrl,this.fileFormat=M.fileFormat,this.displayRects=M.displayRects,this.displayRects)for(_=this.displayRects.length-1;_>=0;_--)for(O=this.displayRects[_],R=O.minLevel;R<=O.maxLevel;R++)this._levelRects[R]||(this._levelRects[R]=[]),this._levelRects[R].push(O);a.TileSource.apply(this,[M])},a.extend(a.DziTileSource.prototype,a.TileSource.prototype,{supports:function(f,p){var h;return f.Image?h=f.Image.xmlns:f.documentElement&&(f.documentElement.localName==="Image"||f.documentElement.tagName==="Image")&&(h=f.documentElement.namespaceURI),h=(h||"").toLowerCase(),h.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||h.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(f,p,h){var u;return a.isPlainObject(f)?u=o(this,f):u=l(this,f),p&&!u.tilesUrl&&(u.tilesUrl=p.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),p.search(/\.(dzi|xml|js)\?/)!==-1?u.queryParams=p.match(/\?.*/):u.queryParams=""),u},getTileUrl:function(f,p,h){return[this.tilesUrl,f,"/",p,"_",h,".",this.fileFormat,this.queryParams].join("")},tileExists:function(f,p,h){var u=this._levelRects[f],c,d,v,S,C,_,O;if(this.minLevel&&f<this.minLevel||this.maxLevel&&f>this.maxLevel)return!1;if(!u||!u.length)return!0;for(O=u.length-1;O>=0;O--)if(c=u[O],!(f<c.minLevel||f>c.maxLevel)&&(d=this.getLevelScale(f),v=c.x*d,S=c.y*d,C=v+c.width*d,_=S+c.height*d,v=Math.floor(v/this._tileWidth),S=Math.floor(S/this._tileWidth),C=Math.ceil(C/this._tileWidth),_=Math.ceil(_/this._tileWidth),v<=p&&p<C&&S<=h&&h<_))return!0;return!1}});function l(f,p){if(!p||!p.documentElement)throw new Error(a.getString("Errors.Xml"));var h=p.documentElement,u=h.localName||h.tagName,c=p.documentElement.namespaceURI,d=null,v=[],S,C,_,O,R;if(u==="Image")try{if(O=h.getElementsByTagName("Size")[0],O===void 0&&(O=h.getElementsByTagNameNS(c,"Size")[0]),d={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:h.getAttribute("Url"),Format:h.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(h.getAttribute("Overlap"),10),TileSize:parseInt(h.getAttribute("TileSize"),10),Size:{Height:parseInt(O.getAttribute("Height"),10),Width:parseInt(O.getAttribute("Width"),10)}}},!a.imageFormatSupported(d.Image.Format))throw new Error(a.getString("Errors.ImageFormat",d.Image.Format.toUpperCase()));for(S=h.getElementsByTagName("DisplayRect"),S===void 0&&(S=h.getElementsByTagNameNS(c,"DisplayRect")[0]),R=0;R<S.length;R++)C=S[R],_=C.getElementsByTagName("Rect")[0],_===void 0&&(_=C.getElementsByTagNameNS(c,"Rect")[0]),v.push({Rect:{X:parseInt(_.getAttribute("X"),10),Y:parseInt(_.getAttribute("Y"),10),Width:parseInt(_.getAttribute("Width"),10),Height:parseInt(_.getAttribute("Height"),10),MinLevel:parseInt(C.getAttribute("MinLevel"),10),MaxLevel:parseInt(C.getAttribute("MaxLevel"),10)}});return v.length&&(d.Image.DisplayRect=v),o(f,d)}catch(K){throw K instanceof Error?K:new Error(a.getString("Errors.Dzi"))}else{if(u==="Collection")throw new Error(a.getString("Errors.Dzc"));if(u==="Error"){var M=h.getElementsByTagName("Message")[0],X=M.firstChild.nodeValue;throw new Error(X)}}throw new Error(a.getString("Errors.Dzi"))}function o(f,p){var h=p.Image,u=h.Url,c=h.Format,d=h.Size,v=h.DisplayRect||[],S=parseInt(d.Width,10),C=parseInt(d.Height,10),_=parseInt(h.TileSize,10),O=parseInt(h.Overlap,10),R=[],M,X;for(X=0;X<v.length;X++)M=v[X].Rect,R.push(new a.DisplayRect(parseInt(M.X,10),parseInt(M.Y,10),parseInt(M.Width,10),parseInt(M.Height,10),parseInt(M.MinLevel,10),parseInt(M.MaxLevel,10)));return a.extend(!0,{width:S,height:C,tileSize:_,tileOverlap:O,minLevel:null,maxLevel:null,tilesUrl:u,fileFormat:c,displayRects:R},p)}})(te),(function(a){a.IIIFTileSource=function(h){if(a.extend(!0,this,h),this._id=this["@id"]||this.id||this.identifier||null,!(this.height&&this.width&&this._id))throw new Error("IIIF required parameters (width, height, or id) not provided.");if(h.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=h.version,this.tile_width&&this.tile_height)h.tileWidth=this.tile_width,h.tileHeight=this.tile_height;else if(this.tile_width)h.tileSize=this.tile_width;else if(this.tile_height)h.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length===1)h.tileWidth=this.tiles[0].width,h.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var u=0;u<this.tiles.length;u++)for(var c=0;c<this.tiles[u].scaleFactors.length;c++){var d=this.tiles[u].scaleFactors[c];this.scale_factors.push(d),h.tileSizePerScaleFactor[d]={width:this.tiles[u].width,height:this.tiles[u].height||this.tiles[u].width}}}else if(l(h)){for(var v=Math.min(this.height,this.width),S=[256,512,1024],C=[],_=0;_<S.length;_++)S[_]<=v&&C.push(S[_]);C.length>0?h.tileSize=Math.max.apply(null,C):h.tileSize=v}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,h.levels=o(this),a.extend(!0,h,{width:h.levels[h.levels.length-1].width,height:h.levels[h.levels.length-1].height,tileSize:Math.max(h.height,h.width),tileOverlap:0,minLevel:0,maxLevel:h.levels.length-1}),this.levels=h.levels):a.console.error("Nothing in the info.json to construct image pyramids from");if(!h.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)h.maxLevel=Number(Math.round(Math.log(Math.max(this.width,this.height),2)));else{var O=Math.max.apply(null,this.scale_factors);h.maxLevel=Math.round(Math.log(O)*Math.LOG2E)}if(this.sizes){var R=this.sizes.length;(R===h.maxLevel||R===h.maxLevel+1)&&(this.levelSizes=this.sizes.slice().sort(function(M,X){return M.width-X.width}),R===h.maxLevel&&this.levelSizes.push({width:this.width,height:this.height}))}a.TileSource.apply(this,[h])},a.extend(a.IIIFTileSource.prototype,a.TileSource.prototype,{supports:function(h,u){return h.protocol&&h.protocol==="http://iiif.io/api/image"||h["@context"]&&(h["@context"]==="http://library.stanford.edu/iiif/image-api/1.1/context.json"||h["@context"]==="http://iiif.io/api/image/1/context.json")||h.profile&&h.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||h.identifier&&h.width&&h.height?!0:!!(h.documentElement&&h.documentElement.tagName==="info"&&h.documentElement.namespaceURI==="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(h,u,c){if(a.isPlainObject(h)){if(!h["@context"])h["@context"]="http://iiif.io/api/image/1.0/context.json",h["@id"]=u.replace("/info.json",""),h.version=1;else{var v=h["@context"];if(Array.isArray(v)){for(var S=0;S<v.length;S++)if(typeof v[S]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(v[S])||v[S]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){v=v[S];break}}switch(v){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":h.version=1;break;case"http://iiif.io/api/image/2/context.json":h.version=2;break;case"http://iiif.io/api/image/3/context.json":h.version=3;break;default:a.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(h.preferredFormats){for(var C=0;C<h.preferredFormats.length;C++)if(te.imageFormatSupported(h.preferredFormats[C])){h.tileFormat=h.preferredFormats[C];break}}return h}else{var d=f(h);return d["@context"]="http://iiif.io/api/image/1.0/context.json",d["@id"]=u.replace("/info.xml",""),d.version=1,d}},getTileWidth:function(h){if(this.emulateLegacyImagePyramid)return a.TileSource.prototype.getTileWidth.call(this,h);var u=Math.pow(2,this.maxLevel-h);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[u]?this.tileSizePerScaleFactor[u].width:this._tileWidth},getTileHeight:function(h){if(this.emulateLegacyImagePyramid)return a.TileSource.prototype.getTileHeight.call(this,h);var u=Math.pow(2,this.maxLevel-h);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[u]?this.tileSizePerScaleFactor[u].height:this._tileHeight},getLevelScale:function(h){if(this.emulateLegacyImagePyramid){var u=NaN;return this.levels.length>0&&h>=this.minLevel&&h<=this.maxLevel&&(u=this.levels[h].width/this.levels[this.maxLevel].width),u}return a.TileSource.prototype.getLevelScale.call(this,h)},getNumTiles:function(h){if(this.emulateLegacyImagePyramid){var u=this.getLevelScale(h);return u?new a.Point(1,1):new a.Point(0,0)}if(this.levelSizes){var c=this.levelSizes[h],d=Math.ceil(c.width/this.getTileWidth(h)),v=Math.ceil(c.height/this.getTileHeight(h));return new a.Point(d,v)}else return a.TileSource.prototype.getNumTiles.call(this,h)},getTileAtPoint:function(h,u){if(this.emulateLegacyImagePyramid)return new a.Point(0,0);if(this.levelSizes){var c=u.x>=0&&u.x<=1&&u.y>=0&&u.y<=1/this.aspectRatio;a.console.assert(c,"[TileSource.getTileAtPoint] must be called with a valid point.");var d=this.levelSizes[h].width,v=u.x*d,S=u.y*d,C=Math.floor(v/this.getTileWidth(h)),_=Math.floor(S/this.getTileHeight(h));u.x>=1&&(C=this.getNumTiles(h).x-1);var O=1e-15;return u.y>=1/this.aspectRatio-O&&(_=this.getNumTiles(h).y-1),new a.Point(C,_)}return a.TileSource.prototype.getTileAtPoint.call(this,h,u)},getTileUrl:function(h,u,c){if(this.emulateLegacyImagePyramid){var d=null;return this.levels.length>0&&h>=this.minLevel&&h<=this.maxLevel&&(d=this.levels[h].url),d}var v="0",S=Math.pow(.5,this.maxLevel-h),C,_,O,R,M,X,K,ce,Ce,Te,V,we,ze,ct,Pe,Fe;return this.levelSizes?(C=this.levelSizes[h].width,_=this.levelSizes[h].height):(C=Math.ceil(this.width*S),_=Math.ceil(this.height*S)),O=this.getTileWidth(h),R=this.getTileHeight(h),M=Math.round(O/S),X=Math.round(R/S),this.version===1?Pe="native."+this.tileFormat:Pe="default."+this.tileFormat,C<O&&_<R?(this.version===2&&C===this.width?we="full":this.version===3&&C===this.width&&_===this.height?we="max":this.version===3?we=C+","+_:we=C+",",K="full"):(ce=u*M,Ce=c*X,Te=Math.min(M,this.width-ce),V=Math.min(X,this.height-Ce),u===0&&c===0&&Te===this.width&&V===this.height?K="full":K=[ce,Ce,Te,V].join(","),ze=Math.min(O,C-u*O),ct=Math.min(R,_-c*R),this.version===2&&ze===this.width?we="full":this.version===3&&ze===this.width&&ct===this.height?we="max":this.version===3?we=ze+","+ct:we=ze+","),Fe=[this._id,K,we,v,Pe].join("/"),Fe},__testonly__:{canBeTiled:l,constructLevels:o}});function l(h){var u=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],c=Array.isArray(h.profile)?h.profile[0]:h.profile,d=u.indexOf(c)!==-1,v=!1;return h.version===2&&h.profile.length>1&&h.profile[1].supports&&(v=h.profile[1].supports.indexOf("sizeByW")!==-1),h.version===3&&h.extraFeatures&&(v=h.extraFeatures.indexOf("sizeByWh")!==-1),!d||v}function o(h){for(var u=[],c=0;c<h.sizes.length;c++)u.push({url:h._id+"/full/"+h.sizes[c].width+","+(h.version===3?h.sizes[c].height:"")+"/0/default."+h.tileFormat,width:h.sizes[c].width,height:h.sizes[c].height});return u.sort(function(d,v){return d.width-v.width})}function f(h){if(!h||!h.documentElement)throw new Error(a.getString("Errors.Xml"));var u=h.documentElement,c=u.tagName,d=null;if(c==="info")try{return d={},p(u,d),d}catch(v){throw v instanceof Error?v:new Error(a.getString("Errors.IIIF"))}throw new Error(a.getString("Errors.IIIF"))}function p(h,u,c){var d,v;if(h.nodeType===3&&c)v=h.nodeValue.trim(),v.match(/^\d*$/)&&(v=Number(v)),u[c]?(a.isArray(u[c])||(u[c]=[u[c]]),u[c].push(v)):u[c]=v;else if(h.nodeType===1)for(d=0;d<h.childNodes.length;d++)p(h.childNodes[d],u,h.nodeName)}})(te),(function(a){a.OsmTileSource=function(l,o,f,p,h){var u;a.isPlainObject(l)?u=l:u={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!u.width||!u.height)&&(u.width=65572864,u.height=65572864),u.tileSize||(u.tileSize=256,u.tileOverlap=0),u.tilesUrl||(u.tilesUrl="http://tile.openstreetmap.org/"),u.minLevel=8,a.TileSource.apply(this,[u])},a.extend(a.OsmTileSource.prototype,a.TileSource.prototype,{supports:function(l,o){return l.type&&l.type==="openstreetmaps"},configure:function(l,o,f){return l},getTileUrl:function(l,o,f){return this.tilesUrl+(l-8)+"/"+o+"/"+f+".png"}})})(te),(function(a){a.TmsTileSource=function(l,o,f,p,h){var u;a.isPlainObject(l)?u=l:u={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var c=Math.ceil(u.width/256)*256,d=Math.ceil(u.height/256)*256,v;c>d?v=c/256:v=d/256,u.maxLevel=Math.ceil(Math.log(v)/Math.log(2))-1,u.tileSize=256,u.width=c,u.height=d,a.TileSource.apply(this,[u])},a.extend(a.TmsTileSource.prototype,a.TileSource.prototype,{supports:function(l,o){return l.type&&l.type==="tiledmapservice"},configure:function(l,o,f){return l},getTileUrl:function(l,o,f){var p=this.getNumTiles(l).y-1;return this.tilesUrl+l+"/"+o+"/"+(p-f)+".png"}})})(te),(function(a){a.ZoomifyTileSource=function(l){typeof l.tileSize>"u"&&(l.tileSize=256),typeof l.fileFormat>"u"&&(l.fileFormat="jpg",this.fileFormat=l.fileFormat);var o={x:l.width,y:l.height};for(l.imageSizes=[{x:l.width,y:l.height}],l.gridSize=[this._getGridSize(l.width,l.height,l.tileSize)];parseInt(o.x,10)>l.tileSize||parseInt(o.y,10)>l.tileSize;)o.x=Math.floor(o.x/2),o.y=Math.floor(o.y/2),l.imageSizes.push({x:o.x,y:o.y}),l.gridSize.push(this._getGridSize(o.x,o.y,l.tileSize));l.imageSizes.reverse(),l.gridSize.reverse(),l.minLevel=0,l.maxLevel=l.gridSize.length-1,te.TileSource.apply(this,[l])},a.extend(a.ZoomifyTileSource.prototype,a.TileSource.prototype,{_getGridSize:function(l,o,f){return{x:Math.ceil(l/f),y:Math.ceil(o/f)}},_calculateAbsoluteTileNumber:function(l,o,f){for(var p=0,h={},u=0;u<l;u++)h=this.gridSize[u],p+=h.x*h.y;return h=this.gridSize[l],p+=h.x*f+o,p},supports:function(l,o){return l.type&&l.type==="zoomifytileservice"},configure:function(l,o,f){return l},getTileUrl:function(l,o,f){var p=0,h=this._calculateAbsoluteTileNumber(l,o,f);return p=Math.floor(h/256),this.tilesUrl+"TileGroup"+p+"/"+l+"-"+o+"-"+f+"."+this.fileFormat}})})(te),(function(a){a.LegacyTileSource=function(p){var h,u,c;a.isArray(p)&&(h={type:"legacy-image-pyramid",levels:p}),h.levels=l(h.levels),h.levels.length>0?(u=h.levels[h.levels.length-1].width,c=h.levels[h.levels.length-1].height):(u=0,c=0,a.console.error("No supported image formats found")),a.extend(!0,h,{width:u,height:c,tileSize:Math.max(c,u),tileOverlap:0,minLevel:0,maxLevel:h.levels.length>0?h.levels.length-1:0}),a.TileSource.apply(this,[h]),this.levels=h.levels},a.extend(a.LegacyTileSource.prototype,a.TileSource.prototype,{supports:function(p,h){return p.type&&p.type==="legacy-image-pyramid"||p.documentElement&&p.documentElement.getAttribute("type")==="legacy-image-pyramid"},configure:function(p,h,u){var c;return a.isPlainObject(p)?c=f(this,p):c=o(this,p),c},getLevelScale:function(p){var h=NaN;return this.levels.length>0&&p>=this.minLevel&&p<=this.maxLevel&&(h=this.levels[p].width/this.levels[this.maxLevel].width),h},getNumTiles:function(p){var h=this.getLevelScale(p);return h?new a.Point(1,1):new a.Point(0,0)},getTileUrl:function(p,h,u){var c=null;return this.levels.length>0&&p>=this.minLevel&&p<=this.maxLevel&&(c=this.levels[p].url),c}});function l(p){var h=[],u,c;for(c=0;c<p.length;c++)u=p[c],u.height&&u.width&&u.url?h.push({url:u.url,width:Number(u.width),height:Number(u.height)}):a.console.error("Unsupported image format: %s",u.url?u.url:"<no URL>");return h.sort(function(d,v){return d.height-v.height})}function o(p,h){if(!h||!h.documentElement)throw new Error(a.getString("Errors.Xml"));var u=h.documentElement,c=u.tagName,d=null,v=[],S,C;if(c==="image")try{for(d={type:u.getAttribute("type"),levels:[]},v=u.getElementsByTagName("level"),C=0;C<v.length;C++)S=v[C],d.levels.push({url:S.getAttribute("url"),width:parseInt(S.getAttribute("width"),10),height:parseInt(S.getAttribute("height"),10)});return f(p,d)}catch(_){throw _ instanceof Error?_:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(c==="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(c==="error")throw new Error("Error: "+h)}throw new Error("Unknown element "+c)}function f(p,h){return h.levels}})(te),(function(a){a.ImageTileSource=function(l){l=a.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},l),a.TileSource.apply(this,[l])},a.extend(a.ImageTileSource.prototype,a.TileSource.prototype,{supports:function(l,o){return l.type&&l.type==="image"},configure:function(l,o,f){return l},getImageInfo:function(l){var o=this._image=new Image,f=this;this.crossOriginPolicy&&(o.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(o.useCredentials=this.ajaxWithCredentials),a.addEvent(o,"load",function(){f.width=o.naturalWidth,f.height=o.naturalHeight,f.aspectRatio=f.width/f.height,f.dimensions=new a.Point(f.width,f.height),f._tileWidth=f.width,f._tileHeight=f.height,f.tileOverlap=0,f.minLevel=0,f.levels=f._buildLevels(),f.maxLevel=f.levels.length-1,f.ready=!0,f.raiseEvent("ready",{tileSource:f})}),a.addEvent(o,"error",function(){f.raiseEvent("open-failed",{message:"Error loading image at "+l,source:l})}),o.src=l},getLevelScale:function(l){var o=NaN;return l>=this.minLevel&&l<=this.maxLevel&&(o=this.levels[l].width/this.levels[this.maxLevel].width),o},getNumTiles:function(l){var o=this.getLevelScale(l);return o?new a.Point(1,1):new a.Point(0,0)},getTileUrl:function(l,o,f){var p=null;return l>=this.minLevel&&l<=this.maxLevel&&(p=this.levels[l].url),p},getContext2D:function(l,o,f){var p=null;return l>=this.minLevel&&l<=this.maxLevel&&(p=this.levels[l].context2D),p},destroy:function(){this._freeupCanvasMemory()},_buildLevels:function(){var l=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!a.supportsCanvas||!this.useCanvas)return delete this._image,l;var o=this._image.naturalWidth,f=this._image.naturalHeight,p=document.createElement("canvas"),h=p.getContext("2d");if(p.width=o,p.height=f,h.drawImage(this._image,0,0,o,f),l[0].context2D=h,delete this._image,a.isCanvasTainted(p))return l;for(;o>=2&&f>=2;){o=Math.floor(o/2),f=Math.floor(f/2);var u=document.createElement("canvas"),c=u.getContext("2d");u.width=o,u.height=f,c.drawImage(p,0,0,o,f),l.splice(0,0,{context2D:c,width:o,height:f}),p=u,h=c}return l},_freeupCanvasMemory:function(){for(var l=0;l<this.levels.length;l++)this.levels[l].context2D&&(this.levels[l].context2D.canvas.height=0,this.levels[l].context2D.canvas.width=0)}})})(te),(function(a){a.TileSourceCollection=function(l,o,f,p){a.console.error("TileSourceCollection is deprecated; use World instead")}})(te),(function(a){a.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},a.Button=function(c){var d=this;a.EventSource.call(this),a.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:a.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:a.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},c),this.element=c.element||a.makeNeutralElement("div"),c.element||(this.imgRest=a.makeTransparentImage(this.srcRest),this.imgGroup=a.makeTransparentImage(this.srcGroup),this.imgHover=a.makeTransparentImage(this.srcHover),this.imgDown=a.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,a.setElementPointerEventsNone(this.imgRest),a.setElementPointerEventsNone(this.imgGroup),a.setElementPointerEventsNone(this.imgHover),a.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",a.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",a.Browser.vendor===a.BROWSERS.FIREFOX&&a.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=a.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new a.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(v){v.insideElementPressed?(h(d,a.ButtonState.DOWN),d.raiseEvent("enter",{originalEvent:v.originalEvent})):v.buttonDownAny||h(d,a.ButtonState.HOVER)},focusHandler:function(v){d.tracker.enterHandler(v),d.raiseEvent("focus",{originalEvent:v.originalEvent})},leaveHandler:function(v){u(d,a.ButtonState.GROUP),v.insideElementPressed&&d.raiseEvent("exit",{originalEvent:v.originalEvent})},blurHandler:function(v){d.tracker.leaveHandler(v),d.raiseEvent("blur",{originalEvent:v.originalEvent})},pressHandler:function(v){h(d,a.ButtonState.DOWN),d.raiseEvent("press",{originalEvent:v.originalEvent})},releaseHandler:function(v){v.insideElementPressed&&v.insideElementReleased?(u(d,a.ButtonState.HOVER),d.raiseEvent("release",{originalEvent:v.originalEvent})):v.insideElementPressed?u(d,a.ButtonState.GROUP):h(d,a.ButtonState.HOVER)},clickHandler:function(v){v.quick&&d.raiseEvent("click",{originalEvent:v.originalEvent})},keyHandler:function(v){v.keyCode===13?(d.raiseEvent("click",{originalEvent:v.originalEvent}),d.raiseEvent("release",{originalEvent:v.originalEvent}),v.preventDefault=!0):v.preventDefault=!1}}),u(this,a.ButtonState.REST)},a.extend(a.Button.prototype,a.EventSource.prototype,{notifyGroupEnter:function(){h(this,a.ButtonState.GROUP)},notifyGroupExit:function(){u(this,a.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,this.tracker.setTracking(!1),a.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,this.tracker.setTracking(!0),a.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}});function l(c){a.requestAnimationFrame(function(){o(c)})}function o(c){var d,v,S;c.shouldFade&&(d=a.now(),v=d-c.fadeBeginTime,S=1-v/c.fadeLength,S=Math.min(1,S),S=Math.max(0,S),c.imgGroup&&a.setElementOpacity(c.imgGroup,S,!0),S>0&&l(c))}function f(c){c.shouldFade=!0,c.fadeBeginTime=a.now()+c.fadeDelay,window.setTimeout(function(){l(c)},c.fadeDelay)}function p(c){c.shouldFade=!1,c.imgGroup&&a.setElementOpacity(c.imgGroup,1,!0)}function h(c,d){c.element.disabled||(d>=a.ButtonState.GROUP&&c.currentState===a.ButtonState.REST&&(p(c),c.currentState=a.ButtonState.GROUP),d>=a.ButtonState.HOVER&&c.currentState===a.ButtonState.GROUP&&(c.imgHover&&(c.imgHover.style.visibility=""),c.currentState=a.ButtonState.HOVER),d>=a.ButtonState.DOWN&&c.currentState===a.ButtonState.HOVER&&(c.imgDown&&(c.imgDown.style.visibility=""),c.currentState=a.ButtonState.DOWN))}function u(c,d){c.element.disabled||(d<=a.ButtonState.HOVER&&c.currentState===a.ButtonState.DOWN&&(c.imgDown&&(c.imgDown.style.visibility="hidden"),c.currentState=a.ButtonState.HOVER),d<=a.ButtonState.GROUP&&c.currentState===a.ButtonState.HOVER&&(c.imgHover&&(c.imgHover.style.visibility="hidden"),c.currentState=a.ButtonState.GROUP),d<=a.ButtonState.REST&&c.currentState===a.ButtonState.GROUP&&(f(c),c.currentState=a.ButtonState.REST))}})(te),(function(a){a.ButtonGroup=function(l){a.extend(!0,this,{buttons:[],clickTimeThreshold:a.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:a.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},l);var o=this.buttons.concat([]),f=this,p;if(this.element=l.element||a.makeNeutralElement("div"),!l.group)for(this.element.style.display="inline-block",p=0;p<o.length;p++)this.element.appendChild(o[p].element);a.setElementTouchActionNone(this.element),this.tracker=new a.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(h){var u;for(u=0;u<f.buttons.length;u++)f.buttons[u].notifyGroupEnter()},leaveHandler:function(h){var u;if(!h.insideElementPressed)for(u=0;u<f.buttons.length;u++)f.buttons[u].notifyGroupExit()}})},a.ButtonGroup.prototype={addButton:function(l){this.buttons.push(l),this.element.appendChild(l.element)},emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var l=this.buttons.pop();this.element.removeChild(l.element),l.destroy()}this.tracker.destroy(),this.element=null}}})(te),(function(a){a.Rect=function(l,o,f,p,h){this.x=typeof l=="number"?l:0,this.y=typeof o=="number"?o:0,this.width=typeof f=="number"?f:0,this.height=typeof p=="number"?p:0,this.degrees=typeof h=="number"?h:0,this.degrees=a.positiveModulo(this.degrees,360);var u,c;this.degrees>=270?(u=this.getTopRight(),this.x=u.x,this.y=u.y,c=this.height,this.height=this.width,this.width=c,this.degrees-=270):this.degrees>=180?(u=this.getBottomRight(),this.x=u.x,this.y=u.y,this.degrees-=180):this.degrees>=90&&(u=this.getBottomLeft(),this.x=u.x,this.y=u.y,c=this.height,this.height=this.width,this.width=c,this.degrees-=90)},a.Rect.fromSummits=function(l,o,f){var p=l.distanceTo(o),h=l.distanceTo(f),u=o.minus(l),c=Math.atan(u.y/u.x);return u.x<0?c+=Math.PI:u.y<0&&(c+=2*Math.PI),new a.Rect(l.x,l.y,p,h,c/Math.PI*180)},a.Rect.prototype={clone:function(){return new a.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new a.Point(this.x,this.y)},getBottomRight:function(){return new a.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new a.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new a.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new a.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new a.Point(this.width,this.height)},equals:function(l){return l instanceof a.Rect&&this.x===l.x&&this.y===l.y&&this.width===l.width&&this.height===l.height&&this.degrees===l.degrees},times:function(l){return new a.Rect(this.x*l,this.y*l,this.width*l,this.height*l,this.degrees)},translate:function(l){return new a.Rect(this.x+l.x,this.y+l.y,this.width,this.height,this.degrees)},union:function(l){var o=this.getBoundingBox(),f=l.getBoundingBox(),p=Math.min(o.x,f.x),h=Math.min(o.y,f.y),u=Math.max(o.x+o.width,f.x+f.width),c=Math.max(o.y+o.height,f.y+f.height);return new a.Rect(p,h,u-p,c-h)},intersection:function(l){var o=1e-10,f=[],p=this.getTopLeft();l.containsPoint(p,o)&&f.push(p);var h=this.getTopRight();l.containsPoint(h,o)&&f.push(h);var u=this.getBottomLeft();l.containsPoint(u,o)&&f.push(u);var c=this.getBottomRight();l.containsPoint(c,o)&&f.push(c);var d=l.getTopLeft();this.containsPoint(d,o)&&f.push(d);var v=l.getTopRight();this.containsPoint(v,o)&&f.push(v);var S=l.getBottomLeft();this.containsPoint(S,o)&&f.push(S);var C=l.getBottomRight();this.containsPoint(C,o)&&f.push(C);for(var _=this._getSegments(),O=l._getSegments(),R=0;R<_.length;R++)for(var M=_[R],X=0;X<O.length;X++){var K=O[X],ce=Ce(M[0],M[1],K[0],K[1]);ce&&f.push(ce)}function Ce(Fe,Je,dt,_t){var G=Je.minus(Fe),ae=_t.minus(dt),me=-ae.x*G.y+G.x*ae.y;if(me===0)return null;var Ne=(G.x*(Fe.y-dt.y)-G.y*(Fe.x-dt.x))/me,be=(ae.x*(Fe.y-dt.y)-ae.y*(Fe.x-dt.x))/me;return-o<=Ne&&Ne<=1-o&&-o<=be&&be<=1-o?new a.Point(Fe.x+be*G.x,Fe.y+be*G.y):null}if(f.length===0)return null;for(var Te=f[0].x,V=f[0].x,we=f[0].y,ze=f[0].y,ct=1;ct<f.length;ct++){var Pe=f[ct];Pe.x<Te&&(Te=Pe.x),Pe.x>V&&(V=Pe.x),Pe.y<we&&(we=Pe.y),Pe.y>ze&&(ze=Pe.y)}return new a.Rect(Te,we,V-Te,ze-we)},_getSegments:function(){var l=this.getTopLeft(),o=this.getTopRight(),f=this.getBottomLeft(),p=this.getBottomRight();return[[l,o],[o,p],[p,f],[f,l]]},rotate:function(l,o){if(l=a.positiveModulo(l,360),l===0)return this.clone();o=o||this.getCenter();var f=this.getTopLeft().rotate(l,o),p=this.getTopRight().rotate(l,o),h=p.minus(f);h=h.apply(function(c){var d=1e-15;return Math.abs(c)<d?0:c});var u=Math.atan(h.y/h.x);return h.x<0?u+=Math.PI:h.y<0&&(u+=2*Math.PI),new a.Rect(f.x,f.y,this.width,this.height,u/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var l=this.getTopLeft(),o=this.getTopRight(),f=this.getBottomLeft(),p=this.getBottomRight(),h=Math.min(l.x,o.x,f.x,p.x),u=Math.max(l.x,o.x,f.x,p.x),c=Math.min(l.y,o.y,f.y,p.y),d=Math.max(l.y,o.y,f.y,p.y);return new a.Rect(h,c,u-h,d-c)},getIntegerBoundingBox:function(){var l=this.getBoundingBox(),o=Math.floor(l.x),f=Math.floor(l.y),p=Math.ceil(l.width+l.x-o),h=Math.ceil(l.height+l.y-f);return new a.Rect(o,f,p,h)},containsPoint:function(l,o){o=o||0;var f=this.getTopLeft(),p=this.getTopRight(),h=this.getBottomLeft(),u=p.minus(f),c=h.minus(f);return(l.x-f.x)*u.x+(l.y-f.y)*u.y>=-o&&(l.x-p.x)*u.x+(l.y-p.y)*u.y<=o&&(l.x-f.x)*c.x+(l.y-f.y)*c.y>=-o&&(l.x-h.x)*c.x+(l.y-h.y)*c.y<=o},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}})(te),(function(a){var l={};a.ReferenceStrip=function(S){var C=this,_=S.viewer,O=a.getElementSize(_.element),R,M,X;for(S.id||(S.id="referencestrip-"+a.now(),this.element=a.makeNeutralElement("div"),this.element.id=S.id,this.element.className="referencestrip"),S=a.extend(!0,{sizeRatio:a.DEFAULT_SETTINGS.referenceStripSizeRatio,position:a.DEFAULT_SETTINGS.referenceStripPosition,scroll:a.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:a.DEFAULT_SETTINGS.clickTimeThreshold},S,{element:this.element}),a.extend(this,S),l[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,M=this.element.style,M.marginTop="0px",M.marginRight="0px",M.marginBottom="0px",M.marginLeft="0px",M.left="0px",M.bottom="0px",M.border="0px",M.background="#000",M.position="relative",a.setElementTouchActionNone(this.element),a.setElementOpacity(this.element,.8),this.viewer=_,this.tracker=new a.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:a.delegate(this,o),dragHandler:a.delegate(this,f),scrollHandler:a.delegate(this,p),enterHandler:a.delegate(this,u),leaveHandler:a.delegate(this,c),keyDownHandler:a.delegate(this,d),keyHandler:a.delegate(this,v),preProcessEventHandler:function(K){K.eventType==="wheel"&&(K.preventDefault=!0)}}),S.width&&S.height?(this.element.style.width=S.width+"px",this.element.style.height=S.height+"px",_.addControl(this.element,{anchor:a.ControlAnchor.BOTTOM_LEFT})):S.scroll==="horizontal"?(this.element.style.width=O.x*S.sizeRatio*_.tileSources.length+12*_.tileSources.length+"px",this.element.style.height=O.y*S.sizeRatio+"px",_.addControl(this.element,{anchor:a.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=O.y*S.sizeRatio*_.tileSources.length+12*_.tileSources.length+"px",this.element.style.width=O.x*S.sizeRatio+"px",_.addControl(this.element,{anchor:a.ControlAnchor.TOP_LEFT})),this.panelWidth=O.x*this.sizeRatio+8,this.panelHeight=O.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},X=0;X<_.tileSources.length;X++)R=a.makeNeutralElement("div"),R.id=this.element.id+"-"+X,R.style.width=C.panelWidth+"px",R.style.height=C.panelHeight+"px",R.style.display="inline",R.style.float="left",R.style.cssFloat="left",R.style.styleFloat="left",R.style.padding="2px",a.setElementTouchActionNone(R),a.setElementPointerEventsNone(R),this.element.appendChild(R),R.activePanel=!1,this.panels.push(R);h(this,this.scroll==="vertical"?O.y:O.x,0),this.setFocus(0)},a.ReferenceStrip.prototype={setFocus:function(S){var C=this.element.querySelector("#"+this.element.id+"-"+S),_=a.getElementSize(this.viewer.canvas),O=Number(this.element.style.width.replace("px","")),R=Number(this.element.style.height.replace("px","")),M=-Number(this.element.style.marginLeft.replace("px","")),X=-Number(this.element.style.marginTop.replace("px","")),K;this.currentSelected!==C&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=C,this.currentSelected.style.background="#999",this.scroll==="horizontal"?(K=Number(S)*(this.panelWidth+3),K>M+_.x-this.panelWidth?(K=Math.min(K,O-_.x),this.element.style.marginLeft=-K+"px",h(this,_.x,-K)):K<M&&(K=Math.max(0,K-_.x/2),this.element.style.marginLeft=-K+"px",h(this,_.x,-K))):(K=Number(S)*(this.panelHeight+3),K>X+_.y-this.panelHeight?(K=Math.min(K,R-_.y),this.element.style.marginTop=-K+"px",h(this,_.y,-K)):K<X&&(K=Math.max(0,K-_.y/2),this.element.style.marginTop=-K+"px",h(this,_.y,-K))),this.currentPage=S,u.call(this,{eventSource:this.tracker}))},update:function(){return!!l[this.id].animating},destroy:function(){if(this.miniViewers)for(var S in this.miniViewers)this.miniViewers[S].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}};function o(S){if(S.quick){var C;this.scroll==="horizontal"?C=Math.floor(S.position.x/(this.panelWidth+4)):C=Math.floor(S.position.y/this.panelHeight),this.viewer.goToPage(C)}this.element.focus()}function f(S){if(this.dragging=!0,this.element){var C=Number(this.element.style.marginLeft.replace("px","")),_=Number(this.element.style.marginTop.replace("px","")),O=Number(this.element.style.width.replace("px","")),R=Number(this.element.style.height.replace("px","")),M=a.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?-S.delta.x>0?C>-(O-M.x)&&(this.element.style.marginLeft=C+S.delta.x*2+"px",h(this,M.x,C+S.delta.x*2)):-S.delta.x<0&&C<0&&(this.element.style.marginLeft=C+S.delta.x*2+"px",h(this,M.x,C+S.delta.x*2)):-S.delta.y>0?_>-(R-M.y)&&(this.element.style.marginTop=_+S.delta.y*2+"px",h(this,M.y,_+S.delta.y*2)):-S.delta.y<0&&_<0&&(this.element.style.marginTop=_+S.delta.y*2+"px",h(this,M.y,_+S.delta.y*2))}}function p(S){if(this.element){var C=Number(this.element.style.marginLeft.replace("px","")),_=Number(this.element.style.marginTop.replace("px","")),O=Number(this.element.style.width.replace("px","")),R=Number(this.element.style.height.replace("px","")),M=a.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?S.scroll>0?C>-(O-M.x)&&(this.element.style.marginLeft=C-S.scroll*60+"px",h(this,M.x,C-S.scroll*60)):S.scroll<0&&C<0&&(this.element.style.marginLeft=C-S.scroll*60+"px",h(this,M.x,C-S.scroll*60)):S.scroll<0?_>M.y-R&&(this.element.style.marginTop=_+S.scroll*60+"px",h(this,M.y,_+S.scroll*60)):S.scroll>0&&_<0&&(this.element.style.marginTop=_+S.scroll*60+"px",h(this,M.y,_+S.scroll*60)),S.preventDefault=!0}}function h(S,C,_){var O,R,M,X,K,ce;for(S.scroll==="horizontal"?O=S.panelWidth:O=S.panelHeight,R=Math.ceil(C/O)+5,M=Math.ceil((Math.abs(_)+C)/O)+1,R=M-R,R=R<0?0:R,K=R;K<M&&K<S.panels.length;K++)if(ce=S.panels[K],!ce.activePanel){var Ce,Te=S.viewer.tileSources[K];Te.referenceStripThumbnailUrl?Ce={type:"image",url:Te.referenceStripThumbnailUrl}:Ce=Te,X=new a.Viewer({id:ce.id,tileSources:[Ce],element:ce,navigatorSizeRatio:S.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:S.viewer.loadTilesWithAjax,ajaxHeaders:S.viewer.ajaxHeaders,useCanvas:S.useCanvas}),a.setElementPointerEventsNone(X.canvas),a.setElementPointerEventsNone(X.container),X.innerTracker.setTracking(!1),X.outerTracker.setTracking(!1),S.miniViewers[ce.id]=X,ce.activePanel=!0}}function u(S){var C=S.eventSource.element;this.scroll==="horizontal"?C.style.marginBottom="0px":C.style.marginLeft="0px"}function c(S){var C=S.eventSource.element;this.scroll==="horizontal"?C.style.marginBottom="-"+a.getElementSize(C).y/2+"px":C.style.marginLeft="-"+a.getElementSize(C).x/2+"px"}function d(S){if(!S.ctrl&&!S.alt&&!S.meta)switch(S.keyCode){case 38:p.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),S.preventDefault=!0;break;case 40:p.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),S.preventDefault=!0;break;case 37:p.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),S.preventDefault=!0;break;case 39:p.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),S.preventDefault=!0;break;default:S.preventDefault=!1;break}else S.preventDefault=!1}function v(S){if(!S.ctrl&&!S.alt&&!S.meta)switch(S.keyCode){case 61:p.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),S.preventDefault=!0;break;case 45:p.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),S.preventDefault=!0;break;case 48:case 119:case 87:p.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),S.preventDefault=!0;break;case 115:case 83:p.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),S.preventDefault=!0;break;case 97:p.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),S.preventDefault=!0;break;case 100:p.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),S.preventDefault=!0;break;default:S.preventDefault=!1;break}else S.preventDefault=!1}})(te),(function(a){a.DisplayRect=function(l,o,f,p,h,u){a.Rect.apply(this,[l,o,f,p]),this.minLevel=h,this.maxLevel=u},a.extend(a.DisplayRect.prototype,a.Rect.prototype)})(te),(function(a){a.Spring=function(o){var f=arguments;typeof o!="object"&&(o={initial:f.length&&typeof f[0]=="number"?f[0]:void 0,springStiffness:f.length>1?f[1].springStiffness:5,animationTime:f.length>1?f[1].animationTime:1.5}),a.console.assert(typeof o.springStiffness=="number"&&o.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),a.console.assert(typeof o.animationTime=="number"&&o.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),o.exponential&&(this._exponential=!0,delete o.exponential),a.extend(!0,this,o),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:a.now()},a.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},a.Spring.prototype={resetTo:function(o){a.console.assert(!this._exponential||o!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=o,this.start.time=this.target.time=this.current.time=a.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(o){a.console.assert(!this._exponential||o!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=o,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(o){this.start.value+=o,this.target.value+=o,this._exponential&&(a.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(o){this._exponential=o,this._exponential&&(a.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=a.now();var o,f;this._exponential?(o=this.start._logValue,f=this.target._logValue):(o=this.start.value,f=this.target.value);var p=this.current.time>=this.target.time?f:o+(f-o)*l(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),h=this.current.value;return this._exponential?this.current.value=Math.exp(p):this.current.value=p,h!==this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function l(o,f){return(1-Math.exp(o*-f))/(1-Math.exp(-o))}})(te),(function(a){a.ImageJob=function(o){a.extend(!0,this,{timeout:a.DEFAULT_SETTINGS.timeout,jobId:null,tries:0},o),this.data=null,this.userData={},this.errorMsg=null},a.ImageJob.prototype={start:function(){this.tries++;var o=this,f=this.abort;this.jobId=window.setTimeout(function(){o.finish(null,null,"Image load exceeded timeout ("+o.timeout+" ms)")},this.timeout),this.abort=function(){o.source.downloadTileAbort(o),typeof f=="function"&&f()},this.source.downloadTileStart(this)},finish:function(o,f,p){this.data=o,this.request=f,this.errorMsg=p,this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},a.ImageLoader=function(o){a.extend(!0,this,{jobLimit:a.DEFAULT_SETTINGS.imageLoaderLimit,timeout:a.DEFAULT_SETTINGS.timeout,jobQueue:[],failedTiles:[],jobsInProgress:0},o)},a.ImageLoader.prototype={addJob:function(o){if(!o.source){a.console.error("ImageLoader.prototype.addJob() requires [options.source]. TileSource since new API defines how images are fetched. Creating a dummy TileSource.");var f=a.TileSource.prototype;o.source={downloadTileStart:f.downloadTileStart,downloadTileAbort:f.downloadTileAbort}}var p=this,h=function(d){l(p,d,o.callback)},u={src:o.src,tile:o.tile||{},source:o.source,loadWithAjax:o.loadWithAjax,ajaxHeaders:o.loadWithAjax?o.ajaxHeaders:null,crossOriginPolicy:o.crossOriginPolicy,ajaxWithCredentials:o.ajaxWithCredentials,postData:o.postData,callback:h,abort:o.abort,timeout:this.timeout},c=new a.ImageJob(u);!this.jobLimit||this.jobsInProgress<this.jobLimit?(c.start(),this.jobsInProgress++):this.jobQueue.push(c)},clear:function(){for(var o=0;o<this.jobQueue.length;o++){var f=this.jobQueue[o];typeof f.abort=="function"&&f.abort()}this.jobQueue=[]}};function l(o,f,p){f.errorMsg!==""&&(f.data===null||f.data===void 0)&&f.tries<1+o.tileRetryMax&&o.failedTiles.push(f);var h;o.jobsInProgress--,(!o.jobLimit||o.jobsInProgress<o.jobLimit)&&o.jobQueue.length>0&&(h=o.jobQueue.shift(),h.start(),o.jobsInProgress++),o.tileRetryMax>0&&o.jobQueue.length===0&&(!o.jobLimit||o.jobsInProgress<o.jobLimit)&&o.failedTiles.length>0&&(h=o.failedTiles.shift(),setTimeout(function(){h.start()},o.tileRetryDelay),o.jobsInProgress++),p(f.data,f.errorMsg,f.request)}})(te),(function(a){a.Tile=function(l,o,f,p,h,u,c,d,v,S,C,_){this.level=l,this.x=o,this.y=f,this.bounds=p,this.sourceBounds=S,this.exists=h,this._url=u,this.postData=C,this.context2D=c,this.loadWithAjax=d,this.ajaxHeaders=v,_===void 0&&(a.console.warn("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),_=a.TileSource.prototype.getTileHashKey(l,o,f,u,v,C)),this.cacheKey=_,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.hasTransparency=!1,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},a.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return console.warn("Tile.prototype._hasTransparencyChannel() has been deprecated and will be removed in the future. Use TileSource.prototype.hasTransparency() instead."),!!this.context2D||this.getUrl().match(".png")},drawHTML:function(l){if(!this.cacheImageRecord){a.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString());return}if(!this.loaded){a.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}if(!this.element){var o=this.getImage();if(!o)return;this.element=a.makeNeutralElement("div"),this.imgElement=o.cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"}this.element.parentNode!==l&&l.appendChild(this.element),this.imgElement.parentNode!==this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",this.flipped&&(this.style.transform="scaleX(-1)"),a.setElementOpacity(this.element,this.opacity)},get image(){return a.console.error("[Tile.image] property has been deprecated. Use [Tile.prototype.getImage] instead."),this.getImage()},get url(){return a.console.error("[Tile.url] property has been deprecated. Use [Tile.prototype.getUrl] instead."),this.getUrl()},getImage:function(){return this.cacheImageRecord.getImage()},getUrl:function(){return typeof this._url=="function"?this._url():this._url},getCanvasContext:function(){return this.context2D||this.cacheImageRecord.getRenderedContext()},drawCanvas:function(l,o,f,p,h,u){var c=this.position.times(a.pixelDensityRatio),d=this.size.times(a.pixelDensityRatio),v;if(!this.context2D&&!this.cacheImageRecord){a.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());return}if(v=this.getCanvasContext(),!this.loaded||!v){a.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}l.save(),l.globalAlpha=this.opacity,typeof f=="number"&&f!==1&&(c=c.times(f),d=d.times(f)),p instanceof a.Point&&(c=c.plus(p)),l.globalAlpha===1&&this.hasTransparency&&(h&&(c.x=Math.round(c.x),c.y=Math.round(c.y),d.x=Math.round(d.x),d.y=Math.round(d.y)),l.clearRect(c.x,c.y,d.x,d.y)),o({context:l,tile:this,rendered:v});var S,C;this.sourceBounds?(S=Math.min(this.sourceBounds.width,v.canvas.width),C=Math.min(this.sourceBounds.height,v.canvas.height)):(S=v.canvas.width,C=v.canvas.height),l.translate(c.x+d.x/2,0),this.flipped&&l.scale(-1,1),l.drawImage(v.canvas,0,0,S,C,-d.x/2,c.y,d.x,d.y),l.restore()},getScaleForEdgeSmoothing:function(){var l;if(this.cacheImageRecord)l=this.cacheImageRecord.getRenderedContext();else if(this.context2D)l=this.context2D;else return a.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return l.canvas.width/(this.size.x*a.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(l,o,f){var p=Math.max(1,Math.ceil((f.x-o.x)/2)),h=Math.max(1,Math.ceil((f.y-o.y)/2));return new a.Point(p,h).minus(this.position.times(a.pixelDensityRatio).times(l||1).apply(function(u){return u%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}})(te),(function(a){a.OverlayPlacement=a.Placement,a.OverlayRotationMode=a.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),a.Overlay=function(l,o,f){var p;a.isPlainObject(l)?p=l:p={element:l,location:o,placement:f},this.element=p.element,this.style=p.element.style,this._init(p)},a.Overlay.prototype={_init:function(l){this.location=l.location,this.placement=l.placement===void 0?a.Placement.TOP_LEFT:l.placement,this.onDraw=l.onDraw,this.checkResize=l.checkResize===void 0?!0:l.checkResize,this.width=l.width===void 0?null:l.width,this.height=l.height===void 0?null:l.height,this.rotationMode=l.rotationMode||a.OverlayRotationMode.EXACT,this.location instanceof a.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=a.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new a.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(l,o){var f=a.Placement.properties[this.placement];f&&(f.isHorizontallyCentered?l.x-=o.x/2:f.isRight&&(l.x-=o.x),f.isVerticallyCentered?l.y-=o.y/2:f.isBottom&&(l.y-=o.y))},destroy:function(){var l=this.element,o=this.style;l.parentNode&&(l.parentNode.removeChild(l),l.prevElementParent&&(o.display="none",document.body.appendChild(l))),this.onDraw=null,o.top="",o.left="",o.position="",this.width!==null&&(o.width=""),this.height!==null&&(o.height="");var f=a.getCssPropertyWithVendorPrefix("transformOrigin"),p=a.getCssPropertyWithVendorPrefix("transform");f&&p&&(o[f]="",o[p]="")},drawHTML:function(l,o){var f=this.element;f.parentNode!==l&&(f.prevElementParent=f.parentNode,f.prevNextSibling=f.nextSibling,l.appendChild(f),this.style.position="absolute",this.size=a.getElementSize(f));var p=this._getOverlayPositionAndSize(o),h=p.position,u=this.size=p.size,c=p.rotate;if(this.onDraw)this.onDraw(h,u,this.element);else{var d=this.style;d.left=h.x+"px",d.top=h.y+"px",this.width!==null&&(d.width=u.x+"px"),this.height!==null&&(d.height=u.y+"px");var v=a.getCssPropertyWithVendorPrefix("transformOrigin"),S=a.getCssPropertyWithVendorPrefix("transform");v&&S&&(c?(d[v]=this._getTransformOrigin(),d[S]="rotate("+c+"deg)"):(d[v]="",d[S]="")),d.display="block"}},_getOverlayPositionAndSize:function(l){var o=l.pixelFromPoint(this.location,!0),f=this._getSizeInPixels(l);this.adjust(o,f);var p=0;if(l.getRotation(!0)&&this.rotationMode!==a.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===a.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var h=new a.Rect(o.x,o.y,f.x,f.y),u=this._getBoundingBox(h,l.getRotation(!0));o=u.getTopLeft(),f=u.getSize()}else p=l.getRotation(!0);return{position:o,size:f,rotate:p}},_getSizeInPixels:function(l){var o=this.size.x,f=this.size.y;if(this.width!==null||this.height!==null){var p=l.deltaPixelsFromPointsNoRotate(new a.Point(this.width||0,this.height||0),!0);this.width!==null&&(o=p.x),this.height!==null&&(f=p.y)}if(this.checkResize&&(this.width===null||this.height===null)){var h=this.size=a.getElementSize(this.element);this.width===null&&(o=h.x),this.height===null&&(f=h.y)}return new a.Point(o,f)},_getBoundingBox:function(l,o){var f=this._getPlacementPoint(l);return l.rotate(o,f).getBoundingBox()},_getPlacementPoint:function(l){var o=new a.Point(l.x,l.y),f=a.Placement.properties[this.placement];return f&&(f.isHorizontallyCentered?o.x+=l.width/2:f.isRight&&(o.x+=l.width),f.isVerticallyCentered?o.y+=l.height/2:f.isBottom&&(o.y+=l.height)),o},_getTransformOrigin:function(){var l="",o=a.Placement.properties[this.placement];return o&&(o.isLeft?l="left":o.isRight&&(l="right"),o.isTop?l+=" top":o.isBottom&&(l+=" bottom")),l},update:function(l,o){var f=a.isPlainObject(l)?l:{location:l,placement:o};this._init({location:f.location||this.location,placement:f.placement!==void 0?f.placement:this.placement,onDraw:f.onDraw||this.onDraw,checkResize:f.checkResize||this.checkResize,width:f.width!==void 0?f.width:this.width,height:f.height!==void 0?f.height:this.height,rotationMode:f.rotationMode||this.rotationMode})},getBounds:function(l){a.console.assert(l,"A viewport must now be passed to Overlay.getBounds.");var o=this.width,f=this.height;if(o===null||f===null){var p=l.deltaPointsFromPixelsNoRotate(this.size,!0);o===null&&(o=p.x),f===null&&(f=p.y)}var h=this.location.clone();return this.adjust(h,new a.Point(o,f)),this._adjustBoundsForRotation(l,new a.Rect(h.x,h.y,o,f))},_adjustBoundsForRotation:function(l,o){if(!l||l.getRotation(!0)===0||this.rotationMode===a.OverlayRotationMode.EXACT)return o;if(this.rotationMode===a.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return o;var f=this._getOverlayPositionAndSize(l);return l.viewerElementToViewportRectangle(new a.Rect(f.position.x,f.position.y,f.size.x,f.size.y))}return o.rotate(-l.getRotation(!0),this._getPlacementPoint(o))}}})(te),(function(a){a.Drawer=function(l){a.console.assert(l.viewer,"[Drawer] options.viewer is required");var o=arguments;if(a.isPlainObject(l)||(l={source:o[0],viewport:o[1],element:o[2]}),a.console.assert(l.viewport,"[Drawer] options.viewport is required"),a.console.assert(l.element,"[Drawer] options.element is required"),l.source&&a.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=l.viewer,this.viewport=l.viewport,this.debugGridColor=typeof l.debugGridColor=="string"?[l.debugGridColor]:l.debugGridColor||a.DEFAULT_SETTINGS.debugGridColor,l.opacity&&a.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=a.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=a.getElement(l.element),this.canvas=a.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var f=this._calculateCanvasSize();this.canvas.width=f.x,this.canvas.height=f.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",a.setElementOpacity(this.canvas,this.opacity,!0),a.setElementPointerEventsNone(this.canvas),a.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},a.Drawer.prototype={addOverlay:function(l,o,f,p){return a.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(l,o,f,p),this},updateOverlay:function(l,o,f){return a.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(l,o,f),this},removeOverlay:function(l){return a.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(l),this},clearOverlays:function(){return a.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(l){var o=this.viewport.pixelFromPointNoRotate(l,!0);return new a.Point(o.x*a.pixelDensityRatio,o.y*a.pixelDensityRatio)},clipWithPolygons:function(l,o){if(this.useCanvas){var f=this._getContext(o);f.beginPath(),l.forEach(function(p){p.forEach(function(h,u){f[u===0?"moveTo":"lineTo"](h.x,h.y)})}),f.clip()}},setOpacity:function(l){a.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var o=this.viewer.world,f=0;f<o.getItemCount();f++)o.getItemAt(f).setOpacity(l);return this},getOpacity:function(){a.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var l=this.viewer.world,o=0,f=0;f<l.getItemCount();f++){var p=l.getItemAt(f).getOpacity();p>o&&(o=p)}return o},needsUpdate:function(){return a.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return a.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return a.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return a.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var l=this._calculateCanvasSize();if((this.canvas.width!==l.x||this.canvas.height!==l.y)&&(this.canvas.width=l.x,this.canvas.height=l.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var o=this._calculateSketchCanvasSize();this.sketchCanvas.width=o.x,this.sketchCanvas.height=o.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(l,o){if(this.useCanvas){var f=this._getContext(l);if(o)f.clearRect(o.x,o.y,o.width,o.height);else{var p=f.canvas;f.clearRect(0,0,p.width,p.height)}}},viewportToDrawerRectangle:function(l){var o=this.viewport.pixelFromPointNoRotate(l.getTopLeft(),!0),f=this.viewport.deltaPixelsFromPointsNoRotate(l.getSize(),!0);return new a.Rect(o.x*a.pixelDensityRatio,o.y*a.pixelDensityRatio,f.x*a.pixelDensityRatio,f.y*a.pixelDensityRatio)},drawTile:function(l,o,f,p,h,u,c){if(a.console.assert(l,"[Drawer.drawTile] tile is required"),a.console.assert(o,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var d=this._getContext(f);p=p||1,l.drawCanvas(d,o,p,h,u,c)}else l.drawHTML(this.canvas)},_getContext:function(l){var o=this.context;if(l){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var f=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=f.x,this.sketchCanvas.height=f.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var p=this;this.viewer.addHandler("rotate",function h(){if(p.viewport.getRotation()!==0){p.viewer.removeHandler("rotate",h);var u=p._calculateSketchCanvasSize();p.sketchCanvas.width=u.x,p.sketchCanvas.height=u.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}o=this.sketchContext}return o},saveContext:function(l){this.useCanvas&&this._getContext(l).save()},restoreContext:function(l){this.useCanvas&&this._getContext(l).restore()},setClip:function(l,o){if(this.useCanvas){var f=this._getContext(o);f.beginPath(),f.rect(l.x,l.y,l.width,l.height),f.clip()}},drawRectangle:function(l,o,f){if(this.useCanvas){var p=this._getContext(f);p.save(),p.fillStyle=o,p.fillRect(l.x,l.y,l.width,l.height),p.restore()}},blendSketch:function(l,o,f,p){var h=l;if(a.isPlainObject(h)||(h={opacity:l,scale:o,translate:f,compositeOperation:p}),!(!this.useCanvas||!this.sketchCanvas)){l=h.opacity,p=h.compositeOperation;var u=h.bounds;if(this.context.save(),this.context.globalAlpha=l,p&&(this.context.globalCompositeOperation=p),u)u.x<0&&(u.width+=u.x,u.x=0),u.x+u.width>this.canvas.width&&(u.width=this.canvas.width-u.x),u.y<0&&(u.height+=u.y,u.y=0),u.y+u.height>this.canvas.height&&(u.height=this.canvas.height-u.y),this.context.drawImage(this.sketchCanvas,u.x,u.y,u.width,u.height,u.x,u.y,u.width,u.height);else{o=h.scale||1,f=h.translate;var c=f instanceof a.Point?f:new a.Point(0,0),d=0,v=0;if(f){var S=this.sketchCanvas.width-this.canvas.width,C=this.sketchCanvas.height-this.canvas.height;d=Math.round(S/2),v=Math.round(C/2)}this.context.drawImage(this.sketchCanvas,c.x-d*o,c.y-v*o,(this.canvas.width+2*d)*o,(this.canvas.height+2*v)*o,-d,-v,this.canvas.width+2*d,this.canvas.height+2*v)}this.context.restore()}},drawDebugInfo:function(l,o,f,p){if(this.useCanvas){var h=this.viewer.world.getIndexOfItem(p)%this.debugGridColor.length,u=this.context;u.save(),u.lineWidth=2*a.pixelDensityRatio,u.font="small-caps bold "+13*a.pixelDensityRatio+"px arial",u.strokeStyle=this.debugGridColor[h],u.fillStyle=this.debugGridColor[h],this.viewport.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:this.viewport.getRotation(!0)}),p.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:p.getRotation(!0),point:p.viewport.pixelFromPointNoRotate(p._getRotationPoint(!0),!0)}),p.viewport.getRotation(!0)%360===0&&p.getRotation(!0)%360===0&&p._drawer.viewer.viewport.getFlip()&&p._drawer._flip(),u.strokeRect(l.position.x*a.pixelDensityRatio,l.position.y*a.pixelDensityRatio,l.size.x*a.pixelDensityRatio,l.size.y*a.pixelDensityRatio);var c=(l.position.x+l.size.x/2)*a.pixelDensityRatio,d=(l.position.y+l.size.y/2)*a.pixelDensityRatio;u.translate(c,d),u.rotate(Math.PI/180*-this.viewport.getRotation(!0)),u.translate(-c,-d),l.x===0&&l.y===0&&(u.fillText("Zoom: "+this.viewport.getZoom(),l.position.x*a.pixelDensityRatio,(l.position.y-30)*a.pixelDensityRatio),u.fillText("Pan: "+this.viewport.getBounds().toString(),l.position.x*a.pixelDensityRatio,(l.position.y-20)*a.pixelDensityRatio)),u.fillText("Level: "+l.level,(l.position.x+10)*a.pixelDensityRatio,(l.position.y+20)*a.pixelDensityRatio),u.fillText("Column: "+l.x,(l.position.x+10)*a.pixelDensityRatio,(l.position.y+30)*a.pixelDensityRatio),u.fillText("Row: "+l.y,(l.position.x+10)*a.pixelDensityRatio,(l.position.y+40)*a.pixelDensityRatio),u.fillText("Order: "+f+" of "+o,(l.position.x+10)*a.pixelDensityRatio,(l.position.y+50)*a.pixelDensityRatio),u.fillText("Size: "+l.size.toString(),(l.position.x+10)*a.pixelDensityRatio,(l.position.y+60)*a.pixelDensityRatio),u.fillText("Position: "+l.position.toString(),(l.position.x+10)*a.pixelDensityRatio,(l.position.y+70)*a.pixelDensityRatio),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(),p.getRotation(!0)%360!==0&&this._restoreRotationChanges(),p.viewport.getRotation(!0)%360===0&&p.getRotation(!0)%360===0&&p._drawer.viewer.viewport.getFlip()&&p._drawer._flip(),u.restore()}},debugRect:function(l){if(this.useCanvas){var o=this.context;o.save(),o.lineWidth=2*a.pixelDensityRatio,o.strokeStyle=this.debugGridColor[0],o.fillStyle=this.debugGridColor[0],o.strokeRect(l.x*a.pixelDensityRatio,l.y*a.pixelDensityRatio,l.width*a.pixelDensityRatio,l.height*a.pixelDensityRatio),o.restore()}},setImageSmoothingEnabled:function(l){this.useCanvas&&(this._imageSmoothingEnabled=l,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(l){l.msImageSmoothingEnabled=this._imageSmoothingEnabled,l.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(l){var o=this._getContext(l).canvas;return new a.Point(o.width,o.height)},getCanvasCenter:function(){return new a.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(l){var o=l.point?l.point.times(a.pixelDensityRatio):this.getCanvasCenter(),f=this._getContext(l.useSketch);f.save(),f.translate(o.x,o.y),this.viewer.viewport.flipped?(f.rotate(Math.PI/180*-l.degrees),f.scale(-1,1)):f.rotate(Math.PI/180*l.degrees),f.translate(-o.x,-o.y)},_flip:function(l){l=l||{};var o=l.point?l.point.times(a.pixelDensityRatio):this.getCanvasCenter(),f=this._getContext(l.useSketch);f.translate(o.x,0),f.scale(-1,1),f.translate(-o.x,0)},_restoreRotationChanges:function(l){var o=this._getContext(l);o.restore()},_calculateCanvasSize:function(){var l=a.pixelDensityRatio,o=this.viewport.getContainerSize();return{x:Math.round(o.x*l),y:Math.round(o.y*l)}},_calculateSketchCanvasSize:function(){var l=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return l;var o=Math.ceil(Math.sqrt(l.x*l.x+l.y*l.y));return{x:o,y:o}}}})(te),(function(a){a.Viewport=function(l){var o=arguments;o.length&&o[0]instanceof a.Point&&(l={containerSize:o[0],contentSize:o[1],config:o[2]}),l.config&&(a.extend(!0,l,l.config),delete l.config),this._margins=a.extend({left:0,top:0,right:0,bottom:0},l.margins||{}),delete l.margins,l.initialDegrees=l.degrees,delete l.degrees,a.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,rotationPivot:null,viewer:null,springStiffness:a.DEFAULT_SETTINGS.springStiffness,animationTime:a.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:a.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:a.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:a.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:a.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:a.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:a.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:a.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:a.DEFAULT_SETTINGS.maxZoomLevel,initialDegrees:a.DEFAULT_SETTINGS.degrees,flipped:a.DEFAULT_SETTINGS.flipped,homeFillsViewer:a.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:a.DEFAULT_SETTINGS.silenceMultiImageWarnings},l),this._updateContainerInnerSize(),this.centerSpringX=new a.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new a.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new a.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.degreesSpring=new a.Spring({initial:l.initialDegrees,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,this._setContentBounds(new a.Rect(0,0,1,1),1),this.goHome(!0),this.update()},a.Viewport.prototype={get degrees(){return a.console.warn("Accessing [Viewport.degrees] is deprecated. Use viewport.getRotation instead."),this.getRotation()},set degrees(l){a.console.warn("Setting [Viewport.degrees] is deprecated. Use viewport.rotateTo, viewport.rotateBy, or viewport.setRotation instead."),this.rotateTo(l)},resetContentSize:function(l){return a.console.assert(l,"[Viewport.resetContentSize] contentSize is required"),a.console.assert(l instanceof a.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),a.console.assert(l.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),a.console.assert(l.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new a.Rect(0,0,1,l.y/l.x),l.x),this},setHomeBounds:function(l,o){a.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(l,o)},_setContentBounds:function(l,o){a.console.assert(l,"[Viewport._setContentBounds] bounds is required"),a.console.assert(l instanceof a.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),a.console.assert(l.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),a.console.assert(l.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=l.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(o),this._contentBounds=l.rotate(this.getRotation()).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(o),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:o,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var l=this._contentAspectRatio/this.getAspectRatio(),o;return this.homeFillsViewer?o=l>=1?l:1:o=l>=1?1:l,o/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var l=this._contentBounds.getCenter(),o=1/this.getHomeZoom(),f=o/this.getAspectRatio();return new a.Rect(l.x-o/2,l.y-f/2,o,f)},goHome:function(l){return this.viewer&&this.viewer.raiseEvent("home",{immediately:l}),this.fitBounds(this.getHomeBounds(),l)},getMinZoom:function(){var l=this.getHomeZoom(),o=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*l;return o},getMaxZoom:function(){var l=this.maxZoomLevel;return l||(l=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,l/=this._contentBounds.width),Math.max(l,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new a.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return a.extend({},this._margins)},setMargins:function(l){a.console.assert(a.type(l)==="object","[Viewport.setMargins] margins must be an object"),this._margins=a.extend({left:0,top:0,right:0,bottom:0},l),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(l){return this.getBoundsNoRotate(l).rotate(-this.getRotation(l))},getBoundsNoRotate:function(l){var o=this.getCenter(l),f=1/this.getZoom(l),p=f/this.getAspectRatio();return new a.Rect(o.x-f/2,o.y-p/2,f,p)},getBoundsWithMargins:function(l){return this.getBoundsNoRotateWithMargins(l).rotate(-this.getRotation(l),this.getCenter(l))},getBoundsNoRotateWithMargins:function(l){var o=this.getBoundsNoRotate(l),f=this._containerInnerSize.x*this.getZoom(l);return o.x-=this._margins.left/f,o.y-=this._margins.top/f,o.width+=(this._margins.left+this._margins.right)/f,o.height+=(this._margins.top+this._margins.bottom)/f,o},getCenter:function(l){var o=new a.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),f=new a.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),p,h,u,c,d,v,S,C;return l?o:this.zoomPoint?(p=this.pixelFromPoint(this.zoomPoint,!0),h=this.getZoom(),u=1/h,c=u/this.getAspectRatio(),d=new a.Rect(o.x-u/2,o.y-c/2,u,c),v=this._pixelFromPoint(this.zoomPoint,d),S=v.minus(p).rotate(-this.getRotation(!0)),C=S.divide(this._containerInnerSize.x*h),f.plus(C)):f},getZoom:function(l){return l?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(l){return Math.max(Math.min(l,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(l){var o=this.viewportToViewerElementRectangle(l).getBoundingBox(),f=this.viewportToViewerElementRectangle(this._contentBoundsNoRotate).getBoundingBox(),p=!1,h=!1;if(!this.wrapHorizontal){var u=o.x+o.width,c=f.x+f.width,d,v,S;o.width>f.width?d=this.visibilityRatio*f.width:d=this.visibilityRatio*o.width,v=f.x-u+d,S=c-o.x-d,d>f.width?(o.x+=(v+S)/2,p=!0):S<0?(o.x+=S,p=!0):v>0&&(o.x+=v,p=!0)}if(!this.wrapVertical){var C=o.y+o.height,_=f.y+f.height,O,R,M;o.height>f.height?O=this.visibilityRatio*f.height:O=this.visibilityRatio*o.height,R=f.y-C+O,M=_-o.y-O,O>f.height?(o.y+=(R+M)/2,h=!0):M<0?(o.y+=M,h=!0):R>0&&(o.y+=R,h=!0)}var X=p||h,K=X?this.viewerElementToViewportRectangle(o):l.clone();return K.xConstrained=p,K.yConstrained=h,K.constraintApplied=X,K},_raiseConstraintsEvent:function(l){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:l})},applyConstraints:function(l){var o=this.getZoom(),f=this._applyZoomConstraints(o);o!==f&&this.zoomTo(f,this.zoomPoint,l);var p=this.getConstrainedBounds(!1);return p.constraintApplied&&(this.fitBounds(p,l),this._raiseConstraintsEvent(l)),this},ensureVisible:function(l){return this.applyConstraints(l)},_fitBounds:function(l,o){o=o||{};var f=o.immediately||!1,p=o.constraints||!1,h=this.getAspectRatio(),u=l.getCenter(),c=new a.Rect(l.x,l.y,l.width,l.height,l.degrees+this.getRotation()).getBoundingBox();c.getAspectRatio()>=h?c.height=c.width/h:c.width=c.height*h,c.x=u.x-c.width/2,c.y=u.y-c.height/2;var d=1/c.width;if(f)return this.panTo(u,!0),this.zoomTo(d,null,!0),p&&this.applyConstraints(!0),this;var v=this.getCenter(!0),S=this.getZoom(!0);this.panTo(v,!0),this.zoomTo(S,null,!0);var C=this.getBounds(),_=this.getZoom();if(_===0||Math.abs(d/_-1)<1e-8)return this.zoomTo(d,null,!0),this.panTo(u,f),p&&this.applyConstraints(!1),this;if(p){this.panTo(u,!1),d=this._applyZoomConstraints(d),this.zoomTo(d,null,!1);var O=this.getConstrainedBounds();this.panTo(v,!0),this.zoomTo(S,null,!0),this.fitBounds(O)}else{var R=c.rotate(-this.getRotation()),M=R.getTopLeft().times(d).minus(C.getTopLeft().times(_)).divide(d-_);this.zoomTo(d,M,f)}return this},fitBounds:function(l,o){return this._fitBounds(l,{immediately:o,constraints:!1})},fitBoundsWithConstraints:function(l,o){return this._fitBounds(l,{immediately:o,constraints:!0})},fitVertically:function(l){var o=new a.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(o,l)},fitHorizontally:function(l){var o=new a.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(o,l)},getConstrainedBounds:function(l){var o,f;return o=this.getBounds(l),f=this._applyBoundaryConstraints(o),f},panBy:function(l,o){var f=new a.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(f.plus(l),o)},panTo:function(l,o){return o?(this.centerSpringX.resetTo(l.x),this.centerSpringY.resetTo(l.y)):(this.centerSpringX.springTo(l.x),this.centerSpringY.springTo(l.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:l,immediately:o}),this},zoomBy:function(l,o,f){return this.zoomTo(this.zoomSpring.target.value*l,o,f)},zoomTo:function(l,o,f){var p=this;return this.zoomPoint=o instanceof a.Point&&!isNaN(o.x)&&!isNaN(o.y)?o:null,f?this._adjustCenterSpringsForZoomPoint(function(){p.zoomSpring.resetTo(l)}):this.zoomSpring.springTo(l),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:l,refPoint:o,immediately:f}),this},setRotation:function(l,o){return this.rotateTo(l,null,o)},getRotation:function(l){return l?this.degreesSpring.current.value:this.degreesSpring.target.value},setRotationWithPivot:function(l,o,f){return this.rotateTo(l,o,f)},rotateTo:function(l,o,f){if(!this.viewer||!this.viewer.drawer.canRotate())return this;if(this.degreesSpring.target.value===l&&this.degreesSpring.isAtTargetValue())return this;if(this.rotationPivot=o instanceof a.Point&&!isNaN(o.x)&&!isNaN(o.y)?o:null,f)if(this.rotationPivot){var p=l-this._oldDegrees;if(!p)return this.rotationPivot=null,this;this._rotateAboutPivot(l)}else this.degreesSpring.resetTo(l);else{var h=a.positiveModulo(this.degreesSpring.current.value,360),u=a.positiveModulo(l,360),c=u-h;c>180?u-=360:c<-180&&(u+=360);var d=h-u;this.degreesSpring.resetTo(l+d),this.degreesSpring.springTo(l)}return this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:l,immediately:!!f,pivot:this.rotationPivot||this.getCenter()}),this},rotateBy:function(l,o,f){return this.rotateTo(this.degreesSpring.target.value+l,o,f)},resize:function(l,o){var f=this.getBoundsNoRotate(),p=f,h;this.containerSize.x=l.x,this.containerSize.y=l.y,this._updateContainerInnerSize(),o&&(h=l.x/this.containerSize.x,p.width=f.width*h,p.height=p.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:l,maintain:o});var u=this.fitBounds(p,!0);return this.viewer&&this.viewer.raiseEvent("after-resize",{newContainerSize:l,maintain:o}),u},_updateContainerInnerSize:function(){this._containerInnerSize=new a.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var l=this;this._adjustCenterSpringsForZoomPoint(function(){l.zoomSpring.update()}),this.degreesSpring.isAtTargetValue()&&(this.rotationPivot=null),this.centerSpringX.update(),this.centerSpringY.update(),this.rotationPivot?this._rotateAboutPivot(!0):this.degreesSpring.update();var o=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom||this.degreesSpring.current.value!==this._oldDegrees;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,o},_rotateAboutPivot:function(l){var o=l===!0,f=this.rotationPivot.minus(this.getCenter());this.centerSpringX.shiftBy(f.x),this.centerSpringY.shiftBy(f.y),o?this.degreesSpring.update():this.degreesSpring.resetTo(l);var p=this.degreesSpring.current.value-this._oldDegrees,h=f.rotate(p*-1).times(-1);this.centerSpringX.shiftBy(h.x),this.centerSpringY.shiftBy(h.y)},_adjustCenterSpringsForZoomPoint:function(l){if(this.zoomPoint){var o=this.pixelFromPoint(this.zoomPoint,!0);l();var f=this.pixelFromPoint(this.zoomPoint,!0),p=f.minus(o),h=this.deltaPointsFromPixels(p,!0);this.centerSpringX.shiftBy(h.x),this.centerSpringY.shiftBy(h.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else l()},deltaPixelsFromPointsNoRotate:function(l,o){return l.times(this._containerInnerSize.x*this.getZoom(o))},deltaPixelsFromPoints:function(l,o){return this.deltaPixelsFromPointsNoRotate(l.rotate(this.getRotation(o)),o)},deltaPointsFromPixelsNoRotate:function(l,o){return l.divide(this._containerInnerSize.x*this.getZoom(o))},deltaPointsFromPixels:function(l,o){return this.deltaPointsFromPixelsNoRotate(l,o).rotate(-this.getRotation(o))},pixelFromPointNoRotate:function(l,o){return this._pixelFromPointNoRotate(l,this.getBoundsNoRotate(o))},pixelFromPoint:function(l,o){return this._pixelFromPoint(l,this.getBoundsNoRotate(o))},_pixelFromPointNoRotate:function(l,o){return l.minus(o.getTopLeft()).times(this._containerInnerSize.x/o.width).plus(new a.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(l,o){return this._pixelFromPointNoRotate(l.rotate(this.getRotation(!0),this.getCenter(!0)),o)},pointFromPixelNoRotate:function(l,o){var f=this.getBoundsNoRotate(o);return l.minus(new a.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/f.width).plus(f.getTopLeft())},pointFromPixel:function(l,o){return this.pointFromPixelNoRotate(l,o).rotate(-this.getRotation(o),this.getCenter(o))},_viewportToImageDelta:function(l,o){var f=this._contentBoundsNoRotate.width;return new a.Point(l*this._contentSizeNoRotate.x/f,o*this._contentSizeNoRotate.x/f)},viewportToImageCoordinates:function(l,o){if(l instanceof a.Point)return this.viewportToImageCoordinates(l.x,l.y);if(this.viewer){var f=this.viewer.world.getItemCount();if(f>1)this.silenceMultiImageWarnings||a.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(f===1){var p=this.viewer.world.getItemAt(0);return p.viewportToImageCoordinates(l,o,!0)}}return this._viewportToImageDelta(l-this._contentBoundsNoRotate.x,o-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(l,o){var f=this._contentBoundsNoRotate.width;return new a.Point(l/this._contentSizeNoRotate.x*f,o/this._contentSizeNoRotate.x*f)},imageToViewportCoordinates:function(l,o){if(l instanceof a.Point)return this.imageToViewportCoordinates(l.x,l.y);if(this.viewer){var f=this.viewer.world.getItemCount();if(f>1)this.silenceMultiImageWarnings||a.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(f===1){var p=this.viewer.world.getItemAt(0);return p.imageToViewportCoordinates(l,o,!0)}}var h=this._imageToViewportDelta(l,o);return h.x+=this._contentBoundsNoRotate.x,h.y+=this._contentBoundsNoRotate.y,h},imageToViewportRectangle:function(l,o,f,p){var h=l;if(h instanceof a.Rect||(h=new a.Rect(l,o,f,p)),this.viewer){var u=this.viewer.world.getItemCount();if(u>1)this.silenceMultiImageWarnings||a.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(u===1){var c=this.viewer.world.getItemAt(0);return c.imageToViewportRectangle(l,o,f,p,!0)}}var d=this.imageToViewportCoordinates(h.x,h.y),v=this._imageToViewportDelta(h.width,h.height);return new a.Rect(d.x,d.y,v.x,v.y,h.degrees)},viewportToImageRectangle:function(l,o,f,p){var h=l;if(h instanceof a.Rect||(h=new a.Rect(l,o,f,p)),this.viewer){var u=this.viewer.world.getItemCount();if(u>1)this.silenceMultiImageWarnings||a.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(u===1){var c=this.viewer.world.getItemAt(0);return c.viewportToImageRectangle(l,o,f,p,!0)}}var d=this.viewportToImageCoordinates(h.x,h.y),v=this._viewportToImageDelta(h.width,h.height);return new a.Rect(d.x,d.y,v.x,v.y,h.degrees)},viewerElementToImageCoordinates:function(l){var o=this.pointFromPixel(l,!0);return this.viewportToImageCoordinates(o)},imageToViewerElementCoordinates:function(l){var o=this.imageToViewportCoordinates(l);return this.pixelFromPoint(o,!0)},windowToImageCoordinates:function(l){a.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var o=l.minus(a.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(o)},imageToWindowCoordinates:function(l){a.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var o=this.imageToViewerElementCoordinates(l);return o.plus(a.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(l){return this.pointFromPixel(l,!0)},viewportToViewerElementCoordinates:function(l){return this.pixelFromPoint(l,!0)},viewerElementToViewportRectangle:function(l){return a.Rect.fromSummits(this.pointFromPixel(l.getTopLeft(),!0),this.pointFromPixel(l.getTopRight(),!0),this.pointFromPixel(l.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(l){return a.Rect.fromSummits(this.pixelFromPoint(l.getTopLeft(),!0),this.pixelFromPoint(l.getTopRight(),!0),this.pixelFromPoint(l.getBottomLeft(),!0))},windowToViewportCoordinates:function(l){a.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var o=l.minus(a.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(o)},viewportToWindowCoordinates:function(l){a.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var o=this.viewportToViewerElementCoordinates(l);return o.plus(a.getElementPosition(this.viewer.element))},viewportToImageZoom:function(l){if(this.viewer){var o=this.viewer.world.getItemCount();if(o>1)this.silenceMultiImageWarnings||a.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(o===1){var f=this.viewer.world.getItemAt(0);return f.viewportToImageZoom(l)}}var p=this._contentSizeNoRotate.x,h=this._containerInnerSize.x,u=this._contentBoundsNoRotate.width,c=h/p*u;return l*c},imageToViewportZoom:function(l){if(this.viewer){var o=this.viewer.world.getItemCount();if(o>1)this.silenceMultiImageWarnings||a.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(o===1){var f=this.viewer.world.getItemAt(0);return f.imageToViewportZoom(l)}}var p=this._contentSizeNoRotate.x,h=this._containerInnerSize.x,u=this._contentBoundsNoRotate.width,c=p/h/u;return l*c},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(l){return this.flipped===l?this:(this.flipped=l,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:l}),this)}}})(te),(function(a){a.TiledImage=function(h){var u=this;a.console.assert(h.tileCache,"[TiledImage] options.tileCache is required"),a.console.assert(h.drawer,"[TiledImage] options.drawer is required"),a.console.assert(h.viewer,"[TiledImage] options.viewer is required"),a.console.assert(h.imageLoader,"[TiledImage] options.imageLoader is required"),a.console.assert(h.source,"[TiledImage] options.source is required"),a.console.assert(!h.clip||h.clip instanceof a.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),a.EventSource.call(this),this._tileCache=h.tileCache,delete h.tileCache,this._drawer=h.drawer,delete h.drawer,this._imageLoader=h.imageLoader,delete h.imageLoader,h.clip instanceof a.Rect&&(this._clip=h.clip.clone()),delete h.clip;var c=h.x||0;delete h.x;var d=h.y||0;delete h.y,this.normHeight=h.source.dimensions.y/h.source.dimensions.x,this.contentAspectX=h.source.dimensions.x/h.source.dimensions.y;var v=1;h.width?(v=h.width,delete h.width,h.height&&(a.console.error("specifying both width and height to a tiledImage is not supported"),delete h.height)):h.height&&(v=h.height/this.normHeight,delete h.height);var S=h.fitBounds;delete h.fitBounds;var C=h.fitBoundsPlacement||te.Placement.CENTER;delete h.fitBoundsPlacement;var _=h.degrees||0;delete h.degrees;var O=h.ajaxHeaders;delete h.ajaxHeaders,a.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:a.DEFAULT_SETTINGS.springStiffness,animationTime:a.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:a.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:a.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:a.DEFAULT_SETTINGS.wrapVertical,immediateRender:a.DEFAULT_SETTINGS.immediateRender,blendTime:a.DEFAULT_SETTINGS.blendTime,alwaysBlend:a.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:a.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:a.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:a.DEFAULT_SETTINGS.iOSDevice,debugMode:a.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:a.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:a.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:a.DEFAULT_SETTINGS.placeholderFillStyle,opacity:a.DEFAULT_SETTINGS.opacity,preload:a.DEFAULT_SETTINGS.preload,compositeOperation:a.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:a.DEFAULT_SETTINGS.subPixelRoundingForTransparency},h),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new a.Spring({initial:c,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new a.Spring({initial:d,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new a.Spring({initial:v,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new a.Spring({initial:_,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),S&&this.fitBounds(S,C,!0),this._drawingHandler=function(R){u.viewer.raiseEvent("tile-drawing",a.extend({tiledImage:u},R))},this._ownAjaxHeaders={},this.setAjaxHeaders(O,!1)},a.extend(a.TiledImage.prototype,a.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(h){h!==this._fullyLoaded&&(this._fullyLoaded=h,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=a.now(),this._needsDraw=!0},update:function(){var h=this._xSpring.update(),u=this._ySpring.update(),c=this._scaleSpring.update(),d=this._degreesSpring.update();return h||u||c||d?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this.opacity!==0||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy()},getBounds:function(h){return this.getBoundsNoRotate(h).rotate(this.getRotation(h),this._getRotationPoint(h))},getBoundsNoRotate:function(h){return h?new a.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new a.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return a.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(h){var u=this.getBoundsNoRotate(h);if(this._clip){var c=h?this._worldWidthCurrent:this._worldWidthTarget,d=c/this.source.dimensions.x,v=this._clip.times(d);u=new a.Rect(u.x+v.x,u.y+v.y,v.width,v.height)}return u.rotate(this.getRotation(h),this._getRotationPoint(h))},getTileBounds:function(h,u,c){var d=this.source.getNumTiles(h),v=(d.x+u%d.x)%d.x,S=(d.y+c%d.y)%d.y,C=this.source.getTileBounds(h,v,S);return this.getFlip()&&(C.x=1-C.x-C.width),C.x+=(u-v)/d.x,C.y+=this._worldHeightCurrent/this._worldWidthCurrent*((c-S)/d.y),C},getContentSize:function(){return new a.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var h=this.imageToWindowCoordinates(new a.Point(0,0)),u=this.imageToWindowCoordinates(this.getContentSize());return new a.Point(u.x-h.x,u.y-h.y)},_viewportToImageDelta:function(h,u,c){var d=c?this._scaleSpring.current.value:this._scaleSpring.target.value;return new a.Point(h*(this.source.dimensions.x/d),u*(this.source.dimensions.y*this.contentAspectX/d))},viewportToImageCoordinates:function(h,u,c){var d;return h instanceof a.Point?(c=u,d=h):d=new a.Point(h,u),d=d.rotate(-this.getRotation(c),this._getRotationPoint(c)),c?this._viewportToImageDelta(d.x-this._xSpring.current.value,d.y-this._ySpring.current.value):this._viewportToImageDelta(d.x-this._xSpring.target.value,d.y-this._ySpring.target.value)},_imageToViewportDelta:function(h,u,c){var d=c?this._scaleSpring.current.value:this._scaleSpring.target.value;return new a.Point(h/this.source.dimensions.x*d,u/this.source.dimensions.y/this.contentAspectX*d)},imageToViewportCoordinates:function(h,u,c){h instanceof a.Point&&(c=u,u=h.y,h=h.x);var d=this._imageToViewportDelta(h,u);return c?(d.x+=this._xSpring.current.value,d.y+=this._ySpring.current.value):(d.x+=this._xSpring.target.value,d.y+=this._ySpring.target.value),d.rotate(this.getRotation(c),this._getRotationPoint(c))},imageToViewportRectangle:function(h,u,c,d,v){var S=h;S instanceof a.Rect?v=u:S=new a.Rect(h,u,c,d);var C=this.imageToViewportCoordinates(S.getTopLeft(),v),_=this._imageToViewportDelta(S.width,S.height,v);return new a.Rect(C.x,C.y,_.x,_.y,S.degrees+this.getRotation(v))},viewportToImageRectangle:function(h,u,c,d,v){var S=h;h instanceof a.Rect?v=u:S=new a.Rect(h,u,c,d);var C=this.viewportToImageCoordinates(S.getTopLeft(),v),_=this._viewportToImageDelta(S.width,S.height,v);return new a.Rect(C.x,C.y,_.x,_.y,S.degrees-this.getRotation(v))},viewerElementToImageCoordinates:function(h){var u=this.viewport.pointFromPixel(h,!0);return this.viewportToImageCoordinates(u)},imageToViewerElementCoordinates:function(h){var u=this.imageToViewportCoordinates(h);return this.viewport.pixelFromPoint(u,!0)},windowToImageCoordinates:function(h){var u=h.minus(te.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(u)},imageToWindowCoordinates:function(h){var u=this.imageToViewerElementCoordinates(h);return u.plus(te.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(h){var u=this._scaleSpring.current.value;return h=h.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new a.Rect((h.x-this._xSpring.current.value)/u,(h.y-this._ySpring.current.value)/u,h.width/u,h.height/u,h.degrees)},viewportToImageZoom:function(h){var u=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return u*h},imageToViewportZoom:function(h){var u=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return h/u},setPosition:function(h,u){var c=this._xSpring.target.value===h.x&&this._ySpring.target.value===h.y;if(u){if(c&&this._xSpring.current.value===h.x&&this._ySpring.current.value===h.y)return;this._xSpring.resetTo(h.x),this._ySpring.resetTo(h.y),this._needsDraw=!0}else{if(c)return;this._xSpring.springTo(h.x),this._ySpring.springTo(h.y),this._needsDraw=!0}c||this._raiseBoundsChange()},setWidth:function(h,u){this._setScale(h,u)},setHeight:function(h,u){this._setScale(h/this.normHeight,u)},setCroppingPolygons:function(h){var u=function(d){return d instanceof a.Point||typeof d.x=="number"&&typeof d.y=="number"},c=function(d){return d.map(function(v){try{if(u(v))return{x:v.x,y:v.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!a.isArray(h))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=h.map(function(d){return c(d)})}catch(d){a.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),a.console.error(d),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(h,u,c){u=u||a.Placement.CENTER;var d=a.Placement.properties[u],v=this.contentAspectX,S=0,C=0,_=1,O=1;if(this._clip&&(v=this._clip.getAspectRatio(),_=this._clip.width/this.source.dimensions.x,O=this._clip.height/this.source.dimensions.y,h.getAspectRatio()>v?(S=this._clip.x/this._clip.height*h.height,C=this._clip.y/this._clip.height*h.height):(S=this._clip.x/this._clip.width*h.width,C=this._clip.y/this._clip.width*h.width)),h.getAspectRatio()>v){var R=h.height/O,M=0;d.isHorizontallyCentered?M=(h.width-h.height*v)/2:d.isRight&&(M=h.width-h.height*v),this.setPosition(new a.Point(h.x-S+M,h.y-C),c),this.setHeight(R,c)}else{var X=h.width/_,K=0;d.isVerticallyCentered?K=(h.height-h.width/v)/2:d.isBottom&&(K=h.height-h.width/v),this.setPosition(new a.Point(h.x-S,h.y-C+K),c),this.setWidth(X,c)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(h){a.console.assert(!h||h instanceof a.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),h instanceof a.Rect?this._clip=h.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return!!this.flipped},setFlip:function(h){this.flipped=!!h,this._needsDraw=!0,this._raiseBoundsChange()},getOpacity:function(){return this.opacity},setOpacity:function(h){h!==this.opacity&&(this.opacity=h,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(h){this._preload=!!h,this._needsDraw=!0},getRotation:function(h){return h?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(h,u){this._degreesSpring.target.value===h&&this._degreesSpring.isAtTargetValue()||(u?this._degreesSpring.resetTo(h):this._degreesSpring.springTo(h),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(h){return this.getBoundsNoRotate(h).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(h){h!==this.compositeOperation&&(this.compositeOperation=h,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},setAjaxHeaders:function(h,u){if(h===null&&(h={}),!a.isPlainObject(h)){console.error("[TiledImage.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}this._ownAjaxHeaders=h,this._updateAjaxHeaders(u)},_updateAjaxHeaders:function(h){if(h===void 0&&(h=!0),a.isPlainObject(this.viewer.ajaxHeaders)?this.ajaxHeaders=a.extend({},this.viewer.ajaxHeaders,this._ownAjaxHeaders):this.ajaxHeaders=this._ownAjaxHeaders,h){var u,c,d,v;for(var S in this.tilesMatrix){u=this.source.getNumTiles(S);for(var C in this.tilesMatrix[S]){c=(u.x+C%u.x)%u.x;for(var _ in this.tilesMatrix[S][C])if(d=(u.y+_%u.y)%u.y,v=this.tilesMatrix[S][C][_],v.loadWithAjax=this.loadTilesWithAjax,v.loadWithAjax){var O=this.source.getTileAjaxHeaders(S,c,d);v.ajaxHeaders=a.extend({},this.ajaxHeaders,O)}else v.ajaxHeaders=null}}for(var R=0;R<this._imageLoader.jobQueue.length;R++){var M=this._imageLoader.jobQueue[R];M.loadWithAjax=M.tile.loadWithAjax,M.ajaxHeaders=M.tile.loadWithAjax?M.tile.ajaxHeaders:null}}},_setScale:function(h,u){var c=this._scaleSpring.target.value===h;if(u){if(c&&this._scaleSpring.current.value===h)return;this._scaleSpring.resetTo(h),this._updateForScale(),this._needsDraw=!0}else{if(c)return;this._scaleSpring.springTo(h),this._updateForScale(),this._needsDraw=!0}c||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var h=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),u=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,c=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(u/this.minPixelRatio)/Math.log(2))));return c=Math.max(c,this.source.minLevel||0),h=Math.min(h,c),{lowestLevel:h,highestLevel:c}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){var h=this.lastDrawn.pop();h.beingDrawn=!1}var u=this.viewport,c=this._viewportToTiledImageRectangle(u.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var d=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(c=c.intersection(d),c===null)return}for(var v=this._getLevelsInterval(),S=v.lowestLevel,C=v.highestLevel,_=null,O=!1,R=a.now(),M=C;M>=S;M--){var X=!1,K=u.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(M),!0).x*this._scaleSpring.current.value;if(M===S||!O&&K>=this.minPixelRatio)X=!0,O=!0;else if(!O)continue;var ce=u.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(M),!1).x*this._scaleSpring.current.value,Ce=u.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,Te=this.immediateRender?1:Ce,V=Math.min(1,(K-.5)/.5),we=Te/Math.abs(Te-ce);if(_=this._updateLevel(O,X,M,V,we,c,R,_),this._providesCoverage(this.coverage,M))break}this._drawTiles(this.lastDrawn),_&&!_.context2D?(this._loadTile(_,R),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(this._tilesLoading===0)},_getCornerTiles:function(h,u,c){var d,v;this.wrapHorizontal?(d=a.positiveModulo(u.x,1),v=a.positiveModulo(c.x,1)):(d=Math.max(0,u.x),v=Math.min(1,c.x));var S,C,_=1/this.source.aspectRatio;this.wrapVertical?(S=a.positiveModulo(u.y,_),C=a.positiveModulo(c.y,_)):(S=Math.max(0,u.y),C=Math.min(_,c.y));var O=this.source.getTileAtPoint(h,new a.Point(d,S)),R=this.source.getTileAtPoint(h,new a.Point(v,C)),M=this.source.getNumTiles(h);return this.wrapHorizontal&&(O.x+=M.x*Math.floor(u.x),R.x+=M.x*Math.floor(c.x)),this.wrapVertical&&(O.y+=M.y*Math.floor(u.y/_),R.y+=M.y*Math.floor(c.y/_)),{topLeft:O,bottomRight:R}},_updateLevel:function(h,u,c,d,v,S,C,_){var O=S.getBoundingBox().getTopLeft(),R=S.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:h,level:c,opacity:d,visibility:v,drawArea:S,topleft:O,bottomright:R,currenttime:C,best:_}),this._resetCoverage(this.coverage,c),this._resetCoverage(this.loadingCoverage,c);var M=this._getCornerTiles(c,O,R),X=M.topLeft,K=M.bottomRight,ce=this.source.getNumTiles(c),Ce=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(K.x+=1,this.wrapHorizontal||(K.x=Math.min(K.x,ce.x-1)));for(var Te=X.x;Te<=K.x;Te++)for(var V=X.y;V<=K.y;V++){var we;if(this.getFlip()){var ze=(ce.x+Te%ce.x)%ce.x;we=Te+ce.x-ze-ze-1}else we=Te;S.intersection(this.getTileBounds(c,we,V))!==null&&(_=this._updateTile(u,h,we,V,c,d,v,Ce,ce,C,_))}return _},_updateTile:function(h,u,c,d,v,S,C,_,O,R,M){var X=this._getTile(c,d,v,R,O,this._worldWidthCurrent,this._worldHeightCurrent),K=u;this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:X}),this._setCoverage(this.coverage,v,c,d,!1);var ce=X.loaded||X.loading||this._isCovered(this.loadingCoverage,v,c,d);if(this._setCoverage(this.loadingCoverage,v,c,d,ce),!X.exists||(h&&!K&&(this._isCovered(this.coverage,v,c,d)?this._setCoverage(this.coverage,v,c,d,!0):K=!0),!K))return M;if(this._positionTile(X,this.source.tileOverlap,this.viewport,_,C),!X.loaded)if(X.context2D)this._setTileLoaded(X);else{var Ce=this._tileCache.getImageRecord(X.cacheKey);Ce&&this._setTileLoaded(X,Ce.getData())}if(X.loaded){var Te=this._blendTile(X,c,d,v,S,R);Te&&(this._needsDraw=!0)}else X.loading?this._tilesLoading++:ce||(M=this._compareTiles(M,X));return M},_getTile:function(h,u,c,d,v,S,C){var _,O,R,M,X,K,ce,Ce,Te,V,we=this.tilesMatrix,ze=this.source;return we[c]||(we[c]={}),we[c][h]||(we[c][h]={}),(!we[c][h][u]||!we[c][h][u].flipped!=!this.flipped)&&(_=(v.x+h%v.x)%v.x,O=(v.y+u%v.y)%v.y,R=this.getTileBounds(c,h,u),M=ze.getTileBounds(c,_,O,!0),X=ze.tileExists(c,_,O),K=ze.getTileUrl(c,_,O),ce=ze.getTilePostData(c,_,O),this.loadTilesWithAjax?(Ce=ze.getTileAjaxHeaders(c,_,O),a.isPlainObject(this.ajaxHeaders)&&(Ce=a.extend({},this.ajaxHeaders,Ce))):Ce=null,Te=ze.getContext2D?ze.getContext2D(c,_,O):void 0,V=new a.Tile(c,h,u,R,X,K,Te,this.loadTilesWithAjax,Ce,M,ce,ze.getTileHashKey(c,_,O,K,Ce,ce)),this.getFlip()?_===0&&(V.isRightMost=!0):_===v.x-1&&(V.isRightMost=!0),O===v.y-1&&(V.isBottomMost=!0),V.flipped=this.flipped,we[c][h][u]=V),V=we[c][h][u],V.lastTouchTime=d,V},_loadTile:function(h,u){var c=this;h.loading=!0,this._imageLoader.addJob({src:h.getUrl(),tile:h,source:this.source,postData:h.postData,loadWithAjax:h.loadWithAjax,ajaxHeaders:h.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(d,v,S){c._onTileLoad(h,u,d,v,S)},abort:function(){h.loading=!1}})},_onTileLoad:function(h,u,c,d,v){if(c)h.exists=!0;else{a.console.error("Tile %s failed to load: %s - error: %s",h,h.getUrl(),d),this.viewer.raiseEvent("tile-load-failed",{tile:h,tiledImage:this,time:u,message:d,tileRequest:v}),h.loading=!1,h.exists=!1;return}if(u<this.lastResetTime){a.console.warn("Ignoring tile %s loaded before reset: %s",h,h.getUrl()),h.loading=!1;return}var S=this,C=function(){var _=S.source,O=_.getClosestLevel();S._setTileLoaded(h,c,O,v)};this._midDraw?window.setTimeout(C,1):C()},_setTileLoaded:function(h,u,c,d){var v=0,S=!1,C=this;function _(){return S&&a.console.error("Event 'tile-loaded' argument getCompletionCallback must be called synchronously. Its return value should be called asynchronously."),v++,O}function O(){v--,v===0&&(h.loading=!1,h.loaded=!0,h.hasTransparency=C.source.hasTransparency(h.context2D,h.getUrl(),h.ajaxHeaders,h.postData),h.context2D||C._tileCache.cacheTile({data:u,tile:h,cutoff:c,tiledImage:C}),C._needsDraw=!0)}var R=_();this.viewer.raiseEvent("tile-loaded",{tile:h,tiledImage:this,tileRequest:d,get image(){return a.console.error("[tile-loaded] event 'image' has been deprecated. Use 'data' property instead."),u},data:u,getCompletionCallback:_}),S=!0,R()},_positionTile:function(h,u,c,d,v){var S=h.bounds.getTopLeft();S.x*=this._scaleSpring.current.value,S.y*=this._scaleSpring.current.value,S.x+=this._xSpring.current.value,S.y+=this._ySpring.current.value;var C=h.bounds.getSize();C.x*=this._scaleSpring.current.value,C.y*=this._scaleSpring.current.value;var _=c.pixelFromPointNoRotate(S,!0),O=c.pixelFromPointNoRotate(S,!1),R=c.deltaPixelsFromPointsNoRotate(C,!0),M=c.deltaPixelsFromPointsNoRotate(C,!1),X=O.plus(M.divide(2)),K=d.squaredDistanceTo(X);u||(R=R.plus(new a.Point(1,1))),h.isRightMost&&this.wrapHorizontal&&(R.x+=.75),h.isBottomMost&&this.wrapVertical&&(R.y+=.75),h.position=_,h.size=R,h.squaredDistance=K,h.visibility=v},_blendTile:function(h,u,c,d,v,S){var C=1e3*this.blendTime,_,O;if(h.blendStart||(h.blendStart=S),_=S-h.blendStart,O=C?Math.min(1,_/C):1,this.alwaysBlend&&(O*=v),h.opacity=O,this.lastDrawn.push(h),O===1)this._setCoverage(this.coverage,d,u,c,!0),this._hasOpaqueTile=!0;else if(_<C)return!0;return!1},_compareTiles:function(h,u){return!h||u.visibility>h.visibility||u.visibility===h.visibility&&u.squaredDistance<h.squaredDistance?u:h},_drawTiles:function(h){if(!(this.opacity===0||h.length===0&&!this.placeholderFillStyle)){var u=h[0],c;u&&(c=this.opacity<1||this.compositeOperation&&this.compositeOperation!=="source-over"||!this._isBottomItem()&&this.source.hasTransparency(u.context2D,u.getUrl(),u.ajaxHeaders,u.postData));var d,v,S=this.viewport.getZoom(!0),C=this.viewportToImageZoom(S);h.length>1&&C>this.smoothTileEdgesMinZoom&&!this.iOSDevice&&this.getRotation(!0)%360===0&&a.supportsCanvas&&this.viewer.useCanvas&&(c=!0,d=u.getScaleForEdgeSmoothing(),v=u.getTranslationForEdgeSmoothing(d,this._drawer.getCanvasSize(!1),this._drawer.getCanvasSize(!0)));var _;c&&(d||(_=this.viewport.viewportToViewerElementRectangle(this.getClippedBounds(!0)).getIntegerBoundingBox(),this._drawer.viewer.viewport.getFlip()&&(this.viewport.getRotation(!0)%360!==0||this.getRotation(!0)%360!==0)&&(_.x=this._drawer.viewer.container.clientWidth-(_.x+_.width)),_=_.times(a.pixelDensityRatio)),this._drawer._clear(!0,_)),d||(this.viewport.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:c}),this.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:c}),this.viewport.getRotation(!0)%360===0&&this.getRotation(!0)%360===0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip());var O=!1;if(this._clip){this._drawer.saveContext(c);var R=this.imageToViewportRectangle(this._clip,!0);R=R.rotate(-this.getRotation(!0),this._getRotationPoint(!0));var M=this._drawer.viewportToDrawerRectangle(R);d&&(M=M.times(d)),v&&(M=M.translate(v)),this._drawer.setClip(M,c),O=!0}if(this._croppingPolygons){var X=this;this._drawer.saveContext(c);try{var K=this._croppingPolygons.map(function(ct){return ct.map(function(Pe){var Fe=X.imageToViewportCoordinates(Pe.x,Pe.y,!0).rotate(-X.getRotation(!0),X._getRotationPoint(!0)),Je=X._drawer.viewportCoordToDrawerCoord(Fe);return d&&(Je=Je.times(d)),v&&(Je=Je.plus(v)),Je})});this._drawer.clipWithPolygons(K,c)}catch(ct){a.console.error(ct)}O=!0}if(this.placeholderFillStyle&&this._hasOpaqueTile===!1){var ce=this._drawer.viewportToDrawerRectangle(this.getBounds(!0));d&&(ce=ce.times(d)),v&&(ce=ce.translate(v));var Ce=null;typeof this.placeholderFillStyle=="function"?Ce=this.placeholderFillStyle(this,this._drawer.context):Ce=this.placeholderFillStyle,this._drawer.drawRectangle(ce,Ce,c)}var Te=p(this.subPixelRoundingForTransparency),V=!1;if(Te===a.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS)V=!0;else if(Te===a.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST){var we=this.viewer&&this.viewer.isAnimating();V=!we}for(var ze=h.length-1;ze>=0;ze--)u=h[ze],this._drawer.drawTile(u,this._drawingHandler,c,d,v,V,this.source),u.beingDrawn=!0,this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:this,tile:u});O&&this._drawer.restoreContext(c),d||(this.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(c),this.viewport.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(c)),c&&(d&&(this.viewport.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:!1}),this.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:!1})),this._drawer.blendSketch({opacity:this.opacity,scale:d,translate:v,compositeOperation:this.compositeOperation,bounds:_}),d&&(this.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(!1),this.viewport.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(!1))),d||this.viewport.getRotation(!0)%360===0&&this.getRotation(!0)%360===0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip(),this._drawDebugInfo(h)}},_drawDebugInfo:function(h){if(this.debugMode)for(var u=h.length-1;u>=0;u--){var c=h[u];try{this._drawer.drawDebugInfo(c,h.length,u,this)}catch(d){a.console.error(d)}}},_providesCoverage:function(h,u,c,d){var v,S,C,_;if(!h[u])return!1;if(c===void 0||d===void 0){v=h[u];for(C in v)if(Object.prototype.hasOwnProperty.call(v,C)){S=v[C];for(_ in S)if(Object.prototype.hasOwnProperty.call(S,_)&&!S[_])return!1}return!0}return h[u][c]===void 0||h[u][c][d]===void 0||h[u][c][d]===!0},_isCovered:function(h,u,c,d){return c===void 0||d===void 0?this._providesCoverage(h,u+1):this._providesCoverage(h,u+1,2*c,2*d)&&this._providesCoverage(h,u+1,2*c,2*d+1)&&this._providesCoverage(h,u+1,2*c+1,2*d)&&this._providesCoverage(h,u+1,2*c+1,2*d+1)},_setCoverage:function(h,u,c,d,v){if(!h[u]){a.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",u);return}h[u][c]||(h[u][c]={}),h[u][c][d]=v},_resetCoverage:function(h,u){h[u]={}}});var l=a.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function o(h){return h!==a.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&h!==a.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&h!==a.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function f(h){return o(h)?l:h}function p(h){if(typeof h=="number")return f(h);if(!h||!a.Browser)return l;var u=h[a.Browser.vendor];return o(u)&&(u=h["*"]),f(u)}})(te),(function(a){var l=function(f){a.console.assert(f,"[TileCache.cacheTile] options is required"),a.console.assert(f.tile,"[TileCache.cacheTile] options.tile is required"),a.console.assert(f.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=f.tile,this.tiledImage=f.tiledImage},o=function(f){a.console.assert(f,"[ImageRecord] options is required"),a.console.assert(f.data,"[ImageRecord] options.data is required"),this._tiles=[],f.create.apply(null,[this,f.data,f.ownerTile]),this._destroyImplementation=f.destroy.bind(null,this),this.getImage=f.getImage.bind(null,this),this.getData=f.getData.bind(null,this),this.getRenderedContext=f.getRenderedContext.bind(null,this)};o.prototype={destroy:function(){this._destroyImplementation(),this._tiles=null},addTile:function(f){a.console.assert(f,"[ImageRecord.addTile] tile is required"),this._tiles.push(f)},removeTile:function(f){for(var p=0;p<this._tiles.length;p++)if(this._tiles[p]===f){this._tiles.splice(p,1);return}a.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",f)},getTileCount:function(){return this._tiles.length}},a.TileCache=function(f){f=f||{},this._maxImageCacheCount=f.maxImageCacheCount||a.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},a.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(f){a.console.assert(f,"[TileCache.cacheTile] options is required"),a.console.assert(f.tile,"[TileCache.cacheTile] options.tile is required"),a.console.assert(f.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),a.console.assert(f.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var p=f.cutoff||0,h=this._tilesLoaded.length,u=this._imagesLoaded[f.tile.cacheKey];if(u||(f.data||(a.console.error("[TileCache.cacheTile] options.image was renamed to options.data. '.image' attribute has been deprecated and will be removed in the future."),f.data=f.image),a.console.assert(f.data,"[TileCache.cacheTile] options.data is required to create an ImageRecord"),u=this._imagesLoaded[f.tile.cacheKey]=new o({data:f.data,ownerTile:f.tile,create:f.tiledImage.source.createTileCache,destroy:f.tiledImage.source.destroyTileCache,getImage:f.tiledImage.source.getTileCacheDataAsImage,getData:f.tiledImage.source.getTileCacheData,getRenderedContext:f.tiledImage.source.getTileCacheDataAsContext2D}),this._imagesLoadedCount++),u.addTile(f.tile),f.tile.cacheImageRecord=u,this._imagesLoadedCount>this._maxImageCacheCount){for(var c=null,d=-1,v=null,S,C,_,O,R,M,X=this._tilesLoaded.length-1;X>=0;X--)if(M=this._tilesLoaded[X],S=M.tile,!(S.level<=p||S.beingDrawn)){if(!c){c=S,d=X,v=M;continue}O=S.lastTouchTime,C=c.lastTouchTime,R=S.level,_=c.level,(O<C||O===C&&R>_)&&(c=S,d=X,v=M)}c&&d>=0&&(this._unloadTile(v),h=d)}this._tilesLoaded[h]=new l({tile:f.tile,tiledImage:f.tiledImage})},clearTilesFor:function(f){a.console.assert(f,"[TileCache.clearTilesFor] tiledImage is required");for(var p,h=0;h<this._tilesLoaded.length;++h)p=this._tilesLoaded[h],p.tiledImage===f&&(this._unloadTile(p),this._tilesLoaded.splice(h,1),h--)},getImageRecord:function(f){return a.console.assert(f,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[f]},_unloadTile:function(f){a.console.assert(f,"[TileCache._unloadTile] tileRecord is required");var p=f.tile,h=f.tiledImage;p.unload(),p.cacheImageRecord=null;var u=this._imagesLoaded[p.cacheKey];u.removeTile(p),u.getTileCount()||(u.destroy(),delete this._imagesLoaded[p.cacheKey],this._imagesLoadedCount--),h.viewer.raiseEvent("tile-unloaded",{tile:p,tiledImage:h})}}})(te),(function(a){a.World=function(l){var o=this;a.console.assert(l.viewer,"[World] options.viewer is required"),a.EventSource.call(this),this.viewer=l.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(f){o._autoRefigureSizes?o._figureSizes():o._needsSizesFigured=!0},this._figureSizes()},a.extend(a.World.prototype,a.EventSource.prototype,{addItem:function(l,o){if(a.console.assert(l,"[World.addItem] item is required"),a.console.assert(l instanceof a.TiledImage,"[World.addItem] only TiledImages supported at this time"),o=o||{},o.index!==void 0){var f=Math.max(0,Math.min(this._items.length,o.index));this._items.splice(f,0,l)}else this._items.push(l);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,l.addHandler("bounds-change",this._delegatedFigureSizes),l.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:l})},getItemAt:function(l){return a.console.assert(l!==void 0,"[World.getItemAt] index is required"),this._items[l]},getIndexOfItem:function(l){return a.console.assert(l,"[World.getIndexOfItem] item is required"),a.indexOf(this._items,l)},getItemCount:function(){return this._items.length},setItemIndex:function(l,o){a.console.assert(l,"[World.setItemIndex] item is required"),a.console.assert(o!==void 0,"[World.setItemIndex] index is required");var f=this.getIndexOfItem(l);if(o>=this._items.length)throw new Error("Index bigger than number of layers.");o===f||f===-1||(this._items.splice(f,1),this._items.splice(o,0,l),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:l,previousIndex:f,newIndex:o}))},removeItem:function(l){a.console.assert(l,"[World.removeItem] item is required");var o=a.indexOf(this._items,l);o!==-1&&(l.removeHandler("bounds-change",this._delegatedFigureSizes),l.removeHandler("clip-change",this._delegatedFigureSizes),l.destroy(),this._items.splice(o,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(l))},removeAll:function(){this.viewer._cancelPendingImages();var l,o;for(o=0;o<this._items.length;o++)l=this._items[o],l.removeHandler("bounds-change",this._delegatedFigureSizes),l.removeHandler("clip-change",this._delegatedFigureSizes),l.destroy();var f=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,o=0;o<f.length;o++)l=f[o],this._raiseRemoveItem(l)},resetItems:function(){for(var l=0;l<this._items.length;l++)this._items[l].reset()},update:function(){for(var l=!1,o=0;o<this._items.length;o++)l=this._items[o].update()||l;return l},draw:function(){for(var l=0;l<this._items.length;l++)this._items[l].draw();this._needsDraw=!1},needsDraw:function(){for(var l=0;l<this._items.length;l++)if(this._items[l].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(l){this._autoRefigureSizes=l,l&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(l){l=l||{};var o=l.immediately||!1,f=l.layout||a.DEFAULT_SETTINGS.collectionLayout,p=l.rows||a.DEFAULT_SETTINGS.collectionRows,h=l.columns||a.DEFAULT_SETTINGS.collectionColumns,u=l.tileSize||a.DEFAULT_SETTINGS.collectionTileSize,c=l.tileMargin||a.DEFAULT_SETTINGS.collectionTileMargin,d=u+c,v;!l.rows&&h?v=h:v=Math.ceil(this._items.length/p);var S=0,C=0,_,O,R,M,X;this.setAutoRefigureSizes(!1);for(var K=0;K<this._items.length;K++)K&&K%v===0&&(f==="horizontal"?(C+=d,S=0):(S+=d,C=0)),_=this._items[K],O=_.getBounds(),O.width>O.height?R=u:R=u*(O.width/O.height),M=R*(O.height/O.width),X=new a.Point(S+(u-R)/2,C+(u-M)/2),_.setPosition(X,o),_.setWidth(R,o),f==="horizontal"?S+=d:C+=d;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var l=this._homeBounds?this._homeBounds.clone():null,o=this._contentSize?this._contentSize.clone():null,f=this._contentFactor||0;if(!this._items.length)this._homeBounds=new a.Rect(0,0,1,1),this._contentSize=new a.Point(1,1),this._contentFactor=1;else{var p=this._items[0],h=p.getBounds();this._contentFactor=p.getContentSize().x/h.width;for(var u=p.getClippedBounds().getBoundingBox(),c=u.x,d=u.y,v=u.x+u.width,S=u.y+u.height,C=1;C<this._items.length;C++)p=this._items[C],h=p.getBounds(),this._contentFactor=Math.max(this._contentFactor,p.getContentSize().x/h.width),u=p.getClippedBounds().getBoundingBox(),c=Math.min(c,u.x),d=Math.min(d,u.y),v=Math.max(v,u.x+u.width),S=Math.max(S,u.y+u.height);this._homeBounds=new a.Rect(c,d,v-c,S-d),this._contentSize=new a.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==f||!this._homeBounds.equals(l)||!this._contentSize.equals(o))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(l){this.raiseEvent("remove-item",{item:l})}})})(te)})(bs)),bs.exports}var zm=Dm();const al=qo(zm),Om=()=>{const[ne,te]=ve.useState(!1),[a,l]=ve.useState(!1),[o,f]=ve.useState([]),[p,h]=ve.useState([]),[u,c]=ve.useState(null),[d,v]=ve.useState(null),[S,C]=ve.useState(!0),[_,O]=ve.useState(!1),[R,M]=ve.useState(!1),[X,K]=ve.useState(null),[ce,Ce]=ve.useState(null),Te=ve.useRef(null),[V,we]=ve.useState(null),ze=ve.useRef(null),[ct,Pe]=ve.useState(!1),[Fe,Je]=ve.useState(null),[dt,_t]=ve.useState(!1),[G,ae]=ve.useState(!0),[me,Ne]=ve.useState(0),be=ve.useRef(null),[z,I]=ve.useState([]),Q=ve.useRef(!1),[ie,xe]=ve.useState([]),[_e,Be]=ve.useState("positive"),[We,ke]=ve.useState(!1),[Ft,Pt]=ve.useState(0),[rt,ti]=ve.useState([]),[Tt,zt]=ve.useState(!1),[St,m]=ve.useState([]),[E,U]=ve.useState(!1),$=ve.useRef(null),ee=ve.useRef("positive"),ye=ve.useRef(new Set),[le,Re]=ve.useState(0),[Ge,Ie]=ve.useState([]),[pe,Ke]=ve.useState(!1),[T,y]=ve.useState(100),[x,b]=ve.useState(null),q=2.5,J=ie.filter(H=>H.label==="positive").length,he=ie.filter(H=>H.label==="negative").length,De=J===4&&he===4,de="/api";ve.useEffect(()=>{if(V&&a&&z.length>0){const H=window.setTimeout(()=>{gn()},50);return()=>window.clearTimeout(H)}},[ie]),ve.useEffect(()=>{ee.current=_e},[_e]),ve.useEffect(()=>{console.log("=== STATE UPDATE ==="),console.log("Total samples:",ie.length),console.log("Positive:",J),console.log("Negative:",he),console.log("Current label:",_e),console.log("Samples:",ie.map(H=>`${H.index}(${H.label})`)),console.log("==================")},[ie,_e]),ve.useEffect(()=>{if(!V||rt.length===0)return;const H=()=>{V.viewport.getZoom()<q?pe||(zt(!1),Ke(!0),console.log("[AUTO-SWITCH] Zoom out  Showing heatmap")):Tt||(zt(!0),Ke(!1),console.log("[AUTO-SWITCH] Zoom in  Showing predictions"))};return V.addHandler("zoom",H),H(),()=>{V.removeHandler("zoom",H)}},[V,rt,pe,Tt]),ve.useEffect(()=>{pe&&rt.length>0?Ct():!pe&&x&&(V?.removeOverlay(x),b(null))},[pe,rt,T,V]),ve.useEffect(()=>{a&&pn()},[a]),ve.useEffect(()=>{pn()},[]),ve.useEffect(()=>{d&&X===d.name?Ce(d.name):Ce(null)},[d,X]),ve.useEffect(()=>{pe&&Tt&&zt(!1)},[pe]),ve.useEffect(()=>{if(!V||!a||z.length===0)return;let H;const k=()=>{window.clearTimeout(H),H=window.setTimeout(()=>{Tt&&rt.length>0?(be.current&&(V.removeOverlay(be.current),be.current=null),x&&(V.removeOverlay(x),b(null)),mn()):G&&!Tt&&!pe&&($.current&&(V.removeOverlay($.current),$.current=null),x&&(V.removeOverlay(x),b(null)),gn())},200)};return V.addHandler("zoom",k),V.addHandler("pan",k),k(),()=>{window.clearTimeout(H),V.removeHandler("zoom",k),V.removeHandler("pan",k)}},[V,a,z,G,ie,rt,Tt,Ge]),ve.useEffect(()=>{Ot()},[]),ve.useEffect(()=>{o.length===1&&!u&&!dt&&(c(o[0]),console.log("Auto-selected single dataset:",o[0]))},[o,u,dt]),ve.useEffect(()=>{u?gt(u.id):(h([]),v(null))},[u]),ve.useEffect(()=>{if(!ze.current||!d)return;V&&(V.destroy(),we(null));const H=al({element:ze.current,prefixUrl:"https://cdnjs.cloudflare.com/ajax/libs/openseadragon/4.1.1/images/",showNavigationControl:!0,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showSequenceControl:!1,animationTime:.3,blendTime:.1,springStiffness:10,constrainDuringPan:!1,maxZoomPixelRatio:32,minZoomImageRatio:.9,visibilityRatio:.5,zoomPerScroll:1.8,zoomPerClick:1.4,useCanvas:!0,smoothTileEdgesMinZoom:.8,wrapHorizontal:!1,wrapVertical:!1,timeout:12e4,loadTilesWithAjax:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,imageLoaderLimit:4,immediateRender:!1,preserveImageSizeOnResize:!0,preserveViewport:!0,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!1,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25},debugMode:!1,mouseNavEnabled:!0,controlsFadeDelay:2e3,controlsFadeLength:1500});we(H);const k=oe=>{if(!H||!a||We){console.log("Click blocked:",{hasViewer:!!H,segmentationComplete:a,isTraining:We});return}const ue=H.viewport.pointFromPixel(oe.position),se=H.viewport.viewportToImageCoordinates(ue);console.log("Click detected with currentLabel:",ee.current);let re=null,Le=1/0;const Me=50;for(const at of z){if(!ye.current.has(at.index))continue;const lt=se.x>=at.bbox_x0&&se.x<=at.bbox_x1&&se.y>=at.bbox_y0&&se.y<=at.bbox_y1,Ut=Math.sqrt(Math.pow(se.x-at.x,2)+Math.pow(se.y-at.y,2)),ft=Ut<=Me;(lt||ft)&&Ut<Le&&(re=at,Le=Ut,console.log("Found nucleus:",at.nucleus_id,"bbox:",lt,"centroid:",ft,"distance:",Ut.toFixed(2)))}re?(console.log("Selected nucleus:",re.nucleus_id,"distance:",Le.toFixed(2)),sl(re)):console.log("No nucleus found at click position")};return H.addHandler("canvas-click",k),H.addHandler("tile-load-failed",function(){console.warn("Tile load failed")}),d.pyramid_path&&Yt(d.pyramid_path,H),()=>{try{H.removeHandler("canvas-click",k),H.destroy()}catch{console.log("Viewer cleanup completed")}}},[ze.current,d,a,We,z]),ve.useEffect(()=>{d?.id&&(ga(),V&&$.current&&(V.removeOverlay($.current),$.current=null),V&&x&&(V.removeOverlay(x),b(null)),l(!1),I([]),xe([]),ti([]),zt(!1),Ke(!1),Re(0),Ie([]),Pt(0),ke(!1))},[d?.id]);const Ot=async()=>{try{C(!0);const k=await(await fetch(`${de}/datasets`)).json();k.success?(f(k.datasets),console.log("Datasets loaded:",k.datasets)):(console.error("Failed to fetch datasets:",k.error),alert("Failed to load datasets. Please check the API connection."))}catch(H){console.error("Error fetching datasets:",H),alert("Error connecting to API. Please ensure the backend is running.")}finally{C(!1)}},gt=async H=>{try{O(!0);const oe=await(await fetch(`${de}/datasets/${H}/slides`)).json();oe.success?(h(oe.slides),console.log("Slides loaded:",oe.slides)):(console.error("Failed to fetch slides:",oe.error),alert("Failed to load slides for the selected dataset."))}catch(k){console.error("Error fetching slides:",k),alert("Error loading slides. Please try again.")}finally{O(!1)}},Yt=async(H,k)=>{if(!k||!H){Je("Viewer or image path missing"),Pe(!1);return}Pe(!0),Je(null);try{k.world.removeAll();const oe=`${window.location.origin}/iipsrv/iipsrv.fcgi`;console.log("Loading image with IIP DeepZoom format...");const ue=`${oe}?DeepZoom=${encodeURIComponent(H)}.dzi`;console.log("DeepZoom URL:",ue);const se=()=>{console.log("DeepZoom image loaded successfully"),Pe(!1),k.removeHandler("open",se),k.removeHandler("open-failed",re)},re=()=>{console.log("DeepZoom failed, trying IIIF format..."),k.removeHandler("open",se),k.removeHandler("open-failed",re),pi(H,k)};k.addHandler("open",se),k.addHandler("open-failed",re),k.open(ue)}catch(oe){console.error("Error in DeepZoom loading:",oe),pi(H,k)}},pi=(H,k)=>{const oe=`${window.location.origin}/iipsrv/iipsrv.fcgi`;console.log("Using IIIF format for seamless viewing...");const ue=`${oe}?IIIF=${encodeURIComponent(H)}/info.json`;console.log("IIIF URL:",ue);const se=()=>{console.log("IIIF image loaded successfully - seamless viewing enabled"),Pe(!1),k.removeHandler("open",se),k.removeHandler("open-failed",re)},re=()=>{console.log("IIIF also failed, using simple image..."),k.removeHandler("open",se),k.removeHandler("open-failed",re);const Le=d?.x_size||1e4,Me=d?.y_size||1e4;xi(H,k,Le,Me)};k.addHandler("open",se),k.addHandler("open-failed",re),k.open(ue)},xi=(H,k,oe,ue)=>{const se=`${window.location.origin}/iipsrv/iipsrv.fcgi`;console.log("Using simple image fallback...");const re={type:"image",url:`${se}?FIF=${encodeURIComponent(H)}&WID=2048&CVT=jpeg`,width:oe,height:ue,crossOriginPolicy:!1,ajaxWithCredentials:!1};console.log("Simple image source:",re),k.addOnceHandler("open",()=>{console.log("Simple image loaded successfully"),Pe(!1)}),k.addOnceHandler("open-failed",Le=>{console.log("All image loading methods failed:",Le),Je("Unable to load image with any available method. Please check the image path and IIP server configuration."),Pe(!1)}),k.open(re)},ii=H=>{c(H),v(null),_t(!1),l(!1),Je(null),console.log("Dataset selected:",H)},Hn=H=>{console.log("Slide selected:",H.name),console.log("Pyramid path:",H.pyramid_path),v(H),l(!1),Je(null)},dn=async()=>{if(!d||!V){alert("Please select a slide first");return}console.log("Loading nuclei boundaries for:",d.name),te(!0),l(!1),Je(null);try{const k=await(await fetch(`${de}/nuclei/${d.name}`)).json();if(k.success){console.log(`Loaded ${k.nucleus_count} nuclei`);const oe=k.nuclei.map((ue,se)=>({...ue,index:se}));Ne(k.nucleus_count),l(!0),I(oe),gn(),await _s()}else Je(k.error||"Failed to load nuclei"),console.error("Nuclei loading failed:",k.error)}catch(H){console.error("Error loading nuclei:",H),Je("Network error loading nuclei")}finally{te(!1)}},_s=async()=>{if(d)try{const k=await(await fetch(`${de}/ml/models/list`)).json();k.success&&(k.models.find(se=>se.slide_name===d.name&&se.is_valid)?(K(d.name),console.log(` Model found for ${d.name}`)):(K(null),console.log(` No model found for ${d.name}`)))}catch(H){console.error("Error checking for model:",H)}},sl=H=>{const k=ee.current;xe(oe=>{const ue=oe.findIndex(Le=>Le.index===H.index);if(ue>=0)return console.log("Deselecting nucleus:",H.nucleus_id),oe.filter((Le,Me)=>Me!==ue);if(oe.filter(Le=>Le.label===k).length>=4)return alert(`Already selected 4 ${k} samples. Please deselect one first or switch to ${k==="positive"?"negative":"positive"}.`),oe;const re={index:H.index,x:H.x,y:H.y,label:k};return[...oe,re]})},gn=()=>{if(!V||!z.length||(be.current&&(V.removeOverlay(be.current),be.current=null),!G||Tt||pe))return;const H=document.createElementNS("http://www.w3.org/2000/svg","svg");H.setAttribute("viewBox","0 0 1 1"),H.setAttribute("pointer-events","none"),H.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none";const k=z.filter((ue,se)=>se%10===0),oe=new Set(k.map(ue=>ue.index));ie.forEach(ue=>oe.add(ue.index)),ye.current=oe,console.log(`Drawing ${k.length} nuclei, ${oe.size} total clickable`),k.forEach(ue=>{const se=ie.find(Ut=>Ut.index===ue.index),re=V.viewport.imageToViewportCoordinates(ue.bbox_x0,ue.bbox_y0),Le=V.viewport.imageToViewportCoordinates(ue.bbox_x1,ue.bbox_y1),Me=document.createElementNS("http://www.w3.org/2000/svg","rect");Me.setAttribute("x",re.x.toString()),Me.setAttribute("y",re.y.toString()),Me.setAttribute("width",(Le.x-re.x).toString()),Me.setAttribute("height",(Le.y-re.y).toString()),Me.setAttribute("fill","none"),Me.setAttribute("stroke",se?se.label==="positive"?"#00FF00":"#FFFF00":"#00FF00"),Me.setAttribute("stroke-width",se?"0.0004":"0.0002"),Me.setAttribute("opacity",se?"1":"0.7"),Me.setAttribute("pointer-events","none"),H.appendChild(Me);const at=V.viewport.imageToViewportCoordinates(ue.x,ue.y),lt=document.createElementNS("http://www.w3.org/2000/svg","circle");lt.setAttribute("cx",at.x.toString()),lt.setAttribute("cy",at.y.toString()),se?(lt.setAttribute("r","0.0005"),lt.setAttribute("fill","#FFA500"),lt.setAttribute("stroke",se.label==="positive"?"#00FF00":"#FF0000"),lt.setAttribute("stroke-width","0.00005"),lt.setAttribute("opacity","1")):(lt.setAttribute("r","0.00012"),lt.setAttribute("fill","#FFFF00"),lt.setAttribute("opacity","0.7")),lt.setAttribute("pointer-events","none"),H.appendChild(lt)}),V.addOverlay(H,new al.Rect(0,0,1,1)),be.current=H},mn=()=>{if(!V||!rt.length)return;$.current&&(V.removeOverlay($.current),$.current=null),be.current&&(V.removeOverlay(be.current),be.current=null),x&&(V.removeOverlay(x),b(null));const H=document.createElementNS("http://www.w3.org/2000/svg","svg");H.setAttribute("viewBox","0 0 1 1"),H.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none";const k=new Set(ie.map(ue=>ue.index)),oe=rt.filter((ue,se)=>se%10===0||k.has(rt[se].index));console.log(`Drawing ${oe.length} predictions (including ${ie.length} selected)`),oe.forEach(ue=>{if(k.has(ue.index))return;const se=V.viewport.imageToViewportCoordinates(ue.x,ue.y),re=document.createElementNS("http://www.w3.org/2000/svg","circle");re.setAttribute("cx",se.x.toString()),re.setAttribute("cy",se.y.toString()),re.setAttribute("r","0.0002"),re.setAttribute("fill",ue.prediction==="positive"?"#FF00FF":"#00FFFF"),re.setAttribute("opacity",(ue.probability*.8).toString()),H.appendChild(re)}),ie.forEach(ue=>{const se=V.viewport.imageToViewportCoordinates(ue.x,ue.y),re=document.createElementNS("http://www.w3.org/2000/svg","circle");re.setAttribute("cx",se.x.toString()),re.setAttribute("cy",se.y.toString()),re.setAttribute("r","0.0005"),re.setAttribute("fill","#FFA500"),re.setAttribute("stroke",ue.label==="positive"?"#00FF00":"#FF0000"),re.setAttribute("stroke-width","0.00005"),re.setAttribute("opacity","1"),H.appendChild(re)}),V.addOverlay(H,new al.Rect(0,0,1,1)),$.current=H},Cs=async()=>{const H=[...ie];if(console.log("=== TRAINING START ==="),console.log("Captured samples:",H.length),console.log("Samples:",H),console.log("===================="),H.length===0){console.log("BLOCKED: No samples captured"),alert("Please select 8 samples before training");return}if(!u||!d){alert("Please select a dataset and slide");return}if(H.length!==8){alert("Please select exactly 8 samples (4 positive + 4 negative) before training");return}const k=H.filter(re=>re.label==="positive").length,oe=H.filter(re=>re.label==="negative").length;if(k!==4||oe!==4){alert(`Please select exactly 4 positive and 4 negative samples. Currently: ${k} positive, ${oe} negative`);return}if(le>0&&Ge.length>0&&H.every(Le=>Ge.some(Me=>Me.index===Le.index))){alert("These samples are already in the training set. Please select NEW samples.");return}Te.current&&(Te.current.abort(),Te.current=null),Q.current=!1;const ue=[...Ge,...H];console.log("=== ACCUMULATION ==="),console.log("Previous total:",Ge.length),console.log("Adding:",H.length),console.log("New total:",ue.length),console.log("==================="),Ie(ue),xe([]);const se=le+1;Re(se),ke(!0),Pt(0),ti([]),zt(!1);try{const re=ue.map(lt=>({index:lt.index,label:lt.label}));console.log("=== SENDING TO BACKEND ==="),console.log("Iteration:",se),console.log("Annotations count:",re.length),console.log("Annotations:",re),console.log("========================");const Me=await(await fetch(`${de}/ml/train-histomics`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset_id:u.id,slide_id:d.id,annotations:re,iteration:se})})).json();if(!Me.success)throw new Error(Me.error||"Training submission failed");const at=Me.job_id;console.log(`Iteration ${se} - Job submitted:`,at),da(at)}catch(re){console.error("Training error:",re),alert(`Error: ${re}`),ke(!1),xe(H)}},da=async H=>{Te.current&&Te.current.abort();const k=new AbortController;Te.current=k,console.log(`Starting to poll job: ${H}`);let oe=0;const ue=150,se=async()=>{if(k.signal.aborted){console.log("Polling aborted");return}if(oe++,oe>ue){ke(!1),alert("Training timeout");return}try{const Le=await(await fetch(`${de}/ml/status-histomics/${H}`,{signal:k.signal})).json();if(Pt(Le.progress||0),Le.status==="completed"){console.log("Training completed"),ke(!1),Pt(100),await rl(H);return}else if(Le.status==="error"){console.log("Training failed"),ke(!1),alert("Training failed: "+Le.message);return}setTimeout(()=>se(),2e3)}catch(re){if(re.name==="AbortError"){console.log("Fetch aborted");return}console.error("Status check error:",re),setTimeout(()=>se(),2e3)}};se()},rl=async H=>{if(Q.current){console.log("Already loading predictions, skipping");return}Q.current=!0;try{console.log(`Loading predictions for job: ${H}`);const oe=await(await fetch(`${de}/predictions-histomics/${H}`)).json();oe.success?(console.log(`Loaded ${oe.total_count} predictions`),ti(oe.predictions),zt(!0),d&&K(d.name),alert(`Prediction Complete! ${oe.total_count} predictions (${oe.positive_count} positive, ${oe.negative_count} negative)`)):(console.error("Failed to load predictions:",oe.error),alert("Failed to load predictions: "+oe.error))}catch(k){console.error("Error loading predictions:",k),alert("Error loading predictions: "+k)}finally{Q.current=!1}},ol=async()=>{if(!u||!d){alert("Please select a dataset and slide");return}if(!ce){alert("Please select a model to use for predictions");return}ce!==d.name&&console.log(`Transfer Learning: Applying model '${ce}' on slide '${d.name}'`),ke(!0),Pt(0),ti([]),zt(!1);try{console.log(`Using model '${ce}' for slide '${d.name}'`);const k=await(await fetch(`${de}/ml/predict-with-model`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset_id:u.id,slide_id:d.id,model_name:ce})})).json();if(!k.success)throw new Error(k.error||"Prediction failed");console.log("Prediction job submitted:",k.job_id),da(k.job_id)}catch(H){console.error("Prediction error:",H),alert(`Error: ${H}`),ke(!1)}},pn=async()=>{try{M(!0);const k=await(await fetch(`${de}/ml/models/list`)).json();k.success&&m(k.models)}catch(H){console.error("Error fetching models:",H),m([])}finally{M(!1)}},ga=()=>{V&&be.current&&(V.removeOverlay(be.current),be.current=null),Ne(0)};(H=>{const k={"Very High (>0.9)":0,"High (0.7-0.9)":0,"Medium (0.6-0.7)":0,"Low (0.5-0.6)":0,"Very Low (<0.5)":0};H.forEach(ue=>{const se=Math.max(ue.probability,1-ue.probability);se>.9?k["Very High (>0.9)"]++:se>=.7?k["High (0.7-0.9)"]++:se>=.6?k["Medium (0.6-0.7)"]++:se>=.5?k["Low (0.5-0.6)"]++:k["Very Low (<0.5)"]++}),console.log("Confidence Distribution:",k);const oe=H.length;Object.entries(k).forEach(([ue,se])=>{const re=(se/oe*100).toFixed(1);console.log(`${ue}: ${se} (${re}%)`)})})(rt);const ul=(H,k)=>{const oe=new Map;return H.forEach(ue=>{if(ue.prediction!=="positive")return;const se=Math.floor(ue.x/k),re=Math.floor(ue.y/k),Le=`${se},${re}`;oe.set(Le,(oe.get(Le)||0)+1)}),oe},vi=(H,k)=>{const oe=Math.min(H/k,1);if(oe<.5){const ue=oe*2,se=Math.floor(255*ue),re=0,Le=Math.floor(255*(1-ue));return`rgb(${se}, ${re}, ${Le})`}else{const ue=(oe-.5)*2,se=255,re=Math.floor(255*(1-ue));return`rgb(${se}, ${re}, 0)`}},Ct=()=>{if(!V||!rt.length||!pe)return;$.current&&(V.removeOverlay($.current),$.current=null),x&&(V.removeOverlay(x),b(null)),console.log("[HEATMAP] Generating heatmap...");const H=document.createElement("canvas");H.width=2e3,H.height=2e3,H.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;opacity:0.6";const k=H.getContext("2d");if(!k)return;k.clearRect(0,0,H.width,H.height);const oe=ul(rt,T);let ue=0;if(oe.forEach(se=>{se>ue&&(ue=se)}),console.log(`[HEATMAP] Max density: ${ue} predictions per bin`),oe.forEach((se,re)=>{const[Le,Me]=re.split(",").map(Number),at=V.viewport.imageToViewportCoordinates(Le*T,Me*T),lt=V.viewport.imageToViewportCoordinates((Le+1)*T,(Me+1)*T),Ut=at.x*H.width,ft=at.y*H.height,cl=(lt.x-at.x)*H.width,hl=(lt.y-at.y)*H.height,Ei=vi(se,ue),qi=.3+se/ue*.5;k.fillStyle=Ei,k.globalAlpha=qi,k.fillRect(Ut,ft,cl,hl)}),k.globalAlpha=1,k.filter="blur(2px)",k.drawImage(H,0,0),k.filter="none",V.addOverlay(H,new al.Rect(0,0,1,1)),b(H),ie.length>0){const se=document.createElementNS("http://www.w3.org/2000/svg","svg");se.setAttribute("viewBox","0 0 1 1"),se.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none",ie.forEach(re=>{const Le=V.viewport.imageToViewportCoordinates(re.x,re.y),Me=document.createElementNS("http://www.w3.org/2000/svg","circle");Me.setAttribute("cx",Le.x.toString()),Me.setAttribute("cy",Le.y.toString()),Me.setAttribute("r","0.0005"),Me.setAttribute("fill","#FFA500"),Me.setAttribute("stroke",re.label==="positive"?"#00FF00":"#FF0000"),Me.setAttribute("stroke-width","0.00005"),Me.setAttribute("opacity","1"),se.appendChild(Me)}),V.addOverlay(se,new al.Rect(0,0,1,1))}console.log(`[HEATMAP] Rendered ${oe.size} bins with ${ie.length} selected samples`)},At=H=>{if(!V)return;console.log("Switching label from",_e,"to",H);const k=V.viewport.getZoom(),oe=V.viewport.getCenter();console.log("Saved zoom:",k,"center:",oe),Be(H),requestAnimationFrame(()=>{V&&(V.viewport.zoomTo(k,void 0,!0),V.viewport.panTo(oe,!0),console.log("Restored zoom:",k))})};return P.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:[P.jsx("div",{className:"mb-8",children:P.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-3",children:"HIMLT: Hybrid Interactive Machine Learning Tool for Histopathology Image Analysis."})}),P.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-4 gap-6",children:[P.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[P.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow",children:[P.jsxs("div",{className:"flex items-center mb-4",children:[P.jsx(xm,{className:"text-blue-600 mr-3",size:24}),P.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Dataset"})]}),P.jsxs("select",{value:u?.id||"",onChange:H=>{const k=o.find(oe=>oe.id===Number(H.target.value));k&&ii(k)},className:"w-full p-3 border-2 border-gray-200 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",disabled:S,children:[P.jsx("option",{value:"",children:S?"Loading...":"Select Dataset"}),o.map(H=>P.jsxs("option",{value:H.id,children:[H.name," (",H.slide_count," slides)"]},H.id))]}),P.jsx("div",{className:"mt-2 text-sm text-gray-500",children:u?`${u.slide_count} slides available`:S?"Loading...":"Select a dataset to continue"})]}),P.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow",children:[P.jsxs("div",{className:"flex items-center mb-4",children:[P.jsx(Zf,{className:"text-green-600 mr-3",size:24}),P.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Slide"})]}),P.jsxs("select",{value:d?.id||"",onChange:H=>{const k=p.find(oe=>oe.id===Number(H.target.value));k&&Hn(k)},className:"w-full p-3 border-2 border-gray-200 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",disabled:!u||_||p.length===0,children:[P.jsx("option",{value:"",children:u?_?"Loading...":p.length===0?"No slides available":"Select Slide":"Select dataset first"}),p.map(H=>P.jsxs("option",{value:H.id,children:[H.name," (",H.x_size,"",H.y_size,")"]},H.id))]}),P.jsx("div",{className:"mt-2 text-sm text-gray-500",children:d?`${d.x_size}${d.y_size}`:u?_?"Loading...":"Select a slide to continue":"Select a dataset first"})]}),P.jsxs("button",{onClick:dn,disabled:!u||!d||ne||We,className:`w-full flex items-center justify-center px-6 py-4 rounded-xl font-semibold text-white transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none ${a?"bg-green-500 hover:bg-green-600":"bg-orange-500 hover:bg-orange-600"}`,children:[P.jsx(bm,{className:"mr-3",size:20}),ne?P.jsx(kf,{className:"animate-spin mr-2",size:20}):P.jsx(P.Fragment,{children:a?`${me} Nuclei`:"Show Nuclei"})]}),a&&P.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[P.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Select Training Samples"}),P.jsxs("div",{className:"flex gap-2 mb-4",children:[P.jsx("button",{onClick:()=>At("positive"),className:`flex-1 px-4 py-2 rounded-lg font-medium ${_e==="positive"?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Positive"}),P.jsx("button",{onClick:()=>At("negative"),className:`flex-1 px-4 py-2 rounded-lg font-medium ${_e==="negative"?"bg-yellow-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Negative"})]}),P.jsxs("div",{className:"text-center text-lg font-semibold mb-2",children:[P.jsxs("span",{className:J===4?"text-green-600":"text-gray-600",children:[J,"/4 Positive"]}),"  ",P.jsxs("span",{className:he===4?"text-yellow-600":"text-gray-600",children:[he,"/4 Negative"]})]}),P.jsx("p",{className:"text-sm text-gray-500 text-center mb-3",children:"Click nuclei on the image to select"}),ie.length>0&&P.jsxs("button",{onClick:()=>xe([]),className:"w-full px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 text-sm",children:["Clear All (",ie.length,")"]}),le>0&&P.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[P.jsxs("p",{className:"text-sm font-medium text-blue-800",children:["Iteration: ",le]}),P.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Total training samples: ",Ge.length]})]})]}),P.jsxs("button",{onClick:Cs,disabled:!De||We||ie.length!==8,className:`w-full px-6 py-4 rounded-xl font-semibold text-white transition-all transform hover:scale-105 disabled:opacity-50 disabled:transform-none ${De&&!We?"bg-purple-500 hover:bg-purple-600":"bg-gray-400"}`,children:[P.jsx(Vf,{className:"inline mr-2",size:20}),We?`Training... ${Ft}%`:le>0?`Refine Model (Iteration ${le+1})`:"Train Model"]}),We&&P.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4",children:[P.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[P.jsx("span",{children:"Progress"}),P.jsxs("span",{children:[Ft,"%"]})]}),P.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:P.jsx("div",{className:"bg-purple-500 h-3 rounded-full transition-all duration-300",style:{width:`${Ft}%`}})})]}),rt.length>0&&P.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4",children:[P.jsx("h3",{className:"font-semibold mb-3",children:"Predictions"}),P.jsxs("div",{className:"space-y-2 text-sm",children:[P.jsxs("p",{className:"text-gray-600",children:[rt.length," total predictions"]}),P.jsxs("p",{className:"text-gray-600",children:[P.jsx("span",{className:"font-medium",style:{color:"#FF00FF"},children:rt.filter(H=>H.prediction==="positive").length})," Positive"]}),P.jsxs("p",{className:"text-gray-600",children:[P.jsx("span",{className:"font-medium",style:{color:"#00FFFF"},children:rt.filter(H=>H.prediction==="negative").length})," Negative"]})]}),P.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[P.jsx("p",{className:"text-xs font-medium text-yellow-800 mb-1",children:"Iterative Learning"}),P.jsx("p",{className:"text-xs text-yellow-700",children:"Select 4 more positive + 4 negative samples from predictions to refine the model"})]})]}),rt.length>0&&P.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4",children:[P.jsx("h3",{className:"font-semibold mb-2",children:"Current View"}),P.jsx("div",{className:"p-2 bg-gray-100 rounded mb-3 text-sm text-center font-medium",children:pe?"Heatmap (Zoomed Out)":Tt?"Predictions (Zoomed In)":"Nuclei Selection"}),P.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Auto-switches based on zoom level"}),pe&&P.jsxs(P.Fragment,{children:[P.jsxs("div",{className:"border-t pt-3",children:[P.jsxs("label",{className:"block text-xs font-medium mb-2",children:["Resolution: ",T,"px"]}),P.jsx("input",{type:"range",min:"50",max:"300",step:"50",value:T,onChange:H=>y(parseInt(H.target.value)),className:"w-full"}),P.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[P.jsx("span",{children:"Fine"}),P.jsx("span",{children:"Coarse"})]})]}),P.jsxs("div",{className:"mt-3 p-2 bg-gray-50 rounded",children:[P.jsx("p",{className:"text-xs font-medium mb-2",children:"Density:"}),P.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[P.jsx("div",{className:"w-6 h-3",style:{background:"linear-gradient(to right, #0000FF, #FF0000, #FFFF00)"}}),P.jsx("span",{children:"Low  High"})]})]})]})]}),a&&!We&&P.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[P.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Model Management"}),P.jsxs("div",{className:"mb-3",children:[P.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Select Model for Prediction:"}),P.jsxs("select",{value:ce||"",onChange:H=>Ce(H.target.value),className:"w-full p-2 border-2 border-gray-200 rounded-lg bg-gray-50 hover:bg-gray-100",disabled:R,children:[P.jsx("option",{value:"",children:R?"Loading models...":St.length===0?"No models available":`Select from ${St.filter(H=>H.is_valid).length} models`}),St.filter(H=>H.is_valid).map(H=>P.jsxs("option",{value:H.slide_name,children:[H.slide_name,H.slide_name===d?.name?" (same slide)":""]},H.slide_name))]}),St.filter(H=>H.is_valid).length===0&&St.length>0&&P.jsx("p",{className:"text-xs text-red-600 mt-1",children:"All models are corrupted"})]}),ce&&ce!==d?.name&&P.jsxs("div",{className:"mb-3 p-3 bg-yellow-50 border-2 border-yellow-300 rounded-lg",children:[P.jsx("p",{className:"text-xs font-semibold text-yellow-800 mb-1",children:"Transfer Learning"}),P.jsxs("p",{className:"text-xs text-yellow-700",children:["Using model from ",P.jsx("span",{className:"font-medium",children:ce})," on current slide."]})]}),P.jsxs("button",{onClick:ol,disabled:!ce,className:"w-full mb-3 px-6 py-3 rounded-xl font-semibold text-white bg-purple-500 hover:bg-purple-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[P.jsx(Vf,{className:"inline mr-2",size:20}),ce?`Run Predictions with ${ce===d?.name?"Current":"Selected"} Model`:"Select Model First"]}),P.jsx("button",{onClick:()=>{pn(),U(!E)},className:"w-full px-4 py-2 rounded-lg text-sm text-gray-700 bg-gray-100 hover:bg-gray-200",children:E?`Hide Model Details (${St.filter(H=>H.is_valid).length} valid)`:`Show Model Details (${St.filter(H=>H.is_valid).length} available)`}),E&&P.jsx("div",{className:"mt-3 max-h-60 overflow-y-auto border rounded-lg",children:St.length===0?P.jsx("p",{className:"p-4 text-sm text-gray-500",children:"No models available"}):P.jsx("div",{className:"divide-y",children:St.map(H=>P.jsx("div",{className:`p-3 hover:bg-gray-50 cursor-pointer ${ce===H.slide_name?"bg-blue-50":""}`,onClick:()=>H.is_valid&&Ce(H.slide_name),children:P.jsx("div",{className:"flex justify-between items-start",children:P.jsxs("div",{className:"flex-1",children:[P.jsxs("p",{className:"font-medium text-sm",children:[H.slide_name,ce===H.slide_name&&" "]}),P.jsxs("p",{className:"text-xs text-gray-500",children:[H.size_mb.toFixed(2)," MB  ",H.created]}),!H.is_valid&&P.jsx("p",{className:"text-xs text-red-600 font-medium",children:"corrupted - Cannot Use"}),H.slide_name===d?.name&&P.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Same Slide"}),H.slide_name!==d?.name&&H.is_valid&&P.jsx("p",{className:"text-xs text-blue-600",children:"Available for Transfer Learning"})]})})},H.slide_name))})})]})]}),P.jsx("div",{className:"lg:col-span-3",children:P.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 h-full min-h-[600px]",children:[P.jsxs("div",{className:"flex items-center justify-between mb-6",children:[P.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:"Slide Viewer"}),P.jsx("div",{className:"flex space-x-2",children:d&&V&&P.jsxs(P.Fragment,{children:[P.jsx("button",{onClick:()=>V?.viewport?.zoomBy(1.5),disabled:!d||!V,className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 disabled:opacity-50 text-sm",title:"Zoom In",children:"+"}),P.jsx("button",{onClick:()=>V?.viewport?.zoomBy(.67),disabled:!d||!V,className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 disabled:opacity-50 text-sm",title:"Zoom Out",children:"-"}),P.jsx("button",{onClick:()=>V?.viewport?.goHome(),disabled:!d||!V,className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 disabled:opacity-50 text-sm",title:"Reset View",children:"Reset"})]})})]}),d?P.jsxs("div",{className:"relative",children:[ct&&P.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-lg z-10",children:P.jsxs("div",{className:"text-white text-center",children:[P.jsx(kf,{className:"animate-spin mx-auto mb-2",size:32}),P.jsx("p",{children:"Loading slide image..."}),P.jsxs("p",{className:"text-sm opacity-75 mt-2",children:["Path: ",d.pyramid_path]})]})}),Fe&&P.jsx("div",{className:"absolute top-4 left-4 right-4 p-4 bg-red-100 border border-red-300 text-red-800 rounded-lg z-10",children:P.jsxs("p",{children:[P.jsx("strong",{children:"Error:"})," ",Fe]})}),P.jsx("div",{ref:ze,className:"w-full h-96 border border-gray-300 rounded-lg bg-gray-50",style:{minHeight:"500px",imageRendering:"crisp-edges"}}),a&&P.jsxs("div",{className:"mt-4 px-4 py-2 bg-green-100 text-green-800 rounded-lg inline-block",children:["Total nuclei : ",me," items"]})]}):P.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-xl h-96 flex items-center justify-center",children:P.jsxs("div",{className:"text-center",children:[P.jsx(Zf,{className:"mx-auto mb-4",size:64}),P.jsx("p",{className:"text-xl text-gray-500",children:"No slide selected"}),P.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Select a dataset and slide to begin analysis"})]})}),a&&P.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[P.jsx("h4",{className:"font-semibold mb-2",children:"Legend:"}),P.jsxs("div",{className:"space-y-2 text-sm",children:[P.jsxs("div",{className:"flex items-center",children:[P.jsx("div",{className:"w-4 h-4 rounded mr-2 border-2",style:{backgroundColor:"#FFA500",borderColor:"#00FF00"}}),P.jsx("span",{children:"Selected Positive (Training)"})]}),P.jsxs("div",{className:"flex items-center",children:[P.jsx("div",{className:"w-4 h-4 rounded mr-2 border-2",style:{backgroundColor:"#FFA500",borderColor:"#FF0000"}}),P.jsx("span",{children:"Selected Negative (Training)"})]}),P.jsxs("div",{className:"flex items-center",children:[P.jsx("div",{className:"w-4 h-4 rounded mr-2",style:{backgroundColor:"#FFFF00"}}),P.jsx("span",{children:"Unselected Nuclei (Yellow dots)"})]}),rt.length>0&&P.jsxs(P.Fragment,{children:[P.jsx("hr",{className:"my-2 border-gray-300"}),P.jsxs("div",{className:"flex items-center",children:[P.jsx("div",{className:"w-4 h-4 rounded mr-2",style:{backgroundColor:"#FF00FF"}}),P.jsx("span",{children:"Predicted Positive"})]}),P.jsxs("div",{className:"flex items-center",children:[P.jsx("div",{className:"w-4 h-4 rounded mr-2",style:{backgroundColor:"#00FFFF"}}),P.jsx("span",{children:"Predicted Negative"})]}),P.jsxs("div",{className:"flex items-center",children:[P.jsx("div",{className:"w-4 h-4 rounded mr-2 border-2",style:{backgroundColor:"#FFA500",borderColor:"#00FF00"}}),P.jsx("span",{children:"Training: Positive (in predictions)"})]}),P.jsxs("div",{className:"flex items-center",children:[P.jsx("div",{className:"w-4 h-4 rounded mr-2 border-2",style:{backgroundColor:"#FFA500",borderColor:"#FF0000"}}),P.jsx("span",{children:"Training: Negative (in predictions)"})]})]})]})]})]})})]})]})};gm.createRoot(document.getElementById("root")).render(P.jsx(sm.StrictMode,{children:P.jsx(Om,{})}));
